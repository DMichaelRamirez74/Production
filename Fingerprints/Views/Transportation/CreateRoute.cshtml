@model FingerprintsModel.AssignRouteChildren
@{
    ViewBag.Title = "CreateRoute";
    Layout = "~/Views/Shared/AgencyStaffLayout.cshtml";
    // string googleMapKey = System.Configuration.ConfigurationManager.AppSettings["GoogleMapKey"].ToString();

    string googleMapKey = "AIzaSyCbNxbfW0RSsXvvj6J7li2e3WDxlpD9xt8";
}
@section maincontentholder{
    <link href="~/Content/Transportation/transportationanalysis.css" rel="stylesheet" />
    <style>
        #page-wrapper {
            padding-left: 0;
            padding-right: 0;
        }

        select option {
            background: #164273;
        }

        body {
            line-height: 1.42857143 !important;
        }

        .map-notify {
            position: absolute;
            background: #fff;
            border-radius: 5px; /* overflow: hidden; */
            top: 90px;
            left: 164px;
            right: 0;
            width: 330px;
            padding-bottom: 10px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }

        .map-notify-title {
            background: #e74c3c;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

            .map-notify-title h2 {
                margin: 0;
                font-size: 18px;
                text-align: center;
                padding: 10px;
                color: #fff;
            }

        .map-notify-cont p, .map-notify-cont1 p {
            font-size: 14px;
            color: #16406f;
            text-align: left;
            padding: 0 9px;
            line-height: 22px;
            margin-top: 12px; /* margin-bottom: 5px; */
        }

        .map-notify-cont {
            width: 40%;
            float: left;
            display: inline-block;
        }

        .map-notify-cont1 {
            width: 60%;
            float: left;
            display: inline-block;
        }

        .map-arrow-left {
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-right: 10px solid white;
            position: absolute;
            left: -10px;
            top: 82px;
            /* box-shadow: 0 0 10px rgba(0,0,0,0.2); */
        }

        .icr_bttr {
            padding: 5px 12px;
        }

        select {
            line-height: 50px;
        }



        /*Center-Transportation-Analysis*/

        /***************27-9-2017**************/
        .assign_route {
            background: #9b59b6 none repeat scroll 0 0 !important;
        }

        /*******************27/09/2017**************************/
        .accordionButton {
            width: 100%;
            float: left;
            background: #9b59b6;
            border-bottom: 1px solid #FFFFFF;
            cursor: pointer;
            padding: 12px;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
        }

            .accordionButton span {
                color: #FFFFFF;
                padding-left: 5px;
                font-weight: bold;
            }

        .accordionContent {
            width: 100%;
            float: left;
            background: #FFFFFF;
        }

            .accordionContent p {
                color: #333333;
                font-size: 14px;
                padding-left: 8px;
            }

        .on {
            width: 100%;
            float: left;
            background: #9b59b6;
            cursor: pointer;
        }

            .on span {
                color: #FFFFFF;
            }

        .over {
            width: 100%;
            float: left;
            background: #9b59b6;
            cursor: pointer;
        }

            .over span {
                color: #FFFFFF;
            }

        .plusMinus {
            font-weight: bold;
            float: right;
            padding-right: 4px;
            content: "+";
        }

        .icr_bttr {
            padding: 5px 12px;
        }

        .icr_table {
            width: 100%;
            float: left;
            color: #163b69;
        }

        .lower-icr {
            background-color: #f1f5f8;
            border-bottom-left-radius: 6px;
            border-bottom-right-radius: 6px;
            float: left;
            width: 100%;
            padding: 15px 0px 3px 12px;
        }

        .header_icc {
            background-color: #3498db;
            color: #fff;
            float: left;
            font-size: 18px;
            font-weight: 900;
            padding: 10px;
            text-transform: capitalize;
            width: 100%;
        }

        .btn_btn {
            float: left;
            margin: 9px -10px;
            width: 100%;
        }

            .btn_btn button {
                float: right;
            }

        .ecu_topsapc {
            float: left;
            margin: 20px 0;
            width: 100%;
        }

        .modal-header.icr_bgm_pop {
            background-color: #9b59b6;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
            color: #fff;
            text-align: center;
        }

        #child_popup button.close {
            color: #fff;
            opacity: 1;
        }

        #child_popup .modal-body {
            background-color: #f7f7f7;
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
            float: left;
            width: 100%;
        }

        #child_popup .icr_table table {
            background-color: #fff;
            color: #163b69;
        }

        .pick_route.icr_bttr select {
            background: #fff none repeat scroll 0 0;
            border: 1px solid #e7e7e7;
            border-radius: 0;
            box-shadow: none;
            color: #163b69;
            float: left;
            font-size: 15px;
            height: 43px;
            margin: 0;
            padding: 10px;
            text-align: left;
            text-transform: none;
            width: 100%;
            -moz-appearance: none;
        }
        /* .icr_field { */
        /* position: absolute; */
        /* right: 14px; */
        /* top: 12px; */
        /* } */
        .icr_field img {
            border-radius: 0px;
            bottom: 0;
            left: 0;
            margin: auto;
            max-height: 100%;
            max-width: 100%;
            position: absolute;
            right: -269px;
            top: 26px;
        }


        .tbl-assigned-route td {
            padding-left: 0;
   
    margin-right: 14px !important;
    display: inline-block;
    margin-bottom: 15px;

        }
        #hover .dropdown:hover > ul.dropdown-menu,
#click .dropdown-toggle:focus + ul.dropdown-menu{
    display:block;
}
    </style>
    <div class="container-fluid">
        <input type="hidden" value="@Model.CenterAddress" id="centerAddressTxt"/>
        <div class="row">

            <div class="right-side-container-ch">
                <div class="col-xs-12 no-padding">
                    <div class="top-header">
                        <div class="col-xs-12 no-padding">
                            <div class="top-header-title-transportation">
                                <h1>Create Route</h1>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-xs-12 no-padding">
                    <div class="dashboard-content col-xs-12 no-padding">

                        <div class="col-xs-12 text-center serch-assign-block" style="position: relative;">
                           
                               
                           <span style="color:#fff;font-size:20px;left:10px;">Center &nbsp;</span>
                            
                                <select name="" class="assign-select" id="center-select">

                                    <option value="0">ALL</option>
                                    @if (Model.CenterList.Count() > 0)
                                    {
                                        foreach (var item in Model.CenterList)
                                        {
                                            <option value=@item.Enc_CenterId>@item.CenterName</option>

                                        }
                                    }

                                </select>
                           
                          
                                <div class="assign-search-btn">
                                    <a href="javascript:void(0);" id="searchCenter">Search</a>
                                </div>
                           
                        </div>

                        <div class="col-xs-12">
                            <div class="route-analysis-map">
                                <div class="map_image">
                                    <div id="googleMap" style="width:100%; height:100%;"></div>
                                </div>

                              
                         
                            </div>
                        </div>
                        <div class="col-xs-12" id="addRouteSection" style="display:none;">
                            <div class="col-xs-12" style="border-radius: 10px;background: #f1f5f8;padding: 10px;width: 98%;margin:20px 1%;margin-top: 20px;margin-bottom: 20px;" id="addRouteDiv">
                                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;">
                                    <div class="col-lg-3 col-xs-5" style="padding-left: 0;">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p>Route Name</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-xs-7 no-padding">
                                        <div class="route-content-desc" style="position: relative;">

                                            <input type="text" class="form-control" id="routeNameTxt" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;">
                                    <div class="col-lg-3 col-xs-5" style="padding-left: 0;">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p>Bus Name</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-xs-7 no-padding">
                                        <div class="route-content-desc" style="position: relative;">

                                            <input type="text" class="form-control" id="busNameTxt" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;">
                                    <div class="col-lg-3 col-xs-5" style="padding-left: 0;">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p>Bus Driver</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-xs-7 no-padding">
                                        <div class="route-inner" style="position: relative;">
                                            <span class="route-field-style"><img src="/images/analysis-select.png"></span>
                                            <select class="form-control" id="busDriverSelect">
                                              
                              
                                            </select>
                                        </div>


                                    </div>
                                </div>
                                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;">
                                    <div class="col-lg-3 col-xs-5" style="padding-left: 0;">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p>Bus Monitor</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-xs-7 no-padding">
                                        <div class="route-inner" style="position: relative;">
                                            <span class="route-field-style"><img src="/images/analysis-select.png"></span>
                                            <select class="form-control" id="busMonitorSelect">
                                             
                               
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;">
                                    <div class="col-lg-3 col-xs-5" style="padding-left: 0;">
                                    </div>
                                    <div class="col-lg-9 col-xs-7 no-padding">
                                        <div class="radio radio-info">
                                            <input name="routeradio" checked="checked" id="pickupRadio" value="1" type="radio">
                                            <label for="routeradio">Pickup Route</label>
                                        </div>
                                        <div class="radio radio-info">
                                            <input name="routeradio" id="dropoffRadio" value="2" type="radio">
                                            <label for="routeradio">Drop-off Route</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;display:none;" id="pickUpDiv">
                                    <div class="col-lg-3 col-xs-5" style="padding-left: 0;">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p>Pickup Route</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-xs-7 no-padding">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p class="center-addr-route"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;display:none;" id="dropUpDiv">
                                    <div class="col-lg-3 col-xs-5" style="padding-left: 0;">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p>Drop Off Route</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-xs-7 no-padding">
                                        <div class="route-content-desc" style="position: relative;">
                                            <p class="center-addr-route"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12">
                                <div class="route-analysis-btn">
                                    <a href="javascript:void(0);" id="addRouteBtn" route-id="0" mode="0">Add Route</a>
                                </div>
                            </div>
                        </div>
                        <!----------Modal-popup----------->
                        <!-- Modal -->
                        <div class="modal fade" id="child_popup" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header icr_bgm_pop">
                                        <button type="button" class="close" data-dismiss="modal">×</button>
                                        <h4 class="modal-title">Child Information</h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="icr_table table-responsive">
                                            <table class="table table-bordered">
                                                <tbody>
                                                    <tr>
                                                        <td style="width:160px;">Parent Name</td>
                                                        <td class="parent-name">Kim watkins</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width:;">Child First Name</td>
                                                        <td class="child-first">Maisie</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width:px;">Child Last Name</td>
                                                        <td class="child-last">Williams</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width:200px;">Gender</td>
                                                        <td class="gender">Female</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width:200px;">DOB</td>
                                                        <td class="dob">06/12/2010</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width:200px;">Contact Number</td>
                                                        <td class="phone">(222) 695-6545</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width:200px;">Address</td>
                                                        <td class="address-child">100 S Grener Ave, Columbus, OH 43228, USA</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width:200px;">Disability</td>
                                                        <td class="disability">None</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                        <!----------Modal-popup----------->
                        <!----EDU-ACC---->
                        <div class="routesection">
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<div class="map-notify hidden">
    <div class="col-xs-12 no-padding" style="position: relative;">
        <div class="map-arrow-left"></div>
        <div class="col-xs-12 no-padding">
            <div class="map-notify-title assign_route">
                <h2>Adam Levine</h2>
            </div>
        </div>
        <div class="col-xs-12 no-padding">
            <div class="map-notify-cont">
                <p>Address</p>
            </div>
            <div class="map-notify-cont1">
                <p>100 S Grener Ave, Columbus, OH 43228, USA</p>
            </div>
        </div>

        <div class="col-xs-12 no-padding">
            <div class="pick_route icr_bttr" style="position: relative;">
                <span class="icr_field"><img src="/images/analysis-select.png"></span>
                <select>
                    <option>Pickup Route</option>
                    <option>Route 1</option>
                    <option>Route 2</option>
                    <option>Route 3</option>
                </select>
            </div>
        </div>
        <div class="col-xs-12 no-padding">
            <div class="map-notify-cont icr_bttr ">
                <button class="btn btn-success">Assign Route</button>
            </div>
            <div class="map-notify-cont1 icr_bttr ">
                <button class="btn btn-danger">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="appendRouteDiv hidden">
    <div class="col-xs-12 ecu_topsapc">
        <div class="icr_accr">
            <div class="accordionButton">
                <span id="routeName">Route Name 1</span><span class="plusMinus">+</span>
            </div>
            <div class="accordionContent" style="display: none; overflow: hidden;">
                <div class="btn_btn">
                    <button class="btn btn-success"><i class="fa fa-pencil" aria-hidden="true"></i>		Edit</button>
                </div>
                <div class="icr_table table-responsive">
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <td style="width:160px;">Route Name</td>
                                <td id="routNameTd">Route Name 1</td>
                            </tr>
                            <tr>
                                <td style="width:160px;">Bus Name</td>
                                <td id="BusName">Sun-senital</td>
                            </tr>
                            <tr>
                                <td style="width:160px;">Bus Driver</td>
                                <td id="busDriverName">John Fernadez</td>
                            </tr>
                            <tr>
                                <td style="width:200px;">Bus Monitor</td>
                                <td id="busMonitorName">Mrs. Frita Shelby</td>
                            </tr>
                            <tr>
                                <td style="width:200px;">Pickup Route</td>
                                <td id="RouteAddress">100 S Grener Ave, Columbus, OH 43228, USA</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="header_icc">
                <div class="col-lg-3 col-xs-3">Child Name</div>
                <div class="col-lg-2 col-xs-3">Intervals</div>
                <div class="col-lg-7 col-xs-6" id="routeType">Pickup Route</div>
            </div>
            <div class="lower-icr childDiv">
                <div class="col-xs-12 no-padding" style="margin-bottom: 10px;">
                    <div class="col-lg-3 col-xs-3" style="padding-left: 0;">
                        <div class="route-content-desc" style="position: relative;">
                            <p id="ChildrenName">Ian Bell</p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-xs-3" style="padding-left: 0;">
                        <div class="route-content-desc" style="position: relative;">
                            <p id="stopPos">Stop 1</p>
                        </div>
                    </div>
                    <div class="col-lg-5 col-xs-3" style="padding-left: 0;">
                        <div class="route-content-desc" style="position: relative;">
                            <p id="ChildAddress">100 S Grener Ave, Columbus, OH 43228, USA</p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-xs-3" style="padding-left: 0;">
                        <div class="route-content-desc" style="position: relative;">
                            <button style="float:right;" class="btn btn-danger"><i class="fa fa-minus-circle" aria-hidden="true"></i>	Remove</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <select class="route-name" style="display:none;">
        @foreach (string test in TempData["listPickUp1"] as List<string>)
        {
            <option value="@test">@test</option>
        }
        
    </select>
</div>

<!----EDU-ACC---->
<input type="hidden" id="inputHidden" value="@Model.TestString" />
<input type="hidden" id="pickupdetails" value="@TempData["pickupRouteNames"]" />
<input type="hidden" id="dropdetails" value="@TempData["dropRouteNames"]" />
<input type="hidden" id="routenames" value="@TempData["listPickUp1"]" />
   
<script src="~/Scripts/createroute.js"></script>
      <script src="http://maps.google.com/maps/api/js?key=@googleMapKey" type="text/javascript"></script>
      <script type="text/javascript">

          $(function () {
              var win = $(window).height()-50;
              $(".route-analysis-map,.map_image").css({
                  height: win
              });

          });
            $(document).ready(function () {
                var linkys = document.getElementsByClassName('dropdown-toggle');
                for (var i = 0; i < linkys.length; ++i) {
                    linkys[i].onclick = function (e) {
                        this.focus();
                        e.preventDefault();
                    };
                }
            });
</script>

    <!------accordion------->
<script>
		$(document).ready(function() {
    $('.accordionButton').click(function() {
        $('.accordionButton').removeClass('on');
        $('.accordionContent').slideUp('normal');
        $('.plusMinus').text('+');
        if($(this).next().is(':hidden') == true) {
            $(this).addClass('on');
            $(this).next().slideDown('normal');
            $(this).children('.plusMinus').text('-');
         }
     });
    $('.accordionButton').mouseover(function() {
        $(this).addClass('over');
    }).mouseout(function() {
        $(this).removeClass('over');
    });
    $('.accordionContent').hide();

});
</script>
    <!------accordion------->
<script type="text/javascript">
            function toggleIcon(e) {
                $(e.target)
                        .prev('.panel-heading')
                        .find(".more-less")
                        .find(".more-less1")
                        .toggleClass('glyphicon-plus glyphicon-minus');
            }
            $('.panel-group').on('hidden.bs.collapse', toggleIcon);
            $('.panel-group').on('shown.bs.collapse', toggleIcon);
</script>
    
    <script>
        

        $(document).ready(function () {
        
        });
        function resise() {

            var win = $(window).height();

            //    var win_width = $(window).width();

            var widleft = $(".left-side-container").width();
            var htcpy = $(".copyrights").height();
            var httphdr = $(".top-header").height();
            //    var totalwid = win_width - widleft;
            $(".left-side-container").css({
                height: win
            });
            $(".right-side-container").css({
                height: win - htcpy - 40
                //        width: totalwid
            });
            $(".dashboard-content-pad").css({
                height: win - httphdr - htcpy - 110

            });
        }
        function resisescroll() {

            var win = $(window).height();


            var htlogo = $(".logo-section-background").height();

            var fnht = win - htlogo;

            var htcpy = $(".copyrights").height();
            var tlht = fnht - htcpy;
            $(".dashboard-menu1").css({
                height: tlht - 42
            });

        }

 

        $(".nav-icon1").click(function () {

            if ($(".left-side-container").hasClass("left-menu")) {
                $(".left-side-container").removeClass("left-menu");
                $(".left-side-container").css({ "left": 0 });
            } else {
                $(".left-side-container").addClass("left-menu");
                $(".left-side-container").css({ "left": -282 });
            }

        });

        $(window).resize(function () {
            resise();
            resisescroll();
        });
        $(window).load(function () {
            resise();
            resisescroll();
        });




    </script>
   
}

