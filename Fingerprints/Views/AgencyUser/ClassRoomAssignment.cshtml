@model Dictionary<string, Int32>


@{

    Layout = "~/Views/Shared/AgencyStaffLayout.cshtml";
}

@section Title
{
    Classroom Assignment (Future Clients)
}

@section Style
{

    <style type="text/css">

        span#lbl-span::before {
    position: absolute;
    content: "";
    width: 10px;
    height: 10px;
    background-color: #333333;
    top: 1.5px;
    left: 0;
}

         span#lbl-span2::before {
    position: absolute;
    content: "";
    width: 10px;
    height: 10px;
    background-color: green;
    top: 1.5px;
    left: 125px;
}
         #lbl-span2
         {
                 margin-left: 21px;
         }
      
        

        .trow td, .trow td a {
            color: green;
        }

        .alert.info {
            background-color: #2196F3;
        }

        #classroomSelect {
            background: #1d5381;
            color: #f1f5f8;
        }

        select#classroomSelect option {
            color: #fff;
        }

        div#slotsCountDiv label {
            color: #164a7c;
            padding-top: 6px;
        }

            div#slotsCountDiv label span {
                float: right;
            }

        #slotsCountDiv .col-sm-12 {
            border: 1px solid #ccc;
        }

        .center-count-span span {
            color: #f9c751;
        }

        #page-wrapper {
            padding: 30px 15px 0;
        }

        .right-side-container-ch {
            width: 100%;
            float: left;
            background: url('../../Images/body-bg.jpg') center no-repeat;
            background-size: cover;
            min-height: 689px;
        }

        .right-side-container {
            width: 84%;
            float: left;
            background: url('../images/body-bg.jpg') center no-repeat;
        }

        .ersa-select {
            /* width: 220px; */
            width: 100%;
            /* font-size: 19px; */
            font-size: 14px;
            color: #fff;
            display: inline-block;
            padding: 5px;
            resize: none;
            background: transparent;
            height: 40px;
            margin-bottom: 15px;
            margin-right: 10px;
            border: 1px solid #fff !important;
            border-radius: 4px;
            position: relative;
            line-height: 40px;
        }

        .ersa-select-ch {
            border: 1px solid #164a7c !important;
            color: #154979;
            width: 243px;
        }

        .ersa-search-btn a {
            font-size: 18px;
            text-transform: capitalize;
            text-align: center;
            display: inline-block;
            background: #f9c751;
            color: #212121;
            margin: 0;
            border-radius: 4px;
            width: 100px;
            padding: 7px 9px;
            margin: auto;
            font-weight: bold;
            line-height: 20px;
        }

        .ersea-table thead tr {
            background: #9B58B4 !important;
            color: #fff;
            text-align: left;
        }

            .ersea-table thead tr th, .ersea-table-head p {
                font-size: 14px;
            }

            .ersea-table thead tr th {
                border-bottom: 0 !important;
                text-align: left;
                text-transform: none;
                font-size: 14px;
                font-weight: normal;
                line-height: 25px;
            }

        tbody.ersea-table-head tr td {
            background: #fff !important;
            border: solid 1px #e7e7e7;
        }

        .scroll-thead th {
            border: 1px solid #f1f5f8;
        }

        .scroll-thead {
            display: table;
            width: 100%;
            table-layout: fixed;
            width: 98.3%;
        }

        .scroll-tbody tr td {
            word-break: break-word;
        }

        .scroll-tbody {
            display: block;
            height: 250px;
            overflow: auto;
            overflow-x: hidden;
        }

            .scroll-tbody tr {
                display: table;
                width: 100%;
                table-layout: fixed;
                line-height: 30px;
                /*width:98.3%;*/
            }

        .lable-block {
            margin-bottom: 20px;
            width: auto;
            display: block;
            float: right;
            border: 1px solid #fff;
            padding: 10px;
        }

            .lable-block label {
                color: #fff;
                display: block;
                margin-bottom: 10px;
                width: 100% !important;
            }

        .lable-inline-block {
            margin-top: 30px;
            width: 100%;
            display: block;
            float: right;
            /* border: 1px solid #fff; */
            padding: 0 10px;
            /* text-align: right; */
        }

            .lable-inline-block label {
                color: #fff;
                display: inline-block;
                margin-right: 10px;
                width: auto !important;
            }

        .part_edubtn {
            width: 100%;
            float: left;
            text-align: center;
            margin-top: 30px;
            padding: 0 15px;
            margin-bottom: 20px;
        }

            .part_edubtn button.btn-edu-sucess {
                margin-right: 5px;
            }

        .btn-edu-sucess {
            background-color: #2ecc71;
            border-radius: 0 !important;
            color: #fff !important;
            padding: 7px 15px !important;
            outline: none !important;
        }

        .btn-edu-exit {
            background-color: #e74c3c;
            border-radius: 0 !important;
            color: #fff !important;
            padding: 7px 15px !important;
            outline: none !important;
        }

        .no-padding {
            padding: 0;
        }

        .ersa-select option {
            background: #164273;
        }
    </style>


}

@section Script
{
    <script type="text/javascript">




        $(function () {


            $('#txtclsStartDate').mask("99/99/9999", { placeholder: 'MM/DD/YYYY' });


            $('#ddlCenterDetails,#ageSelect').on('change', function () {

                $('#totalclientsCountSpan').html(0);

                $('#centerTable').children('.scroll-thead').css({ 'width': '100%' });

                $('#clientstBody').html('<tr style="width:100%">\
                                                <td colspan="9" style="padding: 25px;text-align:center;font-weight:bold; text-transform:none;">Search by Center and Age of Client<sup style="color:red;">*</sup></td>\
                                            </tr>');

                $('#divselectclients').hide().find('#lblSelectedClients').html(0);

                $('#divClassStartDate').hide().find('#txtclsStartDate').val('');


                $('#divselectClassroom').hide().find('#classroomSelect').val(0);
                $('#slotsCountDiv').hide();



            });


            $('#searchByfilter').on('click', function () {


                if ($('#ddlCenterDetails').val() == undefined || $('#ddlCenterDetails').val() == null || $('#ddlCenterDetails').val() == '' ||
                    $('#ddlCenterDetails').val() == '0') {
                    plainValidation('#ddlCenterDetails');
                    customAlert('Please select center');
                    return false;
                }






                $('#totalclientsCountSpan').html(0);

                $('#divselectclients').find('#lblSelectedClients').html(0);
                $('#divClassStartDate').find('#txtclsStartDate').val('');

                $('#classroomSelect').find('#classroomSelect').val('0');

                $('#divselectclients,#divClassStartDate,#divselectClassroom,#slotsCountDiv').hide();

                $('#btnConfirm').hide();
                $('#lblselectall').prop({ 'checked': false, 'disabled': true });


                $.ajax({
                    url: HostedDir + '/AgencyUser/GetAcceptedFutureClients',
                    type: 'post',
                    datatype: 'json',
                    data: { centerid: $('#ddlCenterDetails').val(), age: $('#ageSelect').val() },
                    beforeSend: function (data) {

                        $('#spinner').show();
                    },
                    success: function (data) {

                        var appendBody = '';
                        var classroomBody = '';

                        if (data != null) {
                            if (data.acceptedClients != null && data.acceptedClients.length > 0) {
                                var availablecheck = 0;

                                $('#totalclientsCountSpan').html(data.acceptedClients.length);




                                $.each(data.acceptedClients, function (i, acc) {

                                    if (acc.IsFutureApplication == '1') {
                                        appendBody += '<tr class="trow">';
                                    }
                                    else {
                                        appendBody += '<tr>';
                                    }

                                    appendBody += '<td data-title="Select All" style="text-align:center;">';

                                    if (acc.ClassroomConfirmed == false) {
                                        appendBody += ' <input type="Checkbox" eclientid=' + acc.ClientId + '>';
                                        availablecheck++;
                                    }
                                    appendBody += '</td>';

                                    appendBody += '<td data-title="Client">' + acc.Name + '</td>\
                                    <td data-title="Profile Picture" style="text-align:center;"><a href="javascript:void(0);" onclick="showImage(this);" eclientid='+ acc.ClientId + '>View</a></td>\
                                    <td data-title="Age">'+ acc.Gender + '</td>\
                                    <td data-title="Date of Birth">'+ acc.DOB + '</td>\
                                    <td data-title="Age">'+ acc.Age + '</td>\
                                    <td data-title="Classroom">' + acc.ClassroomName + '</td>\
                                    <td data-title="Selection Points">'+ acc.SelectionPoints + '</td>\
                                    <td data-title="Program Type">'+ acc.ProgramType + '</td>\
                                    <td data-title="Date on List">'+ acc.DateOnList + '</td>\
                                </tr>';

                                });

                                if (availablecheck > 0) {
                                    $('#divselectclients,#divClassStartDate,#divselectClassroom').show();
                                    $('#btnConfirm').show();
                                    $('#lblselectall').prop({ 'disabled': false });
                                }


                            }
                            else {
                                appendBody = '<tr style="width:98.3%">\
            <td colspan="9" style="text-align:center;font-weight:bold;text-transform:none;">Records not Found</td>\
        </tr>';
                            }

                            if (data.classRoomList != null && data.classRoomList.length > 0) {

                                classroomBody += '<option value="0">--Select Classroom--</option>';
                                $.each(data.classRoomList, function (j, classroom) {
                                    classroomBody += '<option value=' + classroom.Enc_ClassRoomId + '>' + classroom.ClassName + '</option>';
                                });
                            }

                            if (data.seatsCountDictionary != null) {

                                $('#totalCountAgency').html(data.seatsCountDictionary["TotalSeats"]);
                                $('#totalAgencyReturned').html(data.seatsCountDictionary["ClientsReturningAgency"]);
                                $('#totalCountCenter').html(data.seatsCountDictionary["AvailableSeats"]);
                                $('#totalAcceptCenter').html(data.seatsCountDictionary["ClientsReturningCenter"]);
                                $('#totalOpenCenter').html(data.seatsCountDictionary["OpenSeats"]);


                            }

                        }

                        $('#clientstBody').html(appendBody);

                        $('#clientstBody').find('tr').each(function () {

                            $(this).children('td:eq(0)').find('input:checkbox').unbind('click')
                        });

                        $('#clientstBody').find('tr').each(function () {
                            debugger;
                            $(this).children('td:eq(0)').find('input:checkbox').bind('click', updateCheckedClient);
                            //    updateCheckedClient();

                        });


                        $('#classroomSelect').html(classroomBody);

                        //$('#divClassStartDate').val('');
                        //$('#divselectclients,#divselectClassroom,#divClassStartDate').show();


                        //dynamic change of table body height//
                        var bodyHeight = 0;
                        $('.bind_body ').find('tr').each(function () {
                            bodyHeight += $(this).height();
                        });
                        var bindBodyHeight = $('.bind_body').height();
                        if (bodyHeight <= bindBodyHeight) {
                            $('.bind_body').css({
                                'height': bodyHeight

                            });

                            if ($('.bind_body').find('tr').length <= 3) {
                                $('#centerTable').find(".scroll-thead").css({ "width": "calc( 100% - 17px )" });

                            }
                            else {
                                $('#centerTable').find(".scroll-thead").css({ "width": "100%" });

                            }
                        }
                        else {
                            $('#centerTable').find(".scroll-thead").css({ "width": "calc( 100% - 17px )" });
                        }

                        //tbody height set to 50% of window height//
                        $('#centerTable').find('.scroll-tbody').height($(window).height() - (($(window).height() * 70) / 100));





                        var trheight = 0;
                        var bodyht = $('.bind_body').height();
                        $('.bind_body').find('tr').each(function () {

                            trheight += $(this).height();
                        });

                        //if row length>=5 the width will be set to 98.5%//
                        if (trheight <= bodyht && $('.bind_body').find('tr').length >= 4) {
                            $('.bind_body').css({ 'width': '100%' });
                        }
                            //if row length<4 the width will be set to 100%//
                        else if ($('.bind_body').find('tr').length < 4) {
                            $('.bind_body').css({ 'width': '98.5%' });
                        }

                    },
                    errror: function (data) {

                    },
                    complete: function (data) {
                        $('#spinner').hide();
                    }



                });



            });


            $('#lblselectall').on('click', function () {

                var chkAll = $(this);
                var chkLength = 0;
                if (chkAll.is(":checked")) {
                    $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox').prop('checked', true);

                    chkLength = $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox:checked').length;

                    $('#lblSelectedClients').html(chkLength);

                }
                else {
                    $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox').prop('checked', false);
                    $('#lblSelectedClients').html(chkLength);

                }


            });



            $('#classroomSelect').on('change', function () {


                debugger;



                if (isValidAllFields() == true) {

                    var clientIds = new Array();

                    $('#clientstBody').find('input:checkbox:checked').each(function () {

                        clientIds.push($(this).attr('eclientid'));
                    });


                    $.ajax({
                        //url: HostedDir + '/AgencyUser/GetSeatsCountByCenter',
                        url: HostedDir + '/AgencyUser/AssignClassroomFutureClients',
                        type: 'post',
                        datatype: 'json',
                        beforeSend: function () { $('#spinner').show() },
                        data: {
                            clientIds: clientIds.join(),
                            classroomId: $('#classroomSelect').val(),
                            centerId: $('#ddlCenterDetails').val(),
                            clsStartDate: $('#txtclsStartDate').val()
                        },
                        success: function (data) {




                            switch (data.result) {
                                case '1':

                                    var selectedText = $("#classroomSelect").find("option:selected").text();

                                    $('#clientstBody').find('input:checkbox:checked').each(function () {
                                        $(this).parent('td').parent('tr').children('td[data-title=Classroom]').html(selectedText);
                                    });

                                    $('#lblselectall').prop('checked', false);
                                    $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox').prop('checked', false);
                                    customAlert('Record updated successfully');

                                    break;

                                case '2':
                                    customAlert('Selected client(s) are greater than available seats.');
                                    break;

                                case '0':
                                    customAlert('Error occurred. Please, try again later.');
                                    break;
                            }


                            var $slotsDiv = $('#slotsCountDiv');
                            if (data != null && data.dictionraySeats != null) {

                                $('#totalCountAgency').html(data.dictionraySeats.TotalSeats);
                                $('#totalAgencyReturned').html(data.dictionraySeats.ClientsReturningAgency);

                                $slotsDiv.find('#spanAvailClsroom').html(data.dictionraySeats.AvailableSeats);

                                $slotsDiv.find('#spanRetClientClsroom').html(data.dictionraySeats.ClientsReturningCenter);

                                $slotsDiv.find('#spanOpenClsroom').html(data.dictionraySeats.OpenSeats);

                                $slotsDiv.show();
                            }
                            else {
                                $slotsDiv.find('#spanAvailClsroom').html(0);

                                $slotsDiv.find('#spanRetClientClsroom').html(0);

                                $slotsDiv.find('#spanOpenClsroom').html(0);

                                $slotsDiv.hide();




                            }
                        },
                        error: function (data) {

                        },
                        failure: function (data) {
                        },
                        complete: function (data) {
                            $('#spinner').hide();
                        }

                    });




                }

            });


            $('#btnExit').on('click', function () {

                //$('#clientstBody').find('tr').each(function () {
                //    $(this).find('td:eq(0)').find('input:checkbox').prop('checked', false);
                //});

                //$('#divselectclients').find('#lblSelectedClients').html(0);

                //$('#divClassStartDate').find('#txtclsStartDate').val('');

                //$('#divselectClassroom').find('#classroomSelect').val('0');

                //$('#slotsCountDiv').hide();

                $('#spinner').show();

                location.href = HostedDir + '/Roster/Roster';

            });
        });


        function isDate(txtDate) {
            var currVal = txtDate;
            if (currVal == '')
                return false;

            var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/; //Declare Regex
            var dtArray = currVal.match(rxDatePattern); // is format OK?

            if (dtArray == null)
                return false;

            //Checks for mm/dd/yyyy format.
            dtMonth = dtArray[1];
            dtDay = dtArray[3];
            dtYear = dtArray[5];

            if (dtMonth < 1 || dtMonth > 12)
                return false;
            else if (dtDay < 1 || dtDay > 31)
                return false;
            else if ((dtMonth == 4 || dtMonth == 6 || dtMonth == 9 || dtMonth == 11) && dtDay == 31)
                return false;
            else if (dtMonth == 2) {
                var isleap = (dtYear % 4 == 0 && (dtYear % 100 != 0 || dtYear % 400 == 0));
                if (dtDay > 29 || (dtDay == 29 && !isleap))
                    return false;
            }
            return true;
        }

        function updateCheckedClient() {
            var checkedCount = 0;

            $('#clientstBody').find('tr').each(function () {

                if ($(this).children('td:eq(0)').find('input:checkbox').is(':checked')) {
                    checkedCount++;
                }

            });
            $('#lblSelectedClients').html(checkedCount);

        }

        function showImage(ele) {
            $('#spinner').show();
            var enc_id = $(ele).attr('eclientid');
            $.ajax({
                url: HostedDir + '/ERSEA/GetChildrenImage',
                dataType: 'json',
                type: 'post',
                data: { enc_clientId: enc_id },
                success: function (data) {

                    var image = '';
                    if (data.Text == "" && data.Value == "2") {
                        image = '<img class="roundimage"  width="50" height="50"  src="/Content/img/ic_female.png" />';
                    }
                    else if (data.Text == "" && data.Value == "1") {
                        image = '<img class="roundimage" width="50" height="50"   src="/Content/img/ic_male.png" />';
                    }
                    else if (data.Text == "" && ata.Text == "3") {
                        image = '<img class="roundimage"  width="50" height="50"  src="/Content/img/ic_male_default.png" />';
                    }
                    else if (data.Text != "") {
                        image = '<img class="roundimage" width="50" height="50"   src="data:image/jpg;base64,' + data.Text + '"/></td>'
                    }
                    else {
                        image = '<img class="roundimage"  width="50" height="50"  src="/Content/img/download.jpg" />';
                    }

                    //$(ele).parent('td').find('.tooltiptext').html(image).css({ 'top': (topalignment - 30), 'height': '110px', 'width': '120px' });
                    //$(pic).parent('td').find('.roundimage').zoomify();

                    $(ele).parent('td').append(image);
                    $(ele).parent('td').find('.roundimage').zoomify();
                    $(ele).parent('td').parent('tr').height($(ele).parent('td').parent('tr').height());
                    $(ele).remove();
                    $('#spinner').hide();

                },
                error: function (data) {
                    $('#spinner').hide();
                }
            });
        }

        function assignClassroom(ele) {
            var cnTbody = $('#clientstBody');
            var clsroomId = $('#classroomSelect');

            if ($('#ddlCenterDetails').val() == undefined || $('#ddlCenterDetails').val() == null || $('#ddlCenterDetails').val() == '' ||
                $('#ddlCenterDetails').val() == '0') {
                plainValidation('#ddlCenterDetails');
                customAlert('Please select center');
                return false;
            }


            var chckLength = cnTbody.find('tr').find('td:eq(0)').find('input:checkbox:checked').length;

            if (chckLength == 0 && cnTbody.find('tr').find('td:eq(0)').find('input:checkbox').length > 0) {
                cnTbody.find('tr').find('td:eq(0)').find('input:checkbox')[0].focus();
                customAlert('Atleast one client should be selected');
                return false;
            }

            else if (clsroomId.val() == undefined || clsroomId.val() == null || clsroomId.val() == '' || clsroomId.val() == '0') {
                plainValidation('#classroomSelect');
                customAlert('Atleast one client should be selected');
                return false;
            }

            else {

                var clientIds = new Array();

                $('#clientstBody').find('input:checkbox:checked').each(function () {

                    clientIds.push($(this).attr('eclientid'));
                });

                $.ajax({
                    url: HostedDir + '/AgencyUser/AssignClassroomFutureClients',
                    type: 'post',
                    datatype: 'json',
                    data: { clientIds: clientIds.join(), classroomId: $('#classroomSelect').val(), centerId: $('#ddlCenterDetails').val() },
                    beforeSend: function () { $('#spinner').show() },
                    success: function (data) {

                    },
                    error: function (data) {
                        customAlert('Error occurred. Please, try again later.');
                    },
                    complete: function (data) {
                        $('#spinner').hide();
                    }


                });


            }




        }




        function isValidAllFields() {
            debugger;
            cleanValidation();


            try {



                if ($('#ddlCenterDetails').val() == '0') {
                    plainValidation('#ddlCenterDetails');
                    customAlert('please select center');
                    $('#slotsCountDiv').hide();
                    $('#classroomSelect').val(0);
                    return false;
                }


                var chckth = $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox:checked').length;

                if (chckth == 0 && $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox').length > 0) {
                    $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox')[0].focus();
                    customAlert('Atleast one client should be selected');
                    $('#classroomSelect').val(0);
                    return false;
                }

                if ($('#classroomSelect').val() == undefined || $('#classroomSelect').val() == null || $('#classroomSelect').val() == '0') {
                    plainValidation('#classroomSelect');
                    customAlert('please select classroom');
                    $('#slotsCountDiv').hide();
                    return false;
                }


                if ($('#txtclsStartDate').val() == null || $('#txtclsStartDate').val() == '') {
                    plainValidation('#txtclsStartDate');
                    customAlert('Please enter class start date');
                    $('#classroomSelect').val(0);
                    return false;
                }

                if (!isDate($('#txtclsStartDate').val().trim())) {
                    plainValidation('#txtclsStartDate');
                    customAlert('Please enter valid date');
                    $('#classroomSelect').val(0);
                    return false;

                }

                var d = new Date();
                d.setHours(0, 0, 0, 0);

                if (new Date($('#txtclsStartDate').val().trim()) < new Date(d)) {
                    plainValidation('#txtclsStartDate');
                    customAlert('Class start date should not be past date');
                    $('#classroomSelect').val(0);
                    return false;
                }


                return true;
            }
            catch (error) {
                console.log(error);
                return false;

            }
        }

        function confirmChanges(ele) {

            var chckth = $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox:checked').length;


            if ($('#ddlCenterDetails').val() == '0') {
                plainValidation('#ddlCenterDetails');
                customAlert('please select center');
                $('#slotsCountDiv').hide();
                $('#classroomSelect').val(0);
                return false;
            }

            else if (chckth == 0 && $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox').length > 0) {
                $('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox')[0].focus();
                customAlert('Atleast one client should be selected');
                $('#classroomSelect').val(0);
                return false;
            }

            else if ($('#clientstBody').find('tr').find('td:eq(0)').find('input:checkbox').length > 0 && chckth > 0) {

                debugger;
                var clientIds2 = new Array();

                $('#clientstBody').find('input:checkbox:checked').each(function () {

                    clientIds2.push($(this).attr('eclientid'));
                });

                $.ajax({

                    url: HostedDir + '/AgencyUser/AcceptClassroomAssignment',
                    type: 'post',
                    datatype: 'json',
                    beforeSend: function () { $('#spinner').show() },
                    data: {
                        clientIds: clientIds2.join(),
                        classroomId: $('#classroomSelect').val(),
                        centerId: $('#ddlCenterDetails').val(),
                        clsStartDate: $('#txtclsStartDate').val()
                    },
                    success: function (data) {
                        if (data != null) {

                            if (data == '1') {

                                customAlert('Record updated successfully');

                                $('#searchByfilter').trigger('click');
                            }

                            else if (data == '0') {
                                customAlert('Error occurred.Please, try again later');
                            }

                        }

                    },
                    error: function (data) {

                    },
                    complete: function (data) {
                        $('#spinner').hide();
                    }


                });


            }



        }


    </script>


}

@section MainContentHolder
{
    <div class="row Zoom">

        <div class="col-lg-12" style="padding:0;">
            <div class="page-wrapper-change">
                <div class="container-fluid">
                    <div class="row">

                        <div class="right-side-container-ch col-xs-12" style="padding-top: 30px;">

                            <div class="col-xs-12" style="padding:0px 15px;margin-bottom:0px;padding-left:0;">
                                <div class="col-xs-12">
                                    <h2 class="page-header page-header-change" style="border-bottom:5px solid #f9c751!important;color:#fff;">
                                        <i class="fa fa-group"></i> Classroom Assignment (Future Clients)

                                        <span class="view-btn backto_listspan">
                                            <a href="/Roster/Roster" style="padding:10px;float: right;color: #fff;margin-right:0px;background-color:#9b59b6;border-radius: 4px;text-decoration:none;" class="backto_list">Back to Roster</a>

                                        </span>
                                    </h2>
                                </div>

                                <div class="col-xs-12 text-left lable-block">
                                    <label style="color:#fff;">Total Slots (Agency)&nbsp;<span id="totalCountAgency" style="float:right;color:#f9c751;">@Model["TotalSlots"]</span></label>
                                    <label style="color:#fff;">Accepted Clients (Agency)&nbsp;<span id="totalAgencyReturned" style="float:right;color:#f9c751;">@Model["ClientsReturningAgency"]</span></label>
                                </div>


                                <div class="col-xs-12 no-padding">
                                    <div class="col-sm-3">
                                        <label style="color:#f9c751;">Center</label>
                                    </div>


                                    <div class="col-sm-3">
                                        <label style="color:#f9c751;">Filter by Age</label>
                                    </div>

                                </div>


                                <div class="col-xs-12 no-padding">
                                    <div class="col-lg-3 col-sm-6">


                                        @Html.DropDownList("ddlCenterDetails", Fingerprints.Utilities.Helper.GetCentersByUserId(Session["UserID"].ToString(), Session["AgencyId"].ToString(), Session["RoleID"].ToString()), new { @class = "ersa-select center-select width-select-change" })




                                    </div>
                                    @*<div class="col-lg-3 col-sm-6">
                                            <select class="ersa-select select-classroom width-select-change" id="classroomSelect"><option value="0">--Select Classroom--</option><option value="692">Room 1</option><option value="716">Room 2</option><option value="718">Room 3</option><option value="719">Room 4</option><option value="720">Room 5</option><option value="722">Room 6</option></select>
                                        </div>*@
                                    <div class="col-lg-3 col-sm-6">
                                        <select class="ersa-select select-filter width-select-change" id="ageSelect">
                                            <option value="0">--Filter by Age--</option>
                                            <option value="1">0 to 1</option>
                                            <option value="2">1 to 2</option>
                                            <option value="3">2 to 3</option>
                                            <option value="4">3 to 4</option>
                                            <option value="5">4 to 5</option>
                                            <option value="6">Above 5</option>
                                        </select>

                                    </div>
                                    <div class="col-lg-3 col-sm-6 ersa-search-btn">
                                        <a href="javascript:void(0);" id="searchByfilter" style="padding: 10px 9px;">Search</a>
                                    </div>
                                </div>
                                <div class="col-xs-12 text-left lable-inline-block center-count-span">
                                    <label style="color:#fff;">Alloted Seats to this Center : <span id="totalCountCenter">0</span></label>
                                    <label style="color:#fff;">Accepted Clients to this Center : <span id="totalAcceptCenter">0</span></label>
                                    <label style="color:#fff;margin-right:0px;">Open Seats in this Center : <span id="totalOpenCenter">0</span></label>
                                </div>
                            </div>


                            <div id="no-more-tables8" class="col-xs-12 no-padding" style="margin-bottom: 20px;">
                                <div class="col-xs-12" style="border-radius: 10px;background: #f1f5f8;padding: 10px;width: 98%;margin:20px 1%;">
                                    <div class="col-xs-12" style="margin-bottom:10px;">

                                        <div class="col-md-6 text-left" style="margin-top:10px;font-size:12px;">
                                            <label><span style="color:rgb(63, 81, 181);">Y-Years</span>&nbsp;&nbsp;<span style="color:rgb(0, 150, 136);">M-Months</span>&nbsp;&nbsp;<span style="color:rgb(121, 85, 72);">D-Days</span></label>
                                        </div>


                                        <div class="col-md-6 text-left" style="margin-top:10px;font-size:12px;">
                                            <label><span id="lbl-span">Accepted Clients</span>&nbsp;&nbsp;<span id="lbl-span2">Future Clients</span></label>
                                        </div>

                                        @*<div class="col-md-6 text-right">
                                                <input type="text" placeholder="Search by Name" id="searchText" style="color:#333;font-size:14px;margin-right:0;width: 220px!important;line-height:32px;padding:0px 10px;">
                                                <div class="ersa-search-btn" style="width:auto;display:inline-block;">
                                                    <a href="javascript:void(0);" id="searchByName" style="border-radius:0;font-size: 14px;background: #174777;color: #fff;">Search</a>
                                                </div>
                                            </div>*@
                                    </div>

                                    <div class="col-xs-12 text-left no-padding">
                                        <label style="color:#1d5381;">Total Count : <span id="totalclientsCountSpan">0</span></label>

                                    </div>

                                    <table class="col-md-12 table-striped table-condensed cf table-change ersea-table" id="centerTable">
                                        <thead class="table-hd scroll-thead">
                                            <tr>
                                                <th>
                                                    <input type="checkbox" disabled="disabled" id="lblselectall" name="lblselectall" />&nbsp;<span>Select All</span>
                                                </th>
                                                <th>Client</th>
                                                <th>Profile Picture</th>
                                                <th>Gender</th>
                                                <th>Date of Birth</th>
                                                <th>Age</th>
                                                <th>Classroom</th>
                                                <th>Selection Point(s) </th>
                                                <th>Program Type</th>
                                                <th style="text-transform:none;">Date on List</th>

                                            </tr>
                                        </thead>
                                        <tbody class="ersea-table-head bind_body scroll-tbody" id="clientstBody" style="height:300px;">

                                            <tr style="width:98.3%">
                                                <td colspan="9" style="padding: 25px;text-align:center;font-weight:bold; text-transform:none;">Search by Center and Age of Client<sup style="color:red;">*</sup></td>
                                            </tr>

                                        </tbody>
                                    </table>


                                    <div class="col-xs-12 text-left lable-inline-block no-padding">
                                        <div class="col-xs-12 text-left no-padding" id="divselectclients" style="display:none;">
                                            <div class="col-lg-2 col-md-3 col-sm-4 no-padding">
                                                <label style="color:#1d5381;margin-bottom:10px;">Selected Client(s)</label>
                                            </div>
                                            <div class="col-lg-10 col-md-9 col-sm-8">
                                                <label style="color:#1d5381;" id="lblSelectedClients">0</label>
                                            </div>
                                        </div>


                                        <div class="col-xs-12 no-padding" id="divClassStartDate" style="display:none;">
                                            <!--------Classroom Start Date Select------>
                                            <div class="col-lg-2 col-md-3 col-sm-4 no-padding">
                                                <label style="color:#1d5381;">Class Start Date <sup style="color:red;">*</sup></label>
                                            </div>
                                            <div class="col-lg-3 col-md-9 col-sm-8">
                                                <input type="text" id="txtclsStartDate" class="form-control" placeholder="MM/DD/YYYY" />
                                            </div>
                                        </div>

                                        <div class="col-xs-12 text-left no-padding adddivspace" id="divselectClassroom" style="display:none;">

                                            <!-----Classroom Select------>
                                            <div class="col-lg-2 col-md-3 col-sm-4 no-padding">
                                                <label style="color:#1d5381;">Select Classroom <sup style="color:red;">*</sup></label>
                                            </div>
                                            <div class="col-lg-3 col-md-9 col-sm-8">
                                                <select class="ersa-select ersa-select-ch select-classroom width-select-change" id="classroomSelect"></select>
                                            </div>

                                            <div class="col-lg-7 col-md-9 alert alert-info">
                                                <strong>Note! Client will be assigned to classroom, on selection of classroom from the list.</strong>
                                            </div>


                                        </div>




                                        <div class="col-sm-4 pull-right" id="slotsCountDiv" style="padding-right: 32px;display:none;">


                                            <div class="col-sm-12">
                                                <label style="width: 100%!important;"><strong>Alloted Seats to this Classroom</strong>&nbsp;<span id="spanAvailClsroom" style="color:#337ab7;">4</span></label>
                                            </div>

                                            <div class="col-sm-12">
                                                <label style="width: 100%!important;"><strong>Accepted Clients to this Classroom</strong>&nbsp;<span id="spanRetClientClsroom" style="color:#337ab7;">0</span></label>
                                            </div>

                                            <div class="col-sm-12">
                                                <label style="width: 100%!important;"><strong>Open Seats in this Classroom</strong>&nbsp;<span id="spanOpenClsroom" style="color:#337ab7;">4</span></label>
                                            </div>

                                        </div>

                                        <div class="col-xs-12 text-left">
                                            <div class="part_edubtn">
                                                <button onclick="return confirmChanges(this);" id="btnConfirm" class="btn btn-edu-sucess">Finalize Changes</button>
                                                <button id="btnExit" class="btn btn-edu-exit">Exit</button>

                                                <div class="col-lg-12 col-md-9 alert alert-info adddivspace" style="margin-top:20px;">
                                                    <strong>Note! Once click on Finalize Change, Classroom assignment will not be modified for selected client(s).</strong>
                                                </div>
                                            </div>
                                        </div>


                                    </div>


                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

}
