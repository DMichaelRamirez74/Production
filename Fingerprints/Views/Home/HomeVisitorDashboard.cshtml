
@{
    @section Title
{
        Dashboard
    }
    ViewBag.Title = "HomeVisitorDashboard";
    Layout = "~/Views/Shared/AgencyStaffLayout.cshtml";
}
@section Script{
    <script type="text/javascript">
        //var _centerid = null;
        //var _option = null;
        //var _programtype = 0;
        //var _Nurse = 0;
        //var WaitObject = null;
        //function loadclientlist(Object, Centerid, Option) {
        //    WaitObject = Object;
        //    _centerid = Centerid;
        //    _option = Option;
        //    $('#Acceptancediv').hide();
        //    $('#ddlProgramtype').val('');
        //    $('#ddlnurse').val('');
        //    if (Option == 1)
        //        $('#CenterName').text($(Object).closest("tr").find("td:first a").text() + '-' + 'Wait1');
        //    if (Option == 2)
        //        $('#CenterName').text($(Object).closest("tr").find("td:first a").text() + '-' + 'Wait2');
        //    if (Option == 3)
        //        $('#CenterName').text($(Object).closest("tr").find("td:first a").text() + '-' + 'Wait3');
        //    $.ajax({
        //        url: HostedDir + "/Home/GetclientWaitingList",
        //        type: "POST",
        //        data: {
        //            Centerid: Centerid,
        //            Option: Option,
        //            Programtype: 0
        //        },
        //        dataType: "json",
        //        secureuri: false,
        //        async: false,
        //        success: function (Data) {
        //            BindClientlist(Data);
        //        }
        //       , error: function (Data) {
        //           customAlert("Error occured please try again later.");
        //       }
        //    });
        //}
        //function BindClientlist(Data) {
        //    if (Data != null && Data.length > 0) {
        //        $('#div1').hide();
        //        var tbody = "";
        //        var option = "";
        //        $('#DivWaitingListPopup > tbody > tr').remove();
        //        for (var i = 0; i < Data.length; i++) {
        //            tbody = tbody + '<tr><td>' + Data[i].Name + '</td><td>' + Data[i].SelectionPoints + '</td><td>' + Data[i].DateOnList +
        //            ' </td><td>' + Data[i].ProgramType + '</td><td>' + Data[i].Gender + '</td><td>' + Data[i].DOB + '</td> <td> ' +
        //           '<a href="#" onclick="ShowHealthstaff(this);" ClientId="' + Data[i].ClientId + '" HouseHoldId="' + Data[i].HouseholdId + '" ProgramID="' + Data[i].Programid + '"  CenterID="' + Data[i].CenterId + '"  style="text-decoration:underline;">Acceptance Process</a> </td></tr>';
        //        }
        //        if (_programtype == 0) {
        //            if (Data[0].UserList.length > 0) {
        //                _programtype = 1;
        //                for (var i = 0; i < Data[0].UserList.length; i++) {
        //                    option = option + '<option value="' + Data[0].UserList[i].userId + '">' + Data[0].UserList[i].Name + '</option>';
        //                }
        //                $('#ddlnurse').find('option').remove().end().append(option);
        //                $('#ddlnurse').val('');
        //            }
        //            else {
        //                $('#ddlnurse').find('option').remove();
        //            }
        //        }
        //        option = "";
        //        if (_Nurse == 0) {
        //            if (Data[0].ProgramsList.length > 0) {
        //                _Nurse = 1;
        //                for (var i = 0; i < Data[0].ProgramsList.length; i++) {
        //                    option = option + '<option value="' + Data[0].ProgramsList[i].Id + '">' + Data[0].ProgramsList[i].Name + '</option>';
        //                }
        //                $('#ddlProgramtype').find('option').remove().end().append(option);
        //                $('#ddlProgramtype').val('');
        //            }
        //            else {
        //                $('#ddlProgramtype').find('option').remove();
        //            }
        //        }
        //        $('#DivWaitingListPopup > tbody').append(tbody);
        //        if (!$('#ModalWaitingList').hasClass('in'))
        //            $('#ModalWaitingList').modal('toggle');
        //    }
        //    else {
        //        $('#DivWaitingListPopup > tbody > tr').remove();
        //        $('#div1').show();
        //    }
        //}
        //var _Object = null;
        //function ShowHealthstaff(Aobject) {
        //    _Object = Aobject;
        //    $('#Acceptancediv').show();
        //    $('#Acceptancediv').focus();
        //    $('#ClientName').text($(Aobject).closest("tr").find("td:first").text());


        //}
        //function GetUserList() {
        //    $('#Acceptancediv').hide();
        //    if (_centerid != null && _option != null) {
        //        $.ajax({
        //            url: HostedDir + "/Home/GetclientWaitingList",
        //            type: "POST",
        //            data: {
        //                Centerid: _centerid,
        //                Option: _option,
        //                Programtype: $('#ddlProgramtype').val()
        //            },
        //            dataType: "json",
        //            secureuri: false,
        //            async: false,
        //            success: function (Data) {
        //                BindClientlist(Data);
        //            }
        //        , error: function (Data) {
        //            customAlert("Error occured please try again later.");
        //        }
        //        });

        //    }
        //}
        //function ClearUserList() {
        //    $('#Acceptancediv').hide();
        //    $('#ddlProgramtype').val('');
        //    if (_centerid != null && _option != null) {
        //        $.ajax({
        //            url: HostedDir + "/Home/GetclientWaitingList",
        //            type: "POST",
        //            data: {
        //                Centerid: _centerid,
        //                Option: _option,
        //                Programtype: 0
        //            },
        //            dataType: "json",
        //            secureuri: false,
        //            async: false,
        //            success: function (Data) {
        //                BindClientlist(Data);
        //            }
        //        , error: function (Data) {
        //            customAlert("Error occured please try again later.");
        //        }
        //        });

        //    }
        //}
        //function SaveWaiting() {
        //    cleanValidation();
        //    isValid = true;
        //    if ($('#ddlnurse').val() == "" || $('#ddlnurse').val() == null) {
        //        isValid = false;
        //        customAlert("Assign to is required. ");
        //        plainValidation('#ddlnurse');
        //        return isValid;
        //    }
        //    else {
        //        if (_Object != null && _centerid != null) {
        //            BootstrapDialog.confirm('Are you sure want to send this client for approval?', function (result) {
        //                if (result) {
        //                    $.ajax({
        //                        url: HostedDir + "/Agencyuser/SaveAcceptanceprocess",
        //                        type: "POST",
        //                        data: {
        //                            Clientid: $(_Object).attr("clientid"),
        //                            Usernurseid: $('#ddlnurse').val(),
        //                            householdid: $(_Object).attr("householdid"),
        //                            centerid: $(_Object).attr("CenterID"),
        //                            Programid: $(_Object).attr("programid")
        //                        },
        //                        dataType: "json",
        //                        secureuri: false,
        //                        async: false,
        //                        success: function (response) {
        //                            if (response == 1) {
        //                                customAlert("Record saved successfully.");
        //                                $('#Acceptancediv').hide();
        //                                $('#ddlnurse').val('');
        //                                $(_Object).closest('tr').remove();
        //                                if ($('#DivWaitingListPopup > tbody tr').length < 1) {
        //                                    $('#div1').show();
        //                                }
        //                                if ($(WaitObject).text() != "" && $(WaitObject).text() != "0") {
        //                                    $(WaitObject).text(parseInt($(WaitObject).text()) - 1);
        //                                    $(WaitObject).closest('tr').find('td a').eq(4).text(parseInt($(WaitObject).closest('tr').find('td a').eq(4).text()) + 1);
        //                                }
        //                                if ($(WaitObject).text() == "0") {
        //                                    $(WaitObject).attr("href", "#");
        //                                }
        //                            }
        //                        }
        //               , error: function (response) {
        //                   customAlert("Error occured please try again later. ");
        //               }
        //                    });
        //                }
        //            });
        //        }
        //    }
        //}
        //function CancelWaiting() {
        //    $('#Acceptancediv').hide();
        //}

    </script>


}
@section MainContentHolder{
    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">Center Overview</h2>

        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-main">
            <div class="table-responsive">
                <table class="table table_size" id="gridViewAgency">
                    <thead style="cursor:pointer;">
                        <tr>
                            <th>Center Name</th>
                            <th>%Full</th>
                            <th>Open Seats</th>
                            <th>FSW HV's</th>
                            <th>Wait1</th>
                            <th>Wait2</th>
                            <th>Wait3</th>
                            <th>Total Waiting</th>
                            <th title="100">Pending</th>
                            <th title="101">Accepted</th>
                            <th title="102">Returned</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (ViewBag.Centerlist != null)
                        {
                            foreach (FingerprintsModel.HrCenterInfo center in ViewBag.Centerlist)
                            {
                                <tr>
                                    <td><a style="text-decoration:underline;" href="#">@center.Name</a></td>
                                    <td style="text-align:right;">@center.Attendance</td>
                                    <td style="text-align:right;">@center.SeatsAvailable</td>
                                    <td style="text-align:right;">00</td>
                                    @if (center.option1 != "0")
                                    {
                                       
                                        <td style="text-align:right;"><a style="text-decoration:underline;" onclick="loadclientlist(this,'@center.CenterId',1);" href="#">@center.option1</a></td>
                                    }
                                    else
                                    {
                                        <td style="text-align:right;"><a href="#">@center.option1</a></td>
                                    }
                                    @if (center.option2 != "0")
                                    {
                                      
                                        <td style="text-align:right;"><a style="text-decoration:underline;" onclick="loadclientlist(this,'@center.CenterId',2);" href="#">@center.option2</a></td>
                                    }
                                    else
                                    {
                                        <td style="text-align:right;"><a href="#">@center.option2</a></td>
                                    }
                                    @if (center.option3 != "0")
                                    {
                                     
                                        <td style="text-align:right;"><a style="text-decoration:underline;" onclick="loadclientlist(this,'@center.CenterId',3);" href="#">@center.option3</a></td>
                                    }
                                    else
                                    {
                                        <td style="text-align:right;"><a href="#">@center.option3</a></td>
                                    }
                                    <td style="text-align:right;"><a href="#">0</a></td>
                                    @if (center.Routecode100 != "0")
                                    {
                                      
                                        <td style="text-align:right;"><a style="text-decoration:underline;" href="#">@center.Routecode100</a></td>
                                    }
                                    else
                                    {
                                        <td style="text-align:right;"><a href="#">@center.Routecode100</a></td>
                                    }
                                    @if (center.Routecode101 != "0")
                                    {
                                       
                                        <td style="text-align:right;"><a style="text-decoration:underline;" href="#">@center.Routecode101</a></td>
                                    }
                                    else
                                    {
                                        <td style="text-align:right;"><a href="#">@center.Routecode101</a></td>
                                    }
                                    @if (center.Routecode102 != "0")
                                    {

                                       
                                        <td style="text-align:right;"><a style="text-decoration:underline;" href="#">@center.Routecode102</a></td>
                                    }
                                    else
                                    {
                                        <td style="text-align:right;"><a href="#">@center.Routecode102</a></td>
                                    }
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row qualifierdiv">
        <div class="modal fade scroll-modal" id="ModalWaitingList" role="dialog">
            <div class="modal-dialog income-popup width-auto">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="CenterName" class="text-center">Clients Overview<span class="extra-title muted"></span></h3>
                        <div class="col-sm-5 col-xs-12 pull-right" style="padding-right:0;">
                            <div class="btnwrp_subcal" style="padding:0; margin:0;">
                                <button type="button" class="my-btn pull-right" data-dismiss="modal" tabindex="8">Exit</button>

                                <div class="clear"></div>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <div class="add-useragform">
                            <div class="row qualifierdiv">
                                <div class="row" style="margin-bottom:3%;">
                                    <div class="col-sm-9">
                                        <div class="col-sm-2">
                                            <label style="width:100%;">Program Type</label>
                                        </div>
                                        <div class="col-sm-3">
                                            <select id="ddlProgramtype" style="width:100%;" class="form-control"></select>
                                        </div>
                                        <div class="col-sm-2">
                                            <button type="button" onclick="GetUserList();" class="my-btn">Search</button>
                                        </div>
                                        <div class="col-sm-2">
                                            <button type="button" onclick="ClearUserList();" class="my-btn">Clear</button>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-main">
                                            <div class="table-responsive">
                                                <table class="table table_size" id="DivWaitingListPopup">
                                                    <thead style="cursor:pointer;">
                                                        <tr>
                                                            <th>Name</th>
                                                            <th>Selection Points</th>
                                                            <th>Date on List</th>
                                                            <th>Program Type</th>
                                                            <th>Gender</th>
                                                            <th>DOB</th>
                                                            <th>Acceptance</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                                <div id="div1" style="text-align:center;display:none; margin-left:38%;">
                                                    <label>No result found.</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12" id="Acceptancediv" style="display:none;">
                                        <div class="col-sm-12">
                                            <fieldset style="border: 1px solid #295b8f; ">
                                                <legend class="legend1"></legend>
                                                <div class="col-sm-9">
                                                    <div class="col-sm-2">
                                                        <label style="width:100%;">Client Name</label>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <label style="width:100%; font-size:15px;" id="ClientName"></label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-9">
                                                    <div class="col-sm-2">
                                                        <label style="width:100%;">Assign To <sup>*</sup></label>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <select id="ddlnurse" style="width:100%;" class="form-control"></select>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <button type="button" class="my-btn" onclick="return SaveWaiting();">Save</button>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <button type="button" class="my-btn" onclick="CancelWaiting();">Cancel</button>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

}
