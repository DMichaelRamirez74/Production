@model FingerprintsModel.Roster

@{
    @section Title
{
        Roster
    }
    if (Session["Roleid"] != null && (Session["Roleid"].ToString().Contains("a65bb7c2-e320-42a2-aed4-409a321c08a5") || Session["Roleid"].ToString().Contains("3b49b025-68eb-4059-8931-68a0577e5fa2")))
    {
        Layout = "~/Views/Shared/AgencyAdminLayout.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/AgencyStaffLayout.cshtml";
    }

    bool _isAccessLW = new FingerprintsData.agencyData().GetSingleAccessStatus(20);


}

@section Script{



    <script type="text/javascript">

        var totalRecords_caseNote = 0;
        var pageSize_caseNote = 0;
        var numOfPages_caseNote = 0;
        var requestedPage_caseNote = 0;
        var _sessionUserid='@(FingerprintsModel.StaffDetails.GetInstance().RoleId.ToString()+"_"+FingerprintsModel.StaffDetails.GetInstance().UserId.ToString())';
        var $cookieName='RosterABT_'+_sessionUserid;
        var _accessLW=@Html.Raw(Json.Encode(@_isAccessLW));
        var _closedDetailsJson=@Html.Raw(Json.Encode(Model.ClosedDetails));



        var caseNoteHeading = {
            'AddCaseNote': 'Add New Case Note',
            'EditCaseNote': 'Edit Case Note',
            'AppendCaseNote':'Append Case Note'
        }

        var UrlObj={
            getCaseNoteTags:'@Url.Action("GetCaseNoteTag", "Roster")',
            gAnalysis:"@Url.Action("GrowthAnalysis","Teacher")?clsid="
        };


        $(document).on('change', '#Classroom', function () {
            var _clsId = parseInt( $(this).val());
            if (_clsId) {
                $("#lwbtn").slideDown();
                $("#lwbtn").attr('onclick', 'location.href='+'"'+UrlObj.gAnalysis.concat(_clsId)+'"');
            } else {
                $("#lwbtn").slideUp();
                $("#lwbtn").removeAttr('onclick');
            }
        });
        $(document).on('click', '[data-toggle="tooltip"]',function(){



            $(this).tooltip('hide');


        });


        function clearHVSchedule(ele)
        {

            cleanValidation();
            var $clearHV = $(ele);

            var $hvSection = $clearHV.closest('#homeVisitDivAttenissue');

            $hvSection.find('input:text').val('');

            $hvSection.find('textarea').val('');

            $hvSection.find('select').val('');

        }



        function pregMomTransAlert(ele) {


            var cName = $(ele).parent('td').parent('tr').children('td:eq(0)').children('a').html();
            var cId = $(ele).attr('ecid');
            var programID = $(ele).attr('ProgramId');
            var yakkr = $(ele).attr('st');
            var message = '';
            if ($(ele).attr('isr') == '1') {
                message = '<p><strong>' + cName + '</strong> has been transitioned to new program year.</p><p>If you would like to change, Click OK to proceed.</p>';
            }

            else if ($(ele).attr('isr') == '0') {
                message = '<p><strong>' + cName + '</strong> has indicated as not planning on returning to our program.</p><p>If you would like to change, Click OK to proceed.</p>';

            }

            BootstrapDialog.show({
                title: 'Pregnant Mother Transition Confirmation',
                message: message,
                buttons: [{
                    label: 'OK',
                    cssClass: 'btn-primary',
                    action: function () {
                        $('#spinner').show();
                        location.href = "" + HostedDir + '/Roster/ChildEarlyHeadStartTransition/?Id=' + cId + '&ProgramId=' + programID + '&st=' + yakkr + "";
                    }
                }, {
                    label: 'Cancel',
                    cssClass: 'btn-primary',
                    action: function (dialogItself) {
                        dialogItself.close();
                    }
                }]
            });
        }







        function getScreeningByClient(ele) {

            var cId = $(ele).attr('ecid');
            var fup = $(ele).attr("follow-up");
            var pId = $(ele).attr('pId');

            $('#spinner').show();

            location.href = HostedDir + "/Nurse/ScreeningClient?clientid=" + cId + "&Programid=" + pId + "&bk=2";


        }

        function Getscreeningtemplate() {
            var screenValue = $('#ScreeningSelect').val();
            if (screenValue == '0') {
                customAlert('Please select screening name');
                return false;
            }

            var clientId = $('#screeningFollowupModal').find('#scrClientName').attr('ecid');
            var prID = $('#screeningFollowupModal').find('#scrClientName').attr('pId');

            $('#spinner').show();
            $("#screeningfollowDiv").load('@Url.Action("GetScreeningDetailsByID", "AgencyUser")', { clientId: clientId, programId: prID, screeningId: screenValue }, function () {

                $('#spinner').hide();
                $('#saveScreening').show();
            });
        }





        function loadScreening(ele) {
            var screenValue = $('#ScreeningSelect').val();


            if (screenValue == '0') {
                customAlert('Please select screening name');
                return false;
            }

            var clientId = $('#screeningFollowupModal').find('#scrClientName').attr('ecid');
            var prID = $('#screeningFollowupModal').find('#scrClientName').attr('pId');

            $('#spinner').show();
            $("#screeningfollowDiv").load('@Url.Action("GetScreeningDetailsByID", "AgencyUser")', { clientId: clientId, programId: prID, screeningId: screenValue }, function () {

                $('#spinner').hide();
                $('#saveScreening').show();
            });
        }


        function validDate(text) {
            var isValid = true;
            var comp = text.split('/');
            if (comp.length !== 3)
                return false;
            if (comp[2].length != 4)
                return false;
            if (comp[2] <= 1901)
                return false;
            if (new Date(text).toString() == "Invalid Date")
                return false;
            if (!isvalid_mdy(text))
                return false;
            var TodayDate = new Date();
            var endDate = new Date(text);

            return isValid;
        }
        function isvalid_mdy(s) {

            var day, A = s.match(/[1-9][\d]*/g);
            try {
                A[0] -= 1;
                day = new Date(+A[2], A[0], +A[1]);

                if (day.getMonth() == A[0] && day.getDate() == A[1]) return day;
            }
            catch (er) {
                return er.message;
            }

        }

        function Validatecasenote() {
            isValid = true;


            cleanValidation();
            var Clientcount = 0;
            var Tags = '';
            $('#CaseNotetags_tagsinput .tag span').each(function () {
                Tags = Tags + $(this).text().trim() + ',';
            });
            $("#CaseNotetags").val(Tags);
            Tags = '';



            if ($('#CaseNoteDate').val().trim() == "") {
                isValid = false;
                customAlert("Case note date is required. ");
                plainValidation('#CaseNoteDate');
                return isValid;
            }
            else if ($('#CaseNoteTitle').val().trim() == "") {
                isValid = false;
                customAlert("Title is required.");
                plainValidation('#CaseNoteTitle');
                return isValid;
            }
            else if (CKEDITOR.instances['Note'].getData() == "") {
                isValid = false;
                customAlert("Note is required.");
                return isValid;
            }



            else if ($('#CaseNotetags').val().trim() == "") {
                isValid = false;
                customAlert("Tags are  required.");
                plainValidation('#CaseNotetags');
                return isValid;
            }

            return isValid;

        }


        function isValidInfo() {
            cleanValidation();
            isValid = true;
            if ($("#AbsentType").val() == 0) {
                isValid = false;
                customAlert("Please choose an Attendance  Type")
            }
            if ($("#AbsentType").val() == 2) {
                if ($("#ReasonList").val() == 0 || $("#ReasonList").val() == "") {
                    isValid = false;
                    customAlert("Please choose an Absent Reason")
                }
                if ($("#ReasonList").val() == -1) {
                    if ($("#txtNewReason").val() == "") {

                        isValid = false;
                        customAlert("Please Enter Other Reason");
                    }

                }
            }

            return isValid;
        }

        function CheckdateForAppointment($modal,date) {
            var isAllow = false;
            var now = new Date();
            var selectedDate = new Date(date);


            if (selectedDate > now || selectedDate.toDateString() == now.toDateString()) {
                isAllow = true;
                $modal.find('#Days').val(selectedDate.getDay());
            } else {
                isAllow = false;
            }

            return isAllow;
        }

        function Checkdate(date) {


            var isAllow = false;
            var now = new Date();
            var selectedDate = new Date(date);
            if (selectedDate < now && selectedDate != now) {
                isAllow = true;
            } else {
                isAllow = false;
            }
            return isAllow;
        }






        var flag = 0;

        var EnrolledObject = null;
        var sortColumn = 'th1';
        var sortOrder = 'ASC';
        var imgID = '';
        var direction = '';
        var pageSize = 20;
        var requestedPage = 1;
        var pageLoadedFirst = true;
        var totalRecords = 0;
        var numOfPages = 0;
        var StartIndex = 0;
        var LastIndex = 0;
        var search = '';
        var listAgency = null;
        var roleid = '@Session["Roleid"].ToString()';
        var searchTextByName = '';
        var filterOption = '';
        $(window).load(function () {

        });







        function clearAllGrid() {
            var colspan = $('#divGridRoster').find('table.glossy-table').find('th').length;
            var bindRow = '<tr style="width:100%;height:auto;font-weight:bold;" role="row">\
                                            <td colspan='+ colspan + ' style="padding: 25px;text-align:center;">Search by Center and Classroom<sup style="color:red;">*</sup></td>\
                                        </tr>';

            $('#divGridRoster').find('table.glossy-table').find('tbody.glossy-table-body').html(bindRow);

            $('#roster-pagination-div').empty();
            $('#rosterCountLabel').html(0);
            $('#div1').hide();
        }


        function myAlertBottom() {
            $(".myAlert-bottom").show();
            setTimeout(function () {
                $(".myAlert-bottom").hide();
            }, 2000);
        }


        function getFormattedDate(date) {
            date = new Date(date);
            var year = date.getFullYear();

            var month = (1 + date.getMonth()).toString();
            month = month.length > 1 ? month : '0' + month;

            var day = date.getDate().toString();
            day = day.length > 1 ? day : '0' + day;

            return month + '/' + day + '/' + year;
        }


        function loadHouselessClient(ele) {

            $('#spinner').show();

            location.href= HostedDir+'/AgencyUser/FamilyHouseless?id='+$(ele).attr('data-house');

        }



        function Getcasenote($modal, Casenoteid,householdId, clientId, ele) {

            $modal=$('#att-issue-modal');
            var isEditable = $(ele).attr("data-editable")=='true';


            $modal.find('#div-append-casenote').hide();

            bindAttendanceIssueCaseNote($modal,2,Casenoteid,clientId,isEditable);

        }


        function getReferralService(ele) {
            $("#caseNoteDivAttIssue").hide();
            $('#homeVisitDivAttenissue').hide();
            $('#refmathcprovidersattenissuediv').hide();

            var _pageSize = 10;
            var _reqPage = 1;
            var _ref_EncClientId = $('#att-issue-modal').find('#hiddenatt-issue-clientid').val();

            $('#spinner').show();

            $('#refAttendanceIssueDiv').find('#referralserviceSectionDiv').load('@Url.Action("GetReferralServicePartial", "Roster")', { clientId: _ref_EncClientId, pageSize: _pageSize, requestedPage: _reqPage }, function (responseTxt, statusTxt, xhr) {


                if (statusTxt == 'success') {
                    $('#referralserviceSectionDiv').html(responseTxt);

                    $('#referralserviceSectionDiv').find('#btnRefFamilyNeeds').attr({ 'onclick': 'getReferralCategory(this,0)' });
                    $('#referralserviceSectionDiv').find('#btnRefSpecificAgency').attr({ 'onclick': 'getReferralCategoryCompany(this)' });

                    $('#referralserviceSectionDiv').find('#div_ref_service_list').find('.ReferralServiceName').each(function () {

                        if ($(this).attr('data-stepid') == '2')
                        {
                            $(this).attr('onclick', 'getReferralCategory(this,1);');
                        }
                        else if($(this).attr('data-stepid')=='3')
                        {
                            $(this).attr('onclick', 'getMatchProvidersFromService(this);')
                        }

                    });

                    $('#referralserviceSectionDiv').find('#hidden_ref_YakkrCode').val('601');

                    $('#referralserviceSectionDiv').find('#BackToList').hide();
                    $('#refcatagoryattenissuediv').hide();
                    $('#div_referral_categorycompany_partial').hide();
                    $('#refservriceAttendanceIssueDiv').show();
                    $('#referralserviceSectionDiv').show();
                }
                else {
                    customAlert('Error occurred. Please try again later.');
                }

                getTotalRecordReferral($('#att-issue-modal').find('.span-referral-count').val());
                $('#spinner').hide();

                $('#refAttendanceIssueDiv').show();
            });


        }

        function getReferralCategory(ele,mode) {


            var _reqPage = 1;
            var _ref_EncClientId = $('#att-issue-modal').find('#hiddenatt-issue-clientid').val();
            var _ref_clientName = $('#att-issue-modal').find('#lblatt-issue-client').html();
            var _ref_Yakkrid = $('#att-issue-modal').find('#hiddenatt-issue-yakkrid').val();
            var _referral_ClientId=0;
            $('#spinner').show();
            var ReferralCategory = {};

            if (mode == 0)
            {
                ReferralCategory = {
                    'id': _ref_EncClientId,
                    'clientName': '',
                    'ScreeningReferralYakkr': _ref_Yakkrid,
                    'ReferralClientId': 0,
                    'parentName': ''
                }
            }
            else {
                ReferralCategory = {
                    'id': _ref_EncClientId,
                    'clientName': '',
                    'ScreeningReferralYakkr': _ref_Yakkrid,
                    'ReferralClientId': parseInt($(ele).attr('referralclientid')),
                    'parentName': ''
                }

                _referral_ClientId=parseInt($(ele).attr('referralclientid'));
            }

            $('#refAttendanceIssueDiv').find('#refcatagoryattenissuediv').load('@Url.Action("ReferralCategoryPartial", "Roster")', { id: _ref_EncClientId, clientName: _ref_clientName, ScreeningReferralYakkr: _ref_Yakkrid, ReferralClientId: _referral_ClientId }, function (responseTxt, statusTxt, xhr) {


                if (statusTxt == 'success') {
                    $('#refcatagoryattenissuediv').html(responseTxt);


                    $('#refcatagoryattenissuediv').find('#Cancel').attr({ 'onclick': 'getReferralService(this)' });


                    $('#caseNoteDivAttIssue,#homeVisitDivAttenissue,#refservriceAttendanceIssueDiv,#refcatagorycompanyattenissuediv,#refmathcprovidersattenissuediv').hide();



                    $('#refcatagoryattenissuediv').show();
                }
                else {
                    customAlert('Error occurred. Please try again later.');
                }


                $('#spinner').hide();


            });
        }

        function getMatchProvidersFromService(ele) {



            var ReferralClientId = $(ele).attr('ReferralClientId');
            var AgencyValue = '@Session["AgencyID"].ToString()';
            var result = "0";
            var ParentName = $(ele).attr('parentName');
            var ClientName = $('#lblatt-issue-client').html();
            var ID = $('#hiddenatt-issue-clientid').val();

            var Step = $(ele).attr('data-stepid');



            var referanceYakkrid = $('#hiddenatt-issue-yakkrid').val().trim();


            var AgencyValue = $('#AgencyId_').val();
            $('#refAttendanceIssueDiv').find('#refmathcprovidersattenissuediv').load(HostedDir + "/Roster/GetMatchProvidersPartial", {
                AgencyId: AgencyValue
              , CommunityIds: result
              , parentName: ParentName
              , referralClientId: ReferralClientId
              , clientName: ClientName
              , id: ID
              , ScreeningReferralYakkr: referanceYakkrid
              , stepId:Step
            }, function (responseTxt, statusTxt, xhr) {


                if (statusTxt == 'success') {
                    $('#refmathcprovidersattenissuediv').html(responseTxt);

                    $('#referralserviceSectionDiv').hide();
                    $('#refcatagoryattenissuediv').hide();
                    $('#refmathcprovidersattenissuediv').show();
                    $('#refmathcprovidersattenissuediv').find('#Cancel').attr({ 'onclick': 'getReferralService(this)' });

                }
                else {
                    customAlert('Error occurred. Please try again later.');
                }


                $('#spinner').hide();


            });
        }





        function getReferralCategoryCompany(ele) {

            var _ref_EncClientId = $('#att-issue-modal').find('#hiddenatt-issue-clientid').val();
            var _ref_clientName = $('#att-issue-modal').find('#lblatt-issue-client').html();
            var _ref_YakkrId = $('#att-issue-modal').find('#hiddenatt-issue-yakkrid').val();

            $('#refcatagorycompanyattenissuediv').load('@Url.Action("GetReferralCategoryCompanyPartial","Roster")', { id: _ref_EncClientId, clientName: _ref_clientName }, function (responseTxt, statusTxt, xhr) {

                if (statusTxt == 'success') {
                    $('#caseNoteDivAttIssue,#homeVisitDivAttenissue,#refservriceAttendanceIssueDiv,#refcatagoryattenissuediv,#refmathcprovidersattenissuediv').hide();

                    $('#refcatagorycompanyattenissuediv').html(responseTxt);
                    $('#refcatagorycompanyattenissuediv').show();

                    $('#refcatagorycompanyattenissuediv').find('#Cancel').attr({ 'onclick': 'getReferralService(this);' })

                    $('#refcatagorycompanyattenissuediv').find('#referralYakkrId').val(_ref_YakkrId);

                }
                else {
                    customAlert('Error occurred. Please, try again later.');
                }


            });
        }







        function getAttendanceIssueCaseNote(ele) {




            $('#div-edit-modal-img-gallery').html('');

            $('#tbl_attendanceissue_casenotes').find('#table_body').load(HostedDir + '/Roster/GetAttendanceIssueCaseNoteList', {
                clientId: $('#hiddenatt-issue-clientid').val(),
                pageSize: pageSize_caseNote,
                requestedPage: requestedPage_caseNote
            }, function (responseTxt, statusTxt, xhr) {

                if (statusTxt == "success") {
                    $('#tbl_attendanceissue_casenotes').find('#table_body').html(responseTxt);


                    if (ele != null) {
                        $(ele).hide();
                        $('#btnHideAttendanceIssueCaseNote').toggle();
                    }


                    $('#att-issue-modal').find('#caseNoteDivAttIssue').find('#div_attendance_issue_cn').show();


                    $('#att-issue-modal').find('#caseNoteDivAttIssue').find('#div_attendance_issue_cn').find('#table_body>tr').find('td:eq(5)').find('.append-casenote').on('click', function () {


                        $('#att-issue-modal').find('#div-edit-caseNote').hide();

                        $('#div-att-issue-append-casenote').ApplinkCaseNote({
                            isPopup: false,
                            isSection: true,
                            caseNoteType: 3, //AppendCaseNote
                            isEditable: true,
                            isShowSubmitButton: false,
                            isShowExportIcon: false,
                            forceLoad:true,
                            caseNoteId: $(this).closest('tr').attr('casenoteid'),
                            householdId: $('#hiddenatt-issue-householdid').val(),
                            centerId: $('#hiddenatt-issue-centerid').val(),
                            modalOnShownEvent:function(element)
                            {


                                $('#modal-uploaddocument').attr('target-modal',$(element).attr('id'));

                                showCameraOption($(element));


                                $(element).find('#uploadImageCamera').hide();

                                setIntervalUserMedia($(element));
                                $(element).closest('#div-append-casenote').show();


                                $('#att-issue-modal').animate({
                                    scrollTop: $("#div-append-casenote").offset().top
                                }, 1000)

                            }
                        });




                    });

                    var $modalCn = $('#div_attendance_issue_cn');





                    $('#att-issue-modal').find('#att-issue-pagination-div').ApplinkPG({
                        'totalRecords': $modalCn.find('#totalCountSpan_casenote').length > 0 ? $modalCn.find('#totalCountSpan_casenote').html() : 0,
                        'sortOrder': 'DESC',
                        'sortColumn': 'th1',
                        'isEnableSorting': true,
                        'getRecordUrl': HostedDir + '/Roster/GetAttendanceIssueCaseNoteList',
                        'dataType': 'html',
                        'data': {
                            'clientId': $('#hiddenatt-issue-clientid').val(),
                            'pageSize': pageSize_caseNote,
                            'requestedPage': requestedPage_caseNote

                        },
                        'bindInitialLoad':false,
                        bindData: function (events, data) {

                            var tbody = $('#table_'+events.paginationIndex+'').find ('#tbody_'+events.paginationIndex+'');

                            var appendText = '';

                            if (events.options.dataType.toLowerCase() == 'json') {
                                if (data != null && data.CaseNoteList != null && data.CaseNoteList.length > 0) {

                                    $.each(data.CaseNoteList, function (i, caseNote) {

                                        appendText += '<tr casenoteid=' + caseNote.CaseNoteid + '>\
                                                            <td data-title="Date">\
                                                              <p>'+ caseNote.Date + '</p>\
                                                               </td>';

                                        appendText += '<td data-title="Title">';
                                        if (caseNote.IsAllowSecurityCN) {

                                            if (caseNote.IsEditable) {
                                                appendText += '<p data-editable="true" style="text-decoration: underline;cursor:pointer;" onclick="Getcasenote($(this).closest(".modal"), ' + caseNote.CaseNoteid + ',null,this)" data-toggle="tooltip" title=' + caseNote.Title + '>' + caseNote.Title + '</p>';

                                            }
                                            else {
                                                appendText += '<p data-editable="false" style="text-decoration: underline;cursor:pointer;" onclick="Getcasenote($(this).closest(".modal"), ' + caseNote.CaseNoteid + ',null,this)" data-toggle="tooltip" title=' + caseNote.Title + '>' + caseNote.Title + '</p>';

                                            }
                                        }

                                        else if (caseNote.WrittenBy.toLowerCase() == '@Session["UserID"].ToString().ToLowerInvariant()') {


                                            if (caseNote.IsEditable) {
                                                appendText += '<p data-editable="true" style="text-decoration: underline;cursor:pointer;" onclick="Getcasenote($(this).closest(".modal"), ' + caseNote.CaseNoteid + ',null,this)" data-toggle="tooltip" title=' + caseNote.Title + '>' + caseNote.Title + '</p>';

                                            }
                                            else {
                                                appendText += '<p data-editable="false" style="text-decoration: underline;cursor:pointer;" onclick="Getcasenote($(this).closest(".modal"),' + caseNote.CaseNoteid + ',null,this)" data-toggle="tooltip" title=' + caseNote.Title + '>' + caseNote.Title + '</p>';

                                            }


                                        }
                                        else {

                                            appendText += ' <p style="text-decoration: underline;cursor:pointer;" onclick="ShowSecurityAlert()">Secured case note</p>'
                                        }

                                        appendText += '</td>';

                                        appendText += '<td data-title="By">\
                                    <p data-toggle="tooltip" title='+ caseNote.BY + '>' + caseNote.BY + '</p>\
                                               </td>';

                                        appendText += '<td data-title="Attachments">\
                                     <p>'+ caseNote.Attachment + '</p>\
                             </td>\
                             <td data-title="References">\
                                     <p>'+ caseNote.References + '</p\
                             </td>';

                                        appendText += '<td data-title="Action">';


                                        if ((caseNote.IsAllowSecurityCN) || (caseNote.WrittenBy.toLowerCase() == '@Session["UserID"].ToString().ToLowerInvariant()' && caseNote.SecurityLevel)) {
                                            appendText += '<p style="padding: 5px;">\
                                                <i class="fa fa-paperclip add-new" aria-hidden="true" data-toggle="tooltip" style="cursor:pointer; font-size :18px;background :#237646;color :#fff;padding :7px 12px;border-radius: 7px;margin-right :8px;" title="Append case notes"></i>\
                                                &nbsp;\
                                                <i class="fa fa-print export-new" aria-hidden="true" data-toggle="tooltip" style="cursor:pointer; font-size :18px;background :#2e628d;color :#fff;padding :7px 12px;border-radius: 7px;margin-right :8px;" title="Export to pdf"></i>\
                                            </p>';
                                        }

                                        if ('@FingerprintsModel.Role.RolesDictionary[(int)FingerprintsModel.Enums.RoleEnum.AgencyAdmin].ToLowerInvariant()' == '@Session["RoleId"].ToString().ToLowerInvariant()'
        || '@FingerprintsModel.Role.RolesDictionary[(int)FingerprintsModel.Enums.RoleEnum.GenesisEarthAdministrator].ToLowerInvariant()' == '@Session["RoleId"].ToString()') {

                                            appendText += ' <button type="button" class="btn delete-casenote" style="border-radius: 0px;color: #fff;margin-left: 8px;background: #e43838;" data-id=' + caseNote.CaseNoteid + '>Delete</button>';

                                        }


                                    });






                                }

                            }

                            else if (events.options.dataType.toLowerCase() == 'html') {
                                appendText = data;
                            }

                            $.each($('#table_' + events.paginationIndex + '').find('thead tr th span[col-name]'), function (i, span) {

                                if($(span).attr('col-name').toLowerCase()==events.options.sortColumn.toLowerCase())
                                {
                                    if(events.options.sortOrder.toLowerCase()=="asc")
                                    {
                                        $(span).closest('th').find('.i-asc').show();
                                        $(span).closest('th').find('.i-desc').hide();

                                    }

                                    if (events.options.sortOrder.toLowerCase() == "desc") {
                                        $(span).closest('th').find('.i-asc').hide();
                                        $(span).closest('th').find('.i-desc').show();

                                    }
                                }
                                else
                                {
                                    $(span).closest('th').find('.i-asc,.i-desc').hide();

                                }

                            });


                            tbody.html(appendText);

                            if (events.options.bindInitialLoad && events.options.dataType == "json") {
                                $('#totalCountSpan_casenote').html(data.TotalRecord);
                                events.options.totalRecords = parseInt(data.TotalRecord);
                            }
                            else if (events.options.bindInitialLoad && events.options.dataType == "html") {
                                events.options.totalRecords = parseInt($('#totalCountSpan_casenote').html());
                            }


                        }
                    });


                }
                else {
                    customAlert('Error occurred. Please, try again later.');
                }
            });


        }






        function resetAppendCaseNote(ele) {
            var $divappendCaseNoteSection=$(ele).closest('#div-append-casenote').find('#divAppendCaseNoteSection');
            var $guidAppend=$divappendCaseNoteSection.attr('data-section-id');
            $divappendCaseNoteSection.find('#txtAppendCaseNoteDate_'+$guidAppend+'').val(getFormattedDateNumber(new Date()));
            CKEDITOR.instances['subnotes_caseNote_'+$guidAppend+''].setData("");
            $('#appendCaseNotetags_'+$guidAppend+'_tagsinput .tag ').each(function () {
                $(this).remove();
            });

            $divappendCaseNoteSection.find('.div_append_image_gallery_'+$guidAppend+'').html('');
            $divappendCaseNoteSection.find('#addAttachmentDiv_AppendNote_'+$guidAppend+'').html('');
            $divappendCaseNoteSection.find('#appendCaseNote_attachmentsDiv_'+$guidAppend+'').find('input:file').val('');
            $divappendCaseNoteSection.find('#appendCaseNote_attachmentsDiv_'+$guidAppend+'').find('input:file').removeAttr('conv-img');

        }





        function resetExcessiveAbsences($modal,ele)
        {


            var _clientId = $modal.find('#hiddenatt-issue-clientid').val();
            var _yakkrId = $modal.find('#hiddenatt-issue-yakkrid').val();

            $.ajax({

                url: HostedDir + '/Roster/ResetExcessiveAbsence',
                type: 'post',
                datatype: 'json',
                data: { _encClientId: _clientId, _encYakkrId: _yakkrId },
                success: function (data) {


                    if(data==true)
                    {
                        customAlert('Record saved successfully');

                        window.setTimeout(function () {

                            window.location.reload(true);

                        },1000);
                    }

                    else if(data==false)
                    {
                        customAlert('Error occurred. Please, try again later.');
                    }
                    else if(data.Data!='undefined' && data.Data=='Login')
                    {
                        customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                    }


                },
                error:function(data)
                {

                },
                complete:function(data)
                {

                }



            });

        }







        $(document).ready(function () {






            $('.modal').on("hidden.bs.modal", function (e) { //fire on closing modal box
                if ($('.modal:visible').length) { // check whether parent modal is opend after child modal close
                    $('body').addClass('modal-open'); // if open mean length is 1 then add a bootstrap css class to body of the page
                }
            });



            $('#btn_append_casenote_clear').on('click', function (e) {

                e.preventDefault();

                resetAppendCaseNote(this);

            });

            $('#att-issue-modal').find('#btn_append_casenote_back').on('click', function () {


                $('#att-issue-modal').find('#div-append-casenote').hide();
                $('#att-issue-modal').find('#div-edit-caseNote').show();

            });






            $('#modalAppendCaseNote').on('hidden.bs.modal', function () {

                $('#att-issue-modal').modal('show');
            });


            $('#att-caseNoteli').on('click', function () {

                $('#homeVisitDivAttenissue').hide();
                $('#div-append-casenote').hide();
                $('#refAttendanceIssueDiv').hide();
                $("#caseNoteDivAttIssue").show();


                var $att_issue_modal = $('#att-issue-modal');

                if ($att_issue_modal.find('#btnHideAttendanceIssueCaseNote').is(':visible')) {
                    $att_issue_modal.find('#btnHideAttendanceIssueCaseNote').trigger('click');

                }

                bindAttendanceIssueCaseNote($att_issue_modal,1,0,$('#hiddenatt-issue-clientid').val(),true);




            });

            $('#att-homeVisitli').on('click', function () {

                $("#caseNoteDivAttIssue").hide();
                $('#refAttendanceIssueDiv').hide();

                clearcontrols($('#homeVisitDivAttenissue'));
                $('#homeVisitDivAttenissue').show();

            });

            $('#att-refli').on('click', function () {

                getReferralService(this);
            });






            $('#att-issue-modal').find('#btn-new-req-family-attissue').on('click', function () {


                $('#att-issue-modal').find('#refservriceAttendanceIssueDiv').hide();
                $('#att-issue-modal').find('#refcatagoryattenissuediv').show();
            });

            $('#bn_att_issue_casenote_clear').on('click', function () {

                bindAttendanceIssueCaseNote($('#att-issue-modal'),1,0,$('#hiddenatt-issue-clientid').val(),1);
            });


            $('#btnShowAttendanceIssueCaseNote').on('click', function () {




                pageSize_caseNote = 10;
                requestedPage_caseNote = 1;
                getAttendanceIssueCaseNote(this);


            });

            $('#btnHideAttendanceIssueCaseNote').on('click', function () {

                $('#div_attendance_issue_cn').hide();
                $('#div_attendance_issue_cn').find('#table_body').html('');
                $('#btnHideAttendanceIssueCaseNote').toggle();

                $('#btnShowAttendanceIssueCaseNote').toggle();
            });


            $('#btn_att_issue_casenote_save').on('click', function () {

                var result=  $('#att-issue-modal').find('#caseNotSection').ApplinkCaseNote('caseNoteValidation');


                if (result) {

                    var casenotes = {};
                    var clientArray = [];
                    var staffArray = [];
                    var cameraDocumentsArray = [];
                    var $caseNoteSection =   $('#att-issue-modal').find('#divCaseNoteSection');
                    var $guid = $caseNoteSection.attr('data-current-id');




                    $caseNoteSection.find('#divCaseNoteClients_' + $guid + '').find('input:checkbox:checked').each(function () {
                        clientArray.push($(this).val());
                    });

                    $caseNoteSection.find('#divCaseNoteStaffs_' + $guid + '').find('input:checkbox:checked').each(function () {
                        staffArray.push($(this).val());
                    });


                    $caseNoteSection.find('#caseNoteAttachmentsDiv_' + $guid + '').find('input:file').each(function (a, b) {
                        var fileInput = $(this);
                        if (fileInput.val() != undefined && fileInput.val() != null && fileInput.val() != '') {
                            var fileUpload = fileInput.get(0);
                            var files = fileUpload.files;
                            for (var i = 0; i < files.length; i++) {
                                var convImage = fileInput.attr('conv-img');
                                if (convImage != null && convImage != "")
                                    cameraDocumentsArray.push({ AttachmentFileName: files[i].name, AttachmentFileExtension: '.' + files[i].name.split('.')[files[i].name.split('.').length - 1], AttachmentJson: convImage });
                            }
                        }
                    });

                    var $cameraDocuments = $caseNoteSection.find(".div-edit-gallery_" + $guid + "").find('.setup_viewscreen');

                    if ($cameraDocuments.length > 0) {

                        $.each($cameraDocuments, function (j, doc) {

                            var $doc = $(doc).find('img');
                            cameraDocumentsArray.push({ AttachmentFileName: 'CaseNoteDocument', AttachmentFileExtension: '.png', AttachmentJson: getBase64Image($doc) });

                        });
                    }


                    casenotes.CaseNoteDate = $caseNoteSection.find('#txtCaseNoteDate_' + $guid + '').val().trim();
                    casenotes.CaseNoteTitle = $caseNoteSection.find('#txtCaseNoteTitle_' + $guid + '').val().trim();
                    casenotes.Note = $caseNoteSection.find('#txtareaCaseNote_' + $guid + '').val().trim();
                    casenotes.CaseNotetags = $caseNoteSection.find('#txtCaseNoteTags_' + $guid + '').val().trim(',');
                    casenotes.ClientIds = clientArray.join(',');
                    casenotes.StaffIds = staffArray.join(',');
                    casenotes.CaseNoteSecurity = $caseNoteSection.find('#checkboxSecureNote_' + $guid + '').is(':checked');
                    casenotes.CaseNoteAttachmentList = cameraDocumentsArray;
                    casenotes.CenterId=$('#hiddenatt-issue-centerid').val();
                    casenotes.Classroomid= $('#hiddenatt-issue-classroomid').val();
                    casenotes.ClientId= $('#hiddenatt-issue-clientid').val();
                    casenotes.HouseHoldId=$('#hiddenatt-issue-householdid').val();
                    casenotes.ProgramId= $('#hiddenatt-issue-programid').val();
                    casenotes.CaseNoteId =  $caseNoteSection.find('#hdn-casenoteid_'+$guid+'').val();

                    $.ajax({
                        type: "POST",
                        url: "/Roster/SaveCaseNote",
                        dataType: "json",
                        contentType: 'application/json; charset=utf-8',
                        beforeSend:function(){
                            $('#spinner').show();

                        },
                        data: JSON.stringify(casenotes),

                        success: function (data) {
                            if(data=='1')
                            {
                                customAlert('Record saved successfully');

                                bindAttendanceIssueCaseNote($('#att-issue-modal'),1,0,$('#hiddenatt-issue-clientid').val(),1);



                                if ($('#div_attendance_issue_cn').is(':visible')) {
                                    getAttendanceIssueCaseNote(null);
                                }
                            }
                            else {
                                customAlert('Error occurred. Please, try again later.');
                            }


                        },
                        error: function (data) {
                        },
                        complete:function(data)
                        {
                            $('#spinner').hide();
                        }
                    });
                }

            });


            $('#btnResetabsence').on('click', function () {



                BootstrapDialog.show({
                    title: 'Confirmation',
                    message: '<p>You are about to reset the Excessive Absences calculation of <strong>'+$('#lblatt-issue-client').html()+'</strong></p><p>Click <strong>OK</strong> to proceed.' ,
                    buttons: [{
                        label: 'Cancel',
                        cssClass: 'btn-primary',
                        action: function (dialogItself) {
                            dialogItself.close();

                            window.setTimeout(function () {
                                if ($('.modal:visible').length) { // check whether parent modal is opend after child modal close
                                    $('body').addClass('modal-open'); // if open mean length is 1 then add a bootstrap css class to body of the page
                                }

                            }, 500)

                        }
                    }, {
                        label: 'OK',
                        cssClass: 'btn-primary',
                        action: function (dialogItself) {

                            resetExcessiveAbsences($('#att-issue-modal'), $('#btnResetabsence'));
                        }
                    }]
                });




            });


            $(document).ajaxStart(function () {
                $('#spinner').show();
            });

            $(document).ajaxStop(function () {
                $('#spinner').hide();
            });


            // tooltip for attendance issue//

            $('[data-toggle="tooltip"]').tooltip({

                trigger: 'hover'

            });



            CKEDITOR.replace('Note', {
                language: 'en-gb',
                uiColor: '#295b8f',
                disableNativeSpellChecker: false
            });





            var $attendanceIssueModal = $('#att-issue-modal');


            $attendanceIssueModal.find('#btnLoadCaseNote').on('click', function () {

                if (!$attendanceIssueModal.find('#caseNoteDivAttIssue').is(':visible')) {
                    $attendanceIssueModal.find('#caseNoteDivAttIssue').show('slow');
                }

            });


            $('#caseNoteDetails_CaseNoteDate').mask("99/99/9999", { placeholder: 'MM/DD/YYYY' });

            $('#txtcasenotedate_attissue,#txtAppendCaseNoteDate').mask("99/99/9999", { placholder: 'MM/DD/YYYY' });


            if ('@Session["_RosterCenter"]' != '' || '@Session["_RosterSearchText"]' != '') {


                requestedPage = '@Session["_RosterRequestedPage"]' != '' ? parseInt('@Session["_RosterRequestedPage"]') > 0 ? parseInt('@Session["_RosterRequestedPage"]') : 1 : 1;
                searchTextByName = '@Session["_RosterSearchText"]' != '' ? '@Session["_RosterSearchText"]' : '';
                filterOption = '@Session["_RosterFilter"]' != '' ? parseInt('@Session["_RosterFilter"]') : 0;


                $('#Centers').val('@Session["_RosterCenter"]');

                pageSize = '@Session["_RosterPageSize"]' != '' ? parseInt('@Session["_RosterPageSize"]') : 0;
                $('#ddlpagetodisplay').val(pageSize);

                sortColumn = '@Session["_RosterSortOrder"]';
                sortOrder = '@Session["_RosterSortDirection"]';

                if ($('#searchByNameDiv').length > 0) {
                    $('#searchTextName').val(searchTextByName);

                    drawgrid();
                }
                else {
                    $('#filterSelect').val(filterOption);
                    GetClassrooms('#Centers', true);
                }




            }


            $('#CaseNotetags').tagsInput({
                width: 'auto',
                height: 'auto',
                delimiter: [',', ';'],
                autocomplete: {
                    'appendTo': "#MyModalLateArrival"
                },
                autocomplete_url: '/Roster/GetCaseNoteTag',
            });




            if ($('#isManager').val() === 'True') {
                $('#searchByNameDiv').show();

                $('#searchbyNamebtn').on('click', function () {

                    cleanValidation();

                    if ($('#searchTextName').val() == '') {
                        customAlert('Please Enter Name');
                        plainValidation('#searchTextName');
                        return false;
                    }

                    searchTextByName = $('#searchTextName').val().trim();

                    drawgrid();

                });
            }
            else {
                $('#searchByNameDiv').hide();

            }

            clearAllGrid();


            $('#Centers').on('change', function () {



                if ($(this).val() == '0') {
                    $('#Classroom').find('option').remove();

                    $('#div1').hide();
                    $('#filterSelect').val('0');

                    clearAllGrid();

                    return false;
                }

                GetClassrooms(this, false);
            });

            $("#MyModalLateArrival").on("hidden.bs.modal", function () {
                $('#divAbsenceReasonList').hide();

                $('#CaseNotetags_tagsinput .tag ').each(function () {
                    $(this).remove();
                });
                $('#MyModalLateArrival .txt-clear').val("");
                $('#EndTime').val("-1");
                $('#divAbsenceNoShow').hide();

            });



            $('.abtCheckbox').change(function () {

                $('#MyModalLateArrival .txt-clear').val("");
                $('#divAbsenceReasonList').hide();
                $('#divAbsenceNoShow').hide();
                if ($(this).prop('checked') == true) {
                    $('#divForAbsence').hide();
                    $('#divForLateArrival').show();
                    $('#CaseNotetags_tagsinput .tag ').each(function () {
                        $(this).remove();
                    });
                    $('#MyModalLateArrival .txt-clear').val("");
                }
                else {
                    $('#CaseNotetags_tagsinput .tag ').each(function () {
                        $(this).remove();
                    });
                    $('#MyModalLateArrival .txt-clear').val("");
                    $('#divForLateArrival').hide();
                    $('#divForAbsence').show();
                }
            });



            $('#btnsearch').on('click', function (e) {


                e.preventDefault();
                cleanValidation();

                if ($('#Centers').val() == '0' || $('#Centers').val() == null || $('#Centers').val() == '') {
                    plainValidation('#Centers');
                    customAlert('Please Select Center');
                    return false;
                }

                searchTextByName = '';


                drawgrid();
            });

            $('#ReasonList').on('change', function () {
                if ($(this).val() == "-1") {
                    $('#divNewReason').show();
                }
                else {
                    $('#txtNewReason').val("");
                    $('#divNewReason').hide();
                }
            });


            $("#AbsentType").change(function () {
                if ($(this).val() == 2) {
                    $('#divAbsenceNoShow').hide();

                    $('#divAbsenceReasonList').show();
                }

                else if ($(this).val() == 3) {
                    $('#divAbsenceNoShow').show();
                    $("#ReasonList").val("0");
                    $('#divAbsenceReasonList').hide();
                }
                else {
                    $('#divAbsenceNoShow').hide();
                    $("#ReasonList").val("0");
                    $('#divNewReason').hide();
                    $('#txtNewReason').val("");
                    $('#divAbsenceReasonList').hide();
                }

            });

            $(document).on("click", ".open-myModal", function () {
                var childnameID = $(this).data('id');
                var l = childnameID.length;
                var n = childnameID.indexOf("-");
                var CID = childnameID.substring(0, n);
                var CN = childnameID.substring(n + 1, l);

                $(".modal-header #childname").val(CN);
                $(".modal-header #childid").val(CID);
                $(".modal-header #childlbl").text(CN);

            });
            $('#seatsDatetimePicker1').datetimepicker({
                timepicker: false,
                format: 'm/d/Y',
                validateOnBlur: false,
                mask: true,
                minDate: new Date(new Date().setFullYear(new Date().getFullYear() - 1)),
                maxDate: new Date(),
            });


            $('#seatsDatetimePicker2').datetimepicker({
                timepicker: false,
                format: 'm/d/Y',
                validateOnBlur: false,
                minDate: new Date(),
                mask: true,
                validateOnBlur:true

            });

            $('input').keypress(function () {
                if ($(this).val() == 'MM/DD/YYYY') {
                    $(this).val('');

                }
            });


            if ('@ViewBag.message' != '')
                customAlert('@ViewBag.message');
            if ('@TempData["message"]' != null && '@TempData["message"]' != '') {
                customAlertforlongtime('@TempData["message"]');
            }
            $('#DashboardHV').removeClass("active");








            $("#txtsearch").on('change keypress paste', function (e) {
                var key = e.which;
                if (key == 13) {
                    drawgrid();

                }
            });



            $('#btn_append_casenote_save').click(function () {


                var $appendCaseNoteSection = $('#div-att-issue-append-casenote').find('#divAppendCaseNoteSection');
                var $guid=$appendCaseNoteSection.attr('data-section-id');


                if (CKEDITOR.instances['subnotes_caseNote_'+$guidAppend+''].getData() == "") {
                    customAlert("Sub Note is required.");
                }
                else {
                    var CaseNote = {};
                    var Tags = '';
                    $appendCaseNoteSection.find('#appendCaseNotetags_'+$guidAppend+'_tagsinput .tag span').each(function () {
                        Tags = Tags + $(this).text().trim() + ',';
                    });



                    var cameraDocumentsArray = [];
                    var fileData = new FormData();
                    $appendCaseNoteSection.find('#appendCaseNote_attachmentsDiv_'+$guidAppend+'').find('input:file').each(function (a, b) {

                        var fileInput = $(this);



                        if (fileInput.val() != undefined && fileInput.val() != null && fileInput.val() != '') {
                            var fileUpload = fileInput.get(0);
                            var files = fileUpload.files;

                            for (var i = 0; i < files.length; i++) {




                                var convImage = fileInput.attr('conv-img');

                                if (convImage != null && convImage != "")
                                    cameraDocumentsArray.push({ AttachmentFileName: files[i].name, AttachmentFileExtension: '.' + files[i].name.split('.')[files[i].name.split('.').length - 1], AttachmentJson: convImage });


                            }
                        }
                    });


                    var $cameraDocuments = $appendCaseNoteSection.find('.div_append_image_gallery_'+$guidAppend+'').find('.setup_viewscreen');



                    if ($cameraDocuments.length > 0) {

                        $.each($cameraDocuments, function (j, doc) {

                            var $doc = $(doc).find('img');
                            cameraDocumentsArray.push({ AttachmentFileName: 'CaseNoteDocument', AttachmentFileExtension: '.png', AttachmentJson: getBase64Image($doc) });

                        });
                    }





                    CaseNote.Note = CKEDITOR.instances['subnotes_caseNote_'+$guidAppend+''].getData().toString().trim();
                    CaseNote.CaseNoteid = $appendCaseNoteSection.find('#hdn-casenoteid_'+$guidAppend+'').val();
                    CaseNote.CaseNoteDate = $appendCaseNoteSection.find('#txtAppendCaseNoteDate_'+$guidAppend+'').val();
                    CaseNote.HouseHoldId = $('#hiddenatt-issue-householdid').val();
                    CaseNote.CenterId =$('#hiddenatt-issue-centerid').val();
                    CaseNote.Classroomid = $('#hiddenatt-issue-classroomid').val();
                    CaseNote.CaseNotetags = Tags;
                    CaseNote.CaseNoteAttachmentList = cameraDocumentsArray;

                    $.ajax({
                        type: "POST",
                        url: "/Roster/SaveSubNotes",
                        dataType: "json",
                        contentType: 'application/json; charset=utf-8',
                        async: true,
                        beforeSend:function(){
                            $('#spinner').show();
                        },
                        data: JSON.stringify({ 'CaseNote': CaseNote }),
                        success: function (data) {

                            $('#spinner').hide();
                            if (data != '') {
                                customAlert('Record saved successfully');

                                $('#div-append-casenote').hide();
                                $('#div-att-issue-append-casenote').empty();
                                bindAttendanceIssueCaseNote($('#att-issue-modal'));
                            }


                        },
                        error: function (data) {
                            $('#spinner').hide();
                        }
                    });
                }



            });


            $('#homeVisitDivAttenissue').find('#seatsDatetimePicker2').change(function () {
                if ($(this).val() != "") {
                    cleanValidation();
                    var isValid = CheckdateForAppointment($('#homeVisitDivAttenissue'), $(this).val());
                    if (!validDate($(this).val())) {

                        customAlert("Please enter valid date.");
                        plainValidation(this);
                        return false;

                    }
                    else if (!isValid) {

                        customAlert("Please enter future date.");
                        plainValidation(this);
                        return false;

                    }
                    return true;
                }
                else {
                    return true;
                }

            })

            $('.txt-date').focusout(function () {

                if ($(this).val() != "") {
                    var isValid = Checkdate($(this).val());
                    if (!validDate($(this).val())) {

                        $(this).parent('.input-container').find('.error-invalid-date').show();
                        $('#divForMealsDetails').hide();
                        $('#divForNoRecords').hide();

                    }
                    else if (!isValid) {

                        $(this).parent('.input-container').find('.error-future-date').show();
                        $('#divForMealsDetails').hide();
                        $('#divForNoRecords').hide();


                    }
                }
                else {
                    $('.error-message').hide();
                }

            });

            $('.txt-date').focusout(function () {
                $(this).parent('.input-container').find('span').hide();
            });

            $('.txt-date').focusin(function (e) {
                e.preventDefault();
            })

            $('.seats-icon').click(function (e) {



                $('#seatsDatetimePicker' + this.id).datetimepicker('show');
            });

            $(".txt-date").on('keydown', function (e) {
                e.preventDefault();
            });
            $(".txt-date").on('keyup', function (e) {
                flag = 0;
            });
            $('.txt-date').change(function () {
                $('.error-message').hide();
                if ($(this).val().trim() != "") {
                    if (validDate($(this).val().trim())) {
                        $('.seats-invalid-date').hide();
                        if (Checkdate($(this).val().trim())) {
                            $('.seats-future-date').hide();
                            $('.seats-message-empty').hide();
                            $('.seats-invalid-date').hide();
                        }

                        else {
                            $('#divForMealsDetails').hide();
                            $('.seats-future-date').show();
                            $('#divForMealsDetails').hide();
                            $('#divForNoRecords').hide();
                        }

                    }
                    else {
                        $('#divForMealsDetails').hide();
                        $('.seats-invalid-date').show();
                        $('#divForMealsDetails').hide();
                        $('#divForNoRecords').hide();

                    }
                }
                else {
                    $('#divForMealsDetails').hide();
                    $('#divForMealsDetails').hide();
                    $('#divForNoRecords').hide();
                    $('.seats-message-empty').show();
                }
            });
            $("body").on('keyup', '.txt-date', function (e) {
                flags = 0;
                if (e.keyCode != 193 && e.keyCode != 111) {
                    if (e.keyCode != 8) {
                        if ($(this).val().length == 2) {
                            $(this).val($(this).val() + "/");
                        } else if ($(this).val().length == 5) {
                            $(this).val($(this).val() + "/");
                        }
                    } else {
                        var temp = $(this).val();
                        if ($(this).val().length == 5) {
                            $(this).val(temp.substring(0, 4));
                        } else if ($(this).val().length == 2) {
                            $(this).val(temp.substring(0, 1));
                        }
                    }
                } else {
                    var temp = $(this).val();
                    var tam = $(this).val().length;
                    $(this).val(temp.substring(0, tam - 1));
                }


            });

            $('#modal-attendance-details').find('#btnLoadAttendance').on('click',function () {

                var $modal= $('#modal-attendance-details');

                if($modal.find('#seatsDatetimePicker1').val()=="" || $modal.find('#seatsDatetimePicker1').val().trim()=="__/__/____")
                {
                    customAlert('Date is required');
                    return false;
                }

                if(new Date($modal.find('#seatsDatetimePicker1').val()).setHours(0,0,0,0)>new Date().setHours(0,0,0,0))
                {
                    customAlert('Entered date should not greater than today\'s date');
                    return false;
                }

                if (new Date($modal.find('#seatsDatetimePicker1').val()).setHours(0, 0, 0, 0) < new Date(new Date().setFullYear(new Date().getFullYear() - 1)).setHours(0, 0, 0, 0)) {
                    plainValidation($modal.find('#seatsDatetimePicker1'));
                    customAlert('Entered date should not less than one year from today\'s date');
                    return false;
                }





                var EClientId = $modal.find('#lbl-popup-client').attr('accesskey');

                $.ajax({
                    url: HostedDir + "/Roster/GetAttendenceByDate",
                    type: "POST",
                    data: {
                        FromDate: new Date($modal.find('#seatsDatetimePicker1').val().trim()).toJSON(),
                        ToDate:new Date($modal.find('#seatsDatetimePicker1').val().trim()).toJSON(),
                        Enc_ClientID: EClientId,
                    },
                    dataType: "html",
                    secureuri: false,
                    async: false,
                    success: function (data) {

                        $('#modal-attendance-details').find('#attendance-details-section').html(data);

                        $('#modal-attendance-details').find('.search-block-main').hide();


                        $.each( $('#modal-attendance-details').find('#attendance-details-section').find('.sig-div'), function () {

                            var sigString = $(this).children('input:hidden').val();

                            if ($(this).hasClass('teacher-sig-div')) {
                                $(this).signature({ color: '#131515' });

                            }
                            else {

                                $(this).signature({ color: '#29327f' });
                            }

                            $(this).signature('draw', sigString);
                            $(this).signature('disable');


                        });

                        $.each($('#modal-attendance-details').find('#attendance-details-section').find('.kbw-signature'), function () {

                            $(this).css({ 'height': '94px', 'width': '260px', 'border': '1px solid #74777b' });
                            $(this).children('canvas').css({ 'height': '90px', 'width': '250px' });

                        });


                        if($('#modal-attendance-details').find('#attendance-details-section').find('.accordion').length>0)
                        {
                            $('#modal-attendance-details').find('#attendance-details-section').find('.accordion:eq(0)').trigger('click');
                        }

                        $('#modal-attendance-details').modal('show');


                    }
                    , error: function (response) {



                    }

                });
            });



            $('#modal-attendance-details').on('hidden.bs.modal', function () {


                $(this).find('#seatsDatetimePicker1').val('');
                $(this).find('#lbl-popup-client').html('');
                $(this).find('#lbl-popup-client').removeAttr('accesskey');



                $(this).find('#attendance-details-section').html('<div class="col-xs-12 glossy-panel-div table-back-shadow text-center" style="padding:25px;">\
                                                                    <span class="col-xs-12">Search by Filter <sup style="color:red;">*</sup></span>\
                                                                    </div>');

            });

            $('#homeVisitDivAttenissue').find('input[name=hvHoursTxt]').mask("99:99", { placeholder: 'HH:MM' });

            var currentdate = new Date();
            var listTime = [];
            var listTimeHours = [];

            for (var i = 0; i < 12; i++) {
                for (var j = 0; j < 4; j++) {
                    if (j == 0 && i < 12 && i > 0) {
                        if (i > 9) {
                            listTimeHours.push(i + ':00')
                        } else {
                            listTimeHours.push('0' + i + ':00')
                        }
                    }

                    else if (j == 2 && i < 12) {
                        if (i > 9 && i == 18) {
                            break;
                        }
                        else if (i > 9) {
                            listTimeHours.push(i + ':30')
                        }
                        else {
                            listTimeHours.push('0' + i + ':30')
                        }

                    }


                }
            }

            var m;
            var min;
            for (var i = 0; i < 2; i++) {
                if (i == 0) {
                    m = 'AM';
                } else {
                    m = 'PM';
                }
                for (var j = 1; j < 13; j++) {
                    if (j > 7 && m == 'AM' || j < 7 && m == 'PM') {
                        for (var k = 0; k < 2; k++) {
                            if (k == 0) {
                                min = ':00 ';
                            }
                            else {
                                min = ':30 ';
                            }
                            if (min == ':30 ' && j == 6)
                            { break; }
                            if (j == 12) {
                                m = 'PM';
                                listTime.push(j + min + m);
                            }
                            else {
                                if (j > 9) {
                                    listTime.push(j + min + m);
                                }
                                else {
                                    listTime.push('0' + j + min + m);
                                }
                            }
                        }


                    }
                }

            }

            $.each(listTime, function (i, item) {
                $('#StartTime').append($('<option>', {
                    value: item,
                    text: item
                }));
            });

            if ('@ViewBag.mode' == '0') {
                $('#StartTime').val('');
                $('#EndTime').val('');
                $('#Days').val('');

                $('#Description').focus(function () {

                    if ($(this).val() == '')
                        $(this).val($(this).prop('defaultValue'));
                });

            }



            if($('#Centers').find('option').length==1 && $('#Centers').val()!='0')
            {
                GetClassrooms('#Centers', false);
            }



        });
        function checkInfo($hvSection) {
            var isValid = true;
            cleanValidation();
            if ($hvSection.find('#Description')[0].value.trim() == "") {
                isValid = false;
                customAlert("Please enter Description.");
                plainValidation($hvSection.find('#Description'));
                return isValid;
            }
            if ($hvSection.find('#seatsDatetimePicker2')[0].value.trim() == "") {
                isValid = false;
                customAlert("Please select Date.");
                plainValidation($hvSection.find('#seatsDatetimePicker2'));
                return isValid;
            }
            else if ($hvSection.find('#seatsDatetimePicker2')[0].value.trim() != "") {
                var dte = $hvSection.find('#seatsDatetimePicker2')[0].value.trim();
                var isValid = CheckdateForAppointment($hvSection,dte);
                if (!validDate(dte)) {

                    customAlert("Please enter valid date.");
                    plainValidation($hvSection.find('#seatsDatetimePicker2'));
                    return isValid;

                }
                else if (!isValid) {

                    customAlert("Please enter future date.");
                    plainValidation($hvSection.find('#seatsDatetimePicker2'));
                    return isValid;

                }

            }

            if ($hvSection.find('#StartTime')[0].value.trim() == "") {
                isValid = false;
                customAlert("Please enter From Time.");
                plainValidation($hvSection.find('#StartTime'));
                return isValid;
            }

            if ($hvSection.find('input:text[name=hvHoursTxt]')[0].value.trim() == "") {
                isValid = false;
                customAlert("Please enter Duration");
                plainValidation($hvSection.find('input:text[name=hvHoursTxt]'));
                return isValid;
            }
            if ($hvSection.find('#Notes')[0].value.trim() == "") {
                isValid = false;
                customAlert("Please enter Notes");
                plainValidation($hvSection.find('#Notes'));
                return isValid;
            }

            else if ($hvSection.find('#StartTime')[0].value.trim() == "") {
                isValid = false;
                customAlert("Please enter Start Time.");
                plainValidation($hvSection.find('#StartTime'));
                return isValid;
            }


            return true;
        }

        function GetMinutes(timeStr) {

            var str = timeStr.split(':');

            var hours = parseInt(str[0]);
            var mins = parseInt(str[1]);
            var totalMins = hours * 60 + mins;

            return totalMins;
        }
        function getTime($modal) {

            var dateselect = $modal.find('#seatsDatetimePicker2').val();
            var time1 = $modal.find('#StartTime').val();
            var time2 = $modal.find('input:text[name="hvHoursTxt"]').val();
            var am_pm = "AM";
            var Starttimehours = time1.substring(0, 1);
            var min1 = GetMinutes(time1.toString());
            var min2 = GetMinutes(time2.toString());
            var totalMins = parseInt(min1 + min2);
            var hours = parseInt((totalMins % (60 * 24)) / 60);
            var mins = parseInt((totalMins % (60 * 24)) % 60);
            if (mins == 0) {
                mins = "00";
            }
            if (hours > 12) {
                am_pm = "PM";
                hours = "0" + (hours - 12);
            }
            $modal.find('#EndTimeDuration').val(hours + ":" + mins + " " + am_pm);
        }
        function AddSchedulerDetails(arg) {

            var $attModel = $('#att-issue-modal');
            var $hvSection = $attModel.find('#homeVisitDivAttenissue');




            var row = $(arg).attr('data-row');

            if (checkInfo($hvSection)) {
                getTime($hvSection);


                var _hvClientid = $attModel.find('#hiddenatt-issue-clientid').val();


                var _hvDescription = $hvSection.find('#Description').val();
                var _hvDate = $hvSection.find('#seatsDatetimePicker2').val();
                var _hvStartTime = $hvSection.find('#StartTime').val();
                var _hvDuration = $hvSection.find('input:text[name=hvHoursTxt]').val();
                var _hvEndTime = $hvSection.find('#EndTimeDuration').val();
                var _hvNotes = $hvSection.find('#Notes').val();

                $.ajax({
                    url: HostedDir + "/AgencyUser/AddSchedulerInfo",
                    type: "POST",
                    data: {
                        Description: _hvDescription,
                        Date: _hvDate,
                        StartTime: _hvStartTime,
                        Duration: _hvDuration,
                        EndTime: _hvEndTime,
                        Day: $('#Days').val(),
                        ClientId: _hvClientid,
                        Notes: _hvNotes,
                        MeetingId: $('#MeetingId').val(),
                        IsYakkr600601: true
                    },
                    dataType: "json",
                    secureuri: false,
                    success: function (response) {
                        if (response != null) {

                            if (response.result == "1") {

                                customAlert("Record added successfully.");
                                clearcontrols($hvSection);
                            }

                            else if (response.result == "2") {

                                customAlert("Record updated successfully");

                                clearcontrols($hvSection);

                            }
                            else if (response.result == "3") {
                                customAlert("Record already exists.");
                            }
                            else
                                customAlert(response);
                        }
                    },
                    error: function (response) { alert(response); }
                });
            }
        }


        function clearcontrols($modal) {
            $modal.find('#Description')[0].value = "";

            $modal.find('#StartTime')[0].value = "";
            $modal.find('input:text[name=hvHoursTxt]')[0].value = "";
            $modal.find('#Notes')[0].value = "";
            $modal.find('#MeetingId').val(0);
            $modal.find('#seatsDatetimePicker2').val("");
        }





        function SaveSubCaseNoteFile() {
            var data = new FormData();
            $('#div-att-issue-append-casenote').find('#att_issueattachmentsDiv').find('input:file').each(function (i, vak) {
                var files = $(this).get(0).files;

                if (files.length > 0) {
                    data.append("MyImages" + i + "", files[0]);
                }
            });

            $.ajax({
                url: "/Roster/UploadFiles",
                type: "POST",
                processData: false,
                contentType: false,
                asyn: false,
                data: data,
                success: function (data) {


                },
                error: function (er) {
                    alert(er);
                }
            });

        }



        function getList() {

            $('#roster-pagination-div').ApplinkPG({

                'totalRecords': $('#rosterCountLabel').length > 0 ? $('#rosterCountLabel').html() : 0,
                'sortOrder': sortOrder==null || sortOrder=='' ?'ASC':sortOrder,
                'sortColumn': sortColumn==null || sortColumn==''? 'th1':sortColumn,
                'pageSize': pageSize==null || pageSize==''|| pageSize==0? 20:pageSize,
                'requestedPage':requestedPage==null || requestedPage=='' || requestedPage==0? 1:requestedPage,
                'isEnableSorting': true,
                'getRecordUrl': HostedDir + '/Roster/GetRosterList',
                'dataType': 'json',
                'data': {
                    'CenterId': $("#Centers").val(),
                    'ClassroomId':($("#Classroom").val() == '0') ? '' : $("#Classroom").val(),
                    'FilterOption': ($('#filterSelect').length === 0) ? '0' : $('#filterSelect').val(),
                    'SearchTerm': $('#searchTextName').is(':visible') ? $('#searchTextName').val().trim():""
                },
                'bindInitialLoad':true,
                bindData: function (events, data) {

                    events.options.totalRecords = data.totalrecord;
                    bindGridRoster(data, $("#table_"+events.paginationIndex+""));
                }


            });
        }

        function getData(dataAgency) {
            listAgency = dataAgency;
        }

        function plainValidation(id) {

            $(id).focus();
            $(id).css("background-color", "pink");
        }

        function cleanValidation() {

            $('input,textarea,select').each(function () {

                $(this).css("background-color", "");
            });
        }

        function drawgrid() {

            requestedPage = requestedPage;
            $('#spinner').show();
            setTimeout(function () {
                getList();

            }, 10);
        }




        function cleargrid() {

            sortColumn = '';
            sortOrder = '';
            $("#Centers").val('0');
            $("#Classroom").val('');
            $('#Classroom').find('option').remove();
            if ($('#filterSelect').length > 0) {
                $('#filterSelect').val('0');
            }
            clearAllGrid();

            var filterLength = $('#filterSelect').length;
            var filtervalue = 0;
            var searchText = '';
            if (filterLength > 0) {
                filtervalue = $('#filterSelect').val();
            }
            if ($('#searchTextName').length > 0) {
                searchText = $('#searchTextName').val();
            }

            $.ajax({

                url: '/Roster/ClearRosterSession',
                type: 'post',
                datatype: 'json',
                data: { requestedPage: 1, pageSize: 0, centerId: "", classroomId: "", filter: "", searchText: "", sortOrder: "", sortDirection: "" },
                success: function (data) {

                },
                error: function (data) {

                }


            });



        }


        function GetSelectedDateDetails(value) {

            var EClientId = $(value).attr("data-clientId");


            var clientName=$(value).parent('p').siblings('a').html();
            var $modal=$('#modal-attendance-details');
            $modal.find('#lbl-popup-client').html(clientName);
            $modal.find('#lbl-popup-client').attr('accesskey',EClientId);
            $modal.modal('show');


        }

        function openAgencyUserFamilySummaryById(value) {
            $('#spinner').show();
            var EHouseholid = $(value).attr("EHouseholid");
            var url = HostedDir + '/AgencyUser/FamilySummary/' + EHouseholid;
            window.location.href = url;

        }
        function bindGridRoster(data, gridtable) {



            gridtable.find('tbody').find('tr').remove();

            if (data.list.Rosters == null) {
                $('#div1').show();
                $('#rosterCountLabel').html(0);
                $('#ddlpagetodisplay').prop('disabled', true);
            }
            else {

                var tot_record = (data.totalrecord == null || data.totalrecord == '') ? 0 : (parseInt(data.totalrecord) > 0 && parseInt(data.totalrecord) < 10) ? '0' + data.totalrecord : data.totalrecord;

                $('#rosterCountLabel').html(tot_record);

                $('#div1').hide();




                for (var i = 0; i < data.list.Rosters.length; i++) {



                    var tr = "";
                    tr += "<tr id=" + i + " role='row'>";

                    tr += '<td height="70" class="child_name" data-title="Client" role="gridcell" ><a style="white-space:nowrap;" EHouseholid="' + data.list.Rosters[i].EHouseholid + '" EClientId="' + data.list.Rosters[i].Eclientid + '" onclick="openAgencyUserFamilySummaryById(this);"  href="#">' + data.list.Rosters[i].Name + '</a>';
                    if (data.list.Rosters[i].IsHomeBased === 0) {
                        tr += '<p class="part-img-tbl"><img style="height:20px;width:20px;cursor:pointer;" src="/Images/calendar.png" data-clientId="' + data.list.Rosters[i].Eclientid + '" onclick="GetSelectedDateDetails(this);" /></p>';
                    }
                    tr += '</td>';

                    tr += '<td height="70" style="text-align:center;" data-title="Today Attendance" role="gridcell">';
                    if (data.list.Rosters[i].IsPresent == "1" || data.list.Rosters[i].IsPresent == "11") {
                        tr += "<i style='color:#3c763d;' title='Present' data-toggle='tooltip' class='fa fa-check'></i>";
                    }
                    else if (data.list.Rosters[i].IsPresent == "2") {
                        tr += "<i style='color:#9c27b0;' title='Absent Excused' data-toggle='tooltip' class='fa fa-times'></i>";
                    }
                    else if (data.list.Rosters[i].IsPresent == "3") {
                        tr += "<i style='color:#ff5722;' title='Absent No Show' data-toggle='tooltip' class='fa fa-times'></i>";
                    }
                    else if (data.list.Rosters[i].IsPresent == '4') {
                        tr += "<i style='color:#ff5722;' title='Present Other' data-toggle='tooltip' class='fa fa-check'></i>";

                    }
                    else if (data.list.Rosters[i].IsPresent == '0') {
                        tr += "<i style='color:#ff2222;' title='Not Checked In' data-toggle='tooltip' class='fa fa-user-times'></i>";//Changes on 3jan2016
                    }
                    else {
                        tr += "<i style='color:#ff5722;' title='Absent' data-toggle='tooltip' class='fa fa-times'></i>";
                    }
                    tr += '</td>';

                    //Picture//


                    tr += '<td height="70" style="text-align:center;" data-title="Profile Picture" role="gridcell">';
                    tr += '<a href="javascript:void(0)"  data-toggle="tooltip" title="Click to view profile picture" onclick="showImage(this);" EClientId="' + data.list.Rosters[i].Eclientid + '" >View</a>';
                    tr += '</td>';

                    //Picture End//


                    //For Attendance issue//

                    if (roleid == '94cdf8a2-8d81-4b80-a2c6-cdbdc5894b6d' || roleid == 'a65bb7c2-e320-42a2-aed4-409a321c08a5') {



                        if (data.list.Rosters[i].Yakkr601 != 0) {

                            if (data.list.Rosters[i].IsAllowAttendanceIssueReview)
                            {
                                tr += '<td height="70" " role="gridcell"  data-title="Attendance Issue"><a href="javascript:void(0);" data-toggle="tooltip" title="Excessive Absences" data-yakkr="'+data.list.Rosters[i].AttendanceIssueYakkrId+'"  data-parent="' + data.list.Rosters[i].Name + '" data-clientid="' + data.list.Rosters[i].Eclientid + '" data-row="' + i + '"  onclick="ShowPopup(this);">Excessive Absences</td>';

                            }
                            else
                            {
                                tr += '<td height="70" " role="gridcell"  data-title="Attendance Issue"><a href="javascript:void(0);" style="text-decoration:none;cursor:unset;"  title="Excessive Absences" data-yakkr="'+data.list.Rosters[i].AttendanceIssueYakkrId+'"  data-parent="' + data.list.Rosters[i].Name + '" data-clientid="' + data.list.Rosters[i].Eclientid + '" data-row="' + i + '" >Excessive Absences</td>';

                            }


                        }

                        else {
                            tr += '<td height="70"  role="gridcell" data-title="Attendance Issue"><a href="javascript:void(0);" data-toggle="tooltip"  data-parent="' + data.list.Rosters[i].Name + '" data-clientid="' + data.list.Rosters[i].Eclientid + '" onclick="ShowPopup(this);"></td>';
                        }

                    }

                    //For Attendance issue//

                    tr += '<td height="70" style="text-align:center;" role="gridcell" data-title="Classroom">' + data.list.Rosters[i].ClassroomName + '</td>';


                    if (roleid == '94cdf8a2-8d81-4b80-a2c6-cdbdc5894b6d' || roleid == 'e4c80fc2-8b64-447a-99b4-95d1510b01e9') {
                        tr += '<td height="70"  role="gridcell" data-title="Services">';
                        tr += '<a style="text-decoration:underline;cursor:pointer;" data-toggle="tooltip" title="Click here for Case Notes" href="' + HostedDir + '/Roster/CaseNotesclient/?id=' + data.list.Rosters[i].Eclientid + '&Householdid=0&centerid=' + data.list.Rosters[i].CenterId + '&Programid=' + data.list.Rosters[i].ProgramId + '">CN </a>  &nbsp';
                        tr += '<a title="Click here to open Family Partnership Agreement" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;" href="' + HostedDir + '/Roster/FPAList/?id=' + data.list.Rosters[i].Eclientid + '&Householdid=0&centerid=' + data.list.Rosters[i].CenterId + '&Programid=' + data.list.Rosters[i].ProgramId + '&ClientName=' + data.list.Rosters[i].Name + '">FPA </a>  &nbsp';
                        if (data.list.Rosters[i].Acronym != "") {
                            if (data.list.Rosters[i].Acronym == "MAT") {
                                tr += '<a  style="text-decoration: underline; cursor: pointer;"> ' + data.list.Rosters[i].Acronym + ' </a>  &nbsp';
                            }
                            else {
                                tr += '<a title="Click here to get the Parent Matrix Analysis"  data-toggle="tooltip"  href="' + HostedDir + '/Roster/MatrixAnalysis/?id=' + data.list.Rosters[i].Eclientid + '&Householdid=' + data.list.Rosters[i].EHouseholid + ' &centerid=' + data.list.Rosters[i].CenterId + '&Programid=' + data.list.Rosters[i].ProgramId + '&ClientName=' + data.list.Rosters[i].Name + '"  style="text-decoration: underline; cursor: pointer;"> ' + data.list.Rosters[i].Acronym + ' </a>  &nbsp';

                            }
                        }

                        if (roleid != 'e4c80fc2-8b64-447a-99b4-95d1510b01e9') {
                            tr += '<a title="Schedule Home Visit" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;" href="' + HostedDir + '/AgencyUser/HomeVisitFSWNew/?id=' + data.list.Rosters[i].Eclientid + '&Name=' + data.list.Rosters[i].Name + '&LastName=' + (data.list.Rosters[i].Name).substr((data.list.Rosters[i].Name).indexOf(' ') + 1) + '">HV </a>  &nbsp';

                        }
                        tr += '<a title="Click here to open Referals" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;" href="' + HostedDir + '/Roster/ReferralService/?id=' + data.list.Rosters[i].Eclientid + '&Householdid=0&centerid=' + data.list.Rosters[i].CenterId + '&Programid=' + data.list.Rosters[i].ProgramId + '&ClientName=' + data.list.Rosters[i].Name + '">REF </a> &nbsp';
                        tr += '<a title="Click here to get white paper on education of parents" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;" href="' + HostedDir + '/EducationMaterial/ShareMaterial/?ClientId=' + data.list.Rosters[i].Eclientid + '&Single=true">ED </a>';


                        if (data.list.Rosters[i].IsFutureWithdrawal)
                            tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;color:orange;" data-toggle="tooltip"  title="Enrollment Status of Client already updated  for future withdrawal" clientid="' + data.list.Rosters[i].Eclientid + '" name="' + data.list.Rosters[i].Name + '" progID="' + data.list.Rosters[i].ProgramId + '" Insurance="' + data.list.Rosters[i].PrimaryInsurance + '" Householdid="' + data.list.Rosters[i].EHouseholid + '" onclick="showWithdrawalStatus(this);" refpr="' + data.list.Rosters[i].ReferenceProg + '"  accesskey="' + data.list.Rosters[i].RosterYakkr + '" >STAT</a> &nbsp;';
                        else
                            tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;" data-toggle="tooltip"  title="Click to change status" clientid="' + data.list.Rosters[i].Eclientid + '" name="' + data.list.Rosters[i].Name + '"progID="' + data.list.Rosters[i].ProgramId + '" Insurance="' + data.list.Rosters[i].PrimaryInsurance + '" Householdid="' + data.list.Rosters[i].EHouseholid + '" onclick="Loadchangestatusmodel(this);" refpr="' + data.list.Rosters[i].ReferenceProg + '"  accesskey="' + data.list.Rosters[i].RosterYakkr + '" >STAT</a> &nbsp;';

                        //ABT

                        if (data.list.Rosters[i].IsPresent == "0" && data.list.Rosters[i].MarkAbsenseReason == "" && data.list.Rosters[i].IsCaseNoteEntered == false && roleid != 'e4c80fc2-8b64-447a-99b4-95d1510b01e9' && data.list.Rosters[i].IsHomeBased === 0 && data.list.Rosters[i].IsClassStarted === 1) {

                            switch (_closedDetailsJson!=null ?_closedDetailsJson.ClosedToday:0)
                            {
                                case 1:
                                    tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;display:none;" href="javascript:void(0);" title="Click here to mark attendance" data-toggle="tooltip" onclick="showClosedAlert(this,'+_closedDetailsJson.ClosedToday+',\''+_closedDetailsJson.AgencyName.trim()+'\');"   data-reason="' + data.list.Rosters[i].MarkAbsenseReason;
                                    break;
                                case 2:
                                    if(_closedDetailsJson.CenterName==data.list.Rosters[i].CenterName)
                                    {
                                        tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;display:none;" href="javascript:void(0);" title="Click here to mark attendance" data-toggle="tooltip" onclick="showClosedAlert(this,'+_closedDetailsJson.ClosedToday+',\''+_closedDetailsJson.CenterName.trim()+'\');"   data-reason="' + data.list.Rosters[i].MarkAbsenseReason;
                                    }
                                    else{
                                        tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;" href="javascript:void(0);" title="Click here to mark attendance" data-toggle="tooltip" onclick="AbsentMarkingPopup(this);"   data-reason="' + data.list.Rosters[i].MarkAbsenseReason;
                                    }
                                    break;
                                case 3:
                                    if(_closedDetailsJson.ClassRoomName==data.list.Rosters[i].ClassroomName)
                                    {
                                        tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;display:none;" href="javascript:void(0);" title="Click here to mark attendance" data-toggle="tooltip" onclick="showClosedAlert(this,'+_closedDetailsJson.ClosedToday+',\''+data.list.Rosters[i].ClassroomName.trim()+'\');"   data-reason="' + data.list.Rosters[i].MarkAbsenseReason;

                                    }
                                    else{
                                        tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;" href="javascript:void(0);" title="Click here to mark attendance" data-toggle="tooltip" onclick="AbsentMarkingPopup(this);"   data-reason="' + data.list.Rosters[i].MarkAbsenseReason;

                                    }
                                    break;
                                default:
                                    tr += '&nbsp<a style="text-decoration:underline;cursor:pointer;" href="javascript:void(0);" title="Click here to mark attendance" data-toggle="tooltip" onclick="AbsentMarkingPopup(this);"   data-reason="' + data.list.Rosters[i].MarkAbsenseReason;
                                    break;
                            }

                            tr += '" data-islate="' + data.list.Rosters[i].IsLateArrival + '"  data-lateDuration="' + data.list.Rosters[i].LateArrivalDuration + '"  data-lateNotes="' + data.list.Rosters[i].LateArivalNotes + '"  data-house="' + data.list.Rosters[i].EHouseholid + '" data-id="' + data.list.Rosters[i].Eclientid + '-' + data.list.Rosters[i].Name + '"> ABT</a>  &nbsp';
                        }
                        tr += '<a style="text-decoration:underline;cursor:pointer;"  EClientId="' + data.list.Rosters[i].Eclientid + '"  data-programid="' + data.list.Rosters[i].ProgramId + '"   data-classroom="' + data.list.Rosters[i].ClassroomName + '" data-centerid="' + data.list.Rosters[i].CenterId + '"  data-classroomid="' + data.list.Rosters[i].classroomid + '" data-householdid="' + data.list.Rosters[i].Householid + '" data-centername="' + data.list.Rosters[i].CenterName + '" data-CName="' + data.list.Rosters[i].Name + '" onclick="AddCaseNote(this);" data-toggle="tooltip" title="Click here for internal referral" href="#">nREF </a>  &nbsp ';


                        //ABT//

                        //EHS TO HS TRANS
                        //HS WITHDRAWN TRANS
                        //BACK EHS TRANS
                        //'BACK HS TRANS'
                        //PREG


                        if (data.list.Rosters[i].IsPreg == 1 && data.list.Rosters[i].IsShowTransition == true) {






                            tr += (data.list.Rosters[i].TransitionColor == '1') ? '<a title="Click here for transition of pregnant mom" data-toggle="tooltip" \
                                    style="text-decoration: underline; cursor: pointer;color:red;"\
                                    href="' + HostedDir + '/Roster/ChildEarlyHeadStartTransition/?Id=' + data.list.Rosters[i].Eclientid + '&ProgramId=' + data.list.Rosters[i].ProgramId + '&st=' + data.list.Rosters[i].RosterYakkr + '">TRN </a> &nbsp' :

                                  (data.list.Rosters[i].TransitionColor == '2') ? '<a title="Click here for transition of pregnant mom"  data-toggle="tooltip" \
                                style="text-decoration: underline; cursor: pointer;color:orange;"\
                               href="javascript:void(0);"\
                              ecid="' + data.list.Rosters[i].Eclientid + '" programid="' + data.list.Rosters[i].ProgramId + '" isr="' + data.list.Rosters[i].Returning + '"  st="' + data.list.Rosters[i].RosterYakkr + '" onclick="pregMomTransAlert(this);">TRN </a> &nbsp' :
                                 '<a title="Click here for transition of pregnant mom"  data-toggle="tooltip" \
                                style="text-decoration: underline; cursor: pointer;color:green;"\
                                href="' + HostedDir + '/Roster/ChildEarlyHeadStartTransition/?Id=' + data.list.Rosters[i].Eclientid + '&ProgramId=' + data.list.Rosters[i].ProgramId + '&st=' + data.list.Rosters[i].RosterYakkr + '">TRN </a> &nbsp';






                        }


                        else if (data.list.Rosters[i].IsPreg == 0 && data.list.Rosters[i].IsShowTransition == true) {


                            var titleName = '';
                            if (data.list.Rosters[i].TransitionColor == '1') {

                                switch (data.list.Rosters[i].TransitionType) {
                                    case 1:
                                        titleName = 'Click here for new program year client transition from EHS to HS or EHS to EHS';
                                        break;
                                    case 2:
                                        titleName = 'Click here for new program year client transition from EHS to HS';
                                        break;
                                    case 3:
                                        titleName = 'Click here for new program year client transition from EHS to EHS or not come back at all';
                                        break;
                                    case 4:
                                        titleName = 'Click here for new program year client transition from HS to HS';
                                        break;
                                    case 5:
                                        titleName = 'Click here for new program year client transition from HS to Kindergarden';
                                        break;
                                }

                                tr += '<a title="' + titleName + '" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;color:red;" href="' + HostedDir + '/Roster/HeadStartTransition/?Id=' + data.list.Rosters[i].Eclientid + '&ProgramId=' + data.list.Rosters[i].ProgramId + '&st=' + data.list.Rosters[i].RosterYakkr + '">TRN </a> &nbsp';
                            }

                            else if (data.list.Rosters[i].TransitionColor == '3') {

                                switch (data.list.Rosters[i].TransitionType) {
                                    case 7:

                                        tr += '<a title="Click here for client transition from EHS to HS or EHS to EHS"  data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;color:green;" href="' + HostedDir + '/Roster/HeadStartTransition/?Id=' + data.list.Rosters[i].Eclientid + '&ProgramId=' + data.list.Rosters[i].ProgramId + '&st=' + data.list.Rosters[i].RosterYakkr + '">TRN </a> &nbsp';
                                        break;

                                    case 8:
                                        tr += '<a title="Click here for client transition from EHS to HS"   data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;color:green;" href="' + HostedDir + '/Roster/HeadStartTransition/?Id=' + data.list.Rosters[i].Eclientid + '&ProgramId=' + data.list.Rosters[i].ProgramId + '&st=' + data.list.Rosters[i].RosterYakkr + '">TRN </a> &nbsp';
                                        break;
                                }
                            }
                            else {
                                tr += '<a title="Click here to open Head Start Process" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;" href="' + HostedDir + '/Roster/HeadStartTransition/?Id=' + data.list.Rosters[i].Eclientid + '&ProgramId=' + data.list.Rosters[i].ProgramId + '&st=' + data.list.Rosters[i].RosterYakkr + '">TRN </a> &nbsp';
                            }
                        }

                        if (data.list.Rosters[i].FamilyHomeless == 1) {
                            tr += '<a title="Click here to update household address for family" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;" href="javascript:void(0);"  data-cli=' + data.list.Rosters[i].Eclientid + '   data-house=' + data.list.Rosters[i].EHouseholid + '  onclick="loadHouselessClient(this);" >HOM </a>';
                        }


                        if (data.list.Rosters[i].IsScreeningFollowUpReq && data.list.Rosters[i].IsShowScreeningFollowUp) {
                            tr += '<a title="Client here to see the Screening Follow-up" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;color:blue;" href="javascript:void(0);"  ecid=' + data.list.Rosters[i].Eclientid + ' pId=' + data.list.Rosters[i].ReferenceProg + '   onclick="getScreeningByClient(this);"  follow-up="1"> SFU </a>';

                        }
                        else if (data.list.Rosters[i].IsScreeningFollowUpComplete && data.list.Rosters[i].IsShowScreeningFollowUp) {
                            tr += '<a title="Client here to see the Completed Screening Follow-up" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;color:green;" ecid=' + data.list.Rosters[i].Eclientid + ' pId=' + data.list.Rosters[i].ReferenceProg + '  onclick="getScreeningByClient(this);" follow-up="0"> SFU </a>';

                        }
                        if(_accessLW){
                            tr += '<a href="@Url.Action("GrowthAnalysis", "Teacher")?client=' + data.list.Rosters[i].Eclientid+ '" title="Individual Growth Analysis" style="margin-left:5px;text-decoration:underline;" data-toggle="tooltip">LW </a>';
                        }



                    }


                    else if ($('#isManager').val() === 'True') {

                        tr += '<td height="70" style="text-align:center;" role="gridcell"  data-title="Last Case Note Date">' + data.list.Rosters[i].LastCaseNoteDate + '</td>';

                        tr += '<td height="70" style="text-align:center;" role="gridcell"  data-title="Last FPA Date">' + data.list.Rosters[i].LastFPADate + '</td>';
                        tr += '<td height="70" style="text-align:center;" role="gridcell"  data-title="Last Referral Date">' + data.list.Rosters[i].LastReferralDate + '</td>';

                        if (roleid === 'a31b1716-b042-46b7-acc0-95794e378b26') {
                            tr += '<td height="70" role="gridcell" data-title="Services">';
                            tr += '<a style="text-decoration:underline;cursor:pointer;" data-toggle="tooltip"  title="Click here for Case Notes" href="' + HostedDir + '/Roster/CaseNotesclient/?id=' + data.list.Rosters[i].Eclientid + '&Householdid=0&centerid=' + data.list.Rosters[i].CenterId + '&Programid=' + data.list.Rosters[i].ProgramId + '">CN </a>  &nbsp';
                            tr += '<a title="Click here to get white paper on education of parents" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;" href="' + HostedDir + '/EducationMaterial/ShareMaterial/?ClientId=' + data.list.Rosters[i].Eclientid + '&Single=true">ED </a>&nbsp;';
                            tr += '<a style="text-decoration:underline;cursor:pointer;"  data-toggle="tooltip"  EClientId="' + data.list.Rosters[i].Eclientid + '"  data-programid="' + data.list.Rosters[i].ProgramId + '"   data-classroom="' + data.list.Rosters[i].ClassroomName + '" data-centerid="' + data.list.Rosters[i].CenterId + '"  data-classroomid="' + data.list.Rosters[i].classroomid + '" data-householdid="' + data.list.Rosters[i].Householid + '" data-centername="' + data.list.Rosters[i].CenterName + '" data-CName="' + data.list.Rosters[i].Name + '" onclick="AddCaseNote(this);" title="Click here for internal referral" href="#">nREF </a>  &nbsp ';

                        }
                        else {
                            tr += '<td height="70"  role="gridcell" data-title="Services">';
                            tr += '<a style="text-decoration:underline;cursor:pointer;" data-toggle="tooltip"  EClientId="' + data.list.Rosters[i].Eclientid + '"  data-programid="' + data.list.Rosters[i].ProgramId + '"   data-classroom="' + data.list.Rosters[i].ClassroomName + '" data-centerid="' + data.list.Rosters[i].CenterId + '"  data-classroomid="' + data.list.Rosters[i].classroomid + '" data-householdid="' + data.list.Rosters[i].Householid + '" data-centername="' + data.list.Rosters[i].CenterName + '" data-CName="' + data.list.Rosters[i].Name + '" onclick="AddCaseNote(this);" title="Click here for  " href="#">nREF </a>  &nbsp ';
                            tr += '<a style="text-decoration:underline;cursor:pointer;" data-toggle="tooltip" title="Click here for Case Notes" href="' + HostedDir + '/Roster/CaseNotesclient/?id=' + data.list.Rosters[i].Eclientid + '&Householdid=0&centerid=' + data.list.Rosters[i].CenterId + '&Programid=' + data.list.Rosters[i].ProgramId + '">CN </a>  &nbsp';
                        }

                        if (data.list.Rosters[i].IsScreeningFollowUpReq && data.list.Rosters[i].IsShowScreeningFollowUp) {
                            tr += '<a title="Client here to see the Screening Follow-up" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;color:blue;" href="javascript:void(0);"  ecid=' + data.list.Rosters[i].Eclientid + ' pId=' + data.list.Rosters[i].ReferenceProg + '   onclick="getScreeningByClient(this);"  follow-up="1"> SFU </a>';

                        }
                        else if (data.list.Rosters[i].IsScreeningFollowUpComplete && data.list.Rosters[i].IsShowScreeningFollowUp) {
                            tr += '<a title="Client here to see the Completed Screening Follow-up" data-toggle="tooltip" style="text-decoration: underline; cursor: pointer;color:green;" ecid=' + data.list.Rosters[i].Eclientid + ' pId=' + data.list.Rosters[i].ReferenceProg + '  onclick="getScreeningByClient(this);" follow-up="0"> SFU </a>';

                        }

                        if(_accessLW){
                            tr += '<a href="@Url.Action("GrowthAnalysis", "Teacher")?client=' + data.list.Rosters[i].Eclientid+ '" title="Individual Growth Analysis" style="text-decoration:underline;" data-toggle="tooltip">LW </a>';
                        }


                        tr += '</td>';

                        tr += '</tr>';

                    }


                    gridtable.find('tbody').append(tr);


                    gridtable.find('[data-toggle="tooltip"]').map(function () {

                        $(this).tooltip();
                    });



                }

            }
        }

        function AbsentMarkingPopup(arg) {

            $('#MyModalLateArrival').find('select#AbsentType').val(0);
            $('#MyModalLateArrival').find('select#ReasonList').val(0);

            $('#MyModalLateArrival .txt-clear').val("");
            var childnameID = $(arg).data('id');
            var l = childnameID.length;
            var n = childnameID.indexOf("-");
            var CID = childnameID.substring(0, n);
            var CN = childnameID.substring(n + 1, l);

            var islate = $(arg).data('islate');
            $(".divabsense #childname").val(CN);
            $(".divabsense #childid").val(CID);
            var d = new Date();
            var month = d.getMonth() + 1;
            var day = d.getDate();
            var todayDate = (('' + month).length < 2 ? '0' : '') + month + '/' + (('' + day).length < 2 ? '0' : '') + day + '/' + d.getFullYear();
            $('#CaseNoteDate').val(todayDate);

            $('#CaseNoteClientId').val(CID);
            $('#CaseNoteTitle').val("Late Arrival");
            $('#CaseNoteHouseHoldId').val($(arg).data('house'));
            if (islate) {
                $("#InformedLateArrivalClient").text("Marked Late Arrival For " + CN);
                $("#lblArrivalTime").text($(arg).data('lateduration'));
                $("#lblReasonForLate").text($(arg).data('latenotes'));
                $('#InformedLateArrival').modal('show');

                $('#Note').val($(arg).data('latenotes'));
                $('#CaseNotetags').val("Late Arrival");

                $('#divForAbsence').hide();
                $('.abtCheckbox').prop('checked', true);
                $('#divForLateArrival').show();

            }
            else {
                $(".modal-header #childlbl").text("Mark Attendance For " + CN);

                $('.abtCheckbox').prop('checked', false);
                $('#divForLateArrival').hide();
                $('#divForAbsence').show();
                $('#MyModalLateArrival').modal('show');

            }


        }




        function bindAttendanceIssueCaseNote($modal,casenoteType,casenoteId,clientId,isEditable) {

            $modal.find('#caseNotSection').ApplinkCaseNote({
                isPopup: false,
                isSection: true,
                caseNoteType: casenoteType,   //1- New 2- Edit / 3- Append //
                getCaseNoteUrl: HostedDir + "/Roster/GetCaseNoteSectionPartial",
                caseNoteId: casenoteId==null?0:casenoteId,
                householdId: $modal.find('#hiddenatt-issue-householdid').val(),
                clientId: clientId,
                isEditable: isEditable,
                isShowSubmitButton: false,
                isShowExportIcon: false,
                forceLoad: true,

                modalOnShown: function (element) {

                },
                ajaxComplete: function (element) {

                    var $guid = element.find('#divCaseNoteSection').attr('data-current-id');

                    if(casenoteType==1)
                    {
                        element.find('#divCaseNoteSection').find('#heading_case_note').html(caseNoteHeading.AddCaseNote);
                        element.find('#txtCaseNoteTags_'+$guid+'').importTags('Excessive Absences');

                        CKEDITOR.instances['txtareaCaseNote_'+$guid+''].setData('Excessive Absences');

                        element.find('#txtCaseNoteTitle_' + $guid + '').val('Excessive Absences');

                        element.find('#txtCaseNoteDate_' +$guid+ '').mask("99/99/9999", { placeholder: 'MM/DD/YYYY' });

                        element.find('#txtCaseNoteDate_' + $guid + '').val(getFormattedDateNumber(new Date()));
                    }
                    else if(casenoteType==2){

                        element.find('#divCaseNoteSection').find('#heading_case_note').html(caseNoteHeading.EditCaseNote);
                    }

                    element.find('#txtCaseNoteDate_' + $guid + '').prop('disabled', false);

                    element.find('.img-camera').attr('target-id', 'nREF_caseNote_div');

                    element.css('border', 'unset!important');

                    showCameraOption(element);

                    element.find('#uploadImageCamera').hide();

                    setIntervalUserMedia(element);

                    $('#att-issue-modal').animate({
                        scrollTop:  $('#att-issue-modal').find("#divCaseNoteSection").offset().top
                    }, 1000);
                }

            });

            $modal.find('#div-edit-caseNote').show();
        }


        function ShowPopup(arg) {

            var $attissuemodal = $('#att-issue-modal');

            $attissuemodal.find('#homeVisitDivAttenissue').hide();
            $attissuemodal.find("#caseNoteDivAttIssue").hide();
            $attissuemodal.find('.ride_deta').find('li').removeClass('active');

            $attissuemodal.find('#hiddenatt-issue-clientid').val('');
            $attissuemodal.find('#hiddenatt-issue-programid').val('');
            $attissuemodal.find('#hiddenatt-issue-householdid').val('');

            $attissuemodal.find('#hiddenatt-issue-centerid').val('');
            $attissuemodal.find('#hiddenatt-issue-classroomid').val('');
            $attissuemodal.find('#hiddenatt-issue-yakkrid').val($(arg).attr('data-yakkr'));

            $attissuemodal.find('.ride_deta').find('li').removeClass('active');

            $attissuemodal.find('#caseNoteDivAttIssue,#homeVisitDivAttenissue,#refAttendanceIssueDiv').hide();



            $.ajax({

                url: HostedDir + '/Roster/GetParentInformationByClient',
                datatype: 'application/json',
                type: 'post',
                data: { clientId: $(arg).attr('data-clientid') },
                success: function (data) {




                    try {


                        $attissuemodal.find('.ride_deta').find('li').removeClass('active');

                        $attissuemodal.find('#caseNoteDivAttIssue,#homeVisitDivAttenissue,#refAttendanceIssueDiv').hide();



                        var appendParent = '';


                        if ( data != null && data.parentInfo != null && data.parentInfo.length > 0) {

                            $.each(data.parentInfo, function (p, parent) {


                                appendParent += '<tr>';
                                appendParent += '<td data-title="Name">' + parent.ParentName + '</td>';


                                if (parent.PhoneNo != null && parent.PhoneNo != "") {
                                    appendParent += '<td data-title="Name">' + parent.PhoneNo.replace(',', '<br>') + '</td>';
                                }
                                appendParent += '</tr>';
                            });

                            $attissuemodal.find('#div-atten-issue-parent').find('#parent_table_body').html(appendParent);
                        }

                        if(data!=null && data.childInfo!=null)
                        {
                            $attissuemodal.find('#lblatt-issue-client').html(data.childInfo.ClientName);
                            $attissuemodal.find('#hiddenatt-issue-clientid').val(data.childInfo.Enc_ClientId);
                            $attissuemodal.find('#hiddenatt-issue-programid').val(data.childInfo.ProgramType);
                            $attissuemodal.find('#hiddenatt-issue-householdid').val(data.childInfo.Enc_HouseholdId);
                            $attissuemodal.find('#hiddenatt-issue-centerid').val(data.childInfo.CenterID);
                            $attissuemodal.find('#hiddenatt-issue-classroomid').val(data.childInfo.ClassRoomID);

                            $attissuemodal.modal({
                                'backdrop': 'static',
                                'keyboard': false

                            }, 'show');
                        }
                        else{

                            customAlert('Error occurred. Please, try again later');
                        }


                    }
                    catch (error) {
                        customAlert('Error occurred. Please, try again later');

                        $('#spinner').hide();
                    }

                },
                error: function (data) {

                },
                complete: function (data) {
                    $('#spinner').hide();
                }
            });


        }


        function GetClassrooms(Select, isTrigger) {

            $.ajax({
                url: HostedDir + "/Roster/Getclassrooms",
                type: "POST",
                data: {
                    Centerid: $(Select).val()
                },
                dataType: "json",
                secureuri: false,
                async: true,
                beforeSend: function () {
                    $('#spinner').show();
                },
                success: function (response) {

                    if (response.length > 0) {
                        var option = (response.length > 1) ? '<option value="0">--Select Classroom--</option>' : '';
                        for (var i = 0; i < response.length; i++) {
                            option = option + '<option value="' + response[i].ClassroomID + '">' + response[i].ClassName + '</option>';
                        }
                        $('#Classroom').find('option').remove().end().append(option);


                        if (isTrigger) {
                            $('#Classroom').val('@Session["_RosterClassroom"]');

                            if ($('#searchByNameDiv').length > 0) {
                                if ($('#searchTextName').val() != '') {
                                    $('#searchbyNamebtn').trigger('click');
                                }
                                else {
                                    $("#btnsearch").trigger('click');
                                }
                            }
                            else {
                                $("#btnsearch").trigger('click');
                            }

                        }

                    }
                    else {
                        $('#Classroom').find('option').remove();
                    }
                }
                   , error: function (response) {
                       $('#spinner').hide();
                       customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);


                   },
                complete: function () {

                    $('#spinner').hide();
                }
            });
        }

        function testTime(time) {
            var time = $(time).val();
            var re = /[0-2]?\d[.:][0-5]\d/;
            var matches = re.test(time);
            if (matches == true) {
                return true;

            } else {
                customAlert("Invalid Time Format");
                return false;
            }

        }


        function showImage(ele) {
            $('#spinner').show();
            var enc_id = $(ele).attr('EClientId');
            $.ajax({
                url: '/Roster/GetChildrenImage',
                dataType: 'json',
                type: 'post',
                data: { enc_clientId: enc_id },
                success: function (data) {

                    var image = '';
                    if (data.Text == "" && data.Value == "2") {
                        image = '<img class="roundimage"  width="50" height="50"  src="/Content/img/ic_female.png" />';
                    }
                    else if (data.Text == "" && data.Value == "1") {
                        image = '<img class="roundimage" width="50" height="50"   src="/Content/img/ic_male.png" />';
                    }
                    else if (data.Text == "" && ata.Text == "3") {
                        image = '<img class="roundimage"  width="50" height="50"  src="/Content/img/ic_male_default.png" />';
                    }
                    else if (data.Text != "") {
                        image = '<img class="roundimage" width="50" height="50"   src="data:image/jpg;base64,' + data.Text + '"/></td>'
                    }
                    else {
                        image = '<img class="roundimage"  width="50" height="50"  src="/Content/img/download.jpg" />';
                    }
                    $(ele).parent('td').append(image);
                    $(ele).parent('td').find('.roundimage').zoomify();
                    $(ele).remove();
                    $('#spinner').hide();
                },
                error: function (data) {
                    $('#spinner').hide();
                }
            });
        }



        function getTagsOnInput() {
            var tagInp = $('#CaseNoteDetails_CaseNotetags').val();
            var tagsArr = [];
            $.ajax({

                url: '/Roster/GetCaseNoteTagonInput',
                datatype: 'json',
                type: 'post',
                async: true,
                data: { searchText: tagInp },
                success: function (data) {
                    if (data != null) {
                        if (data.length > 0) {
                            $.each(data, function (i, tags) {
                                tagsArr.push(tags.Text);
                            });
                        }
                    }
                },
                error: function (data) {

                }

            });

            return tagsArr;
        }


        function showClosedAlert(ele,closedMode,closedtext)
        {


            if(!checkCookie($cookieName))
            {
                BootstrapDialog.show({
                    title: 'Confirmation',
                    message: '<p><strong>'+closedtext+'</strong> has been closed today. Click <strong>OK</strong> to Proceed.</p>\
                            <p><input type="checkbox" name="checkboxnoShow" id="checkboxnoShow">&nbsp;<span for="checkboxnoShow">Don\'t show this message again</span></p>',
                    closable: true,
                    closeByBackdrop: false,
                    closeByKeyboard: false,
                    buttons: [{
                        label: 'Cancel',
                        cssClass: 'btn-danger',
                        action: function(dialogRef){
                            dialogRef.close();

                        }
                    },

                    {
                        label: 'OK',
                        cssClass: 'btn-primary',
                        action: function(dialogRef){

                            var $isNoshowChecked= $('input:checkbox[name="checkboxnoShow"]').is(":checked");

                            if($isNoshowChecked)
                            {
                                setCookie($cookieName,'1',1);
                            }

                            AbsentMarkingPopup(ele);
                            dialogRef.close();
                        }
                    }
                    ]
                });
            }
            else
            {
                AbsentMarkingPopup(ele);
            }



        }



    </script>
}

@section Style{


    <link href="~/Content/css/Transition.css" rel="stylesheet" />

    <style>
        /*style for Append Case Note Popup*/

        #divGridRoster table.glossy-table thead > tr > th {
            padding: 15px 5px 15px 5px;
        }

        #divGridRoster table.glossy-table tbody > tr > td {
            line-height: 2.5;
        }

        div#roster-pagination-div .pages_display ul li:first-child, div#roster-pagination-div .pages_display ul li:last-child {
            color: #ffffff;
        }

        #div-attendance-section .table-back-shadow {
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }

        .select-editable {
            position: relative;
            background-color: white;
            width: 120px;
            height: 18px;
        }

            .select-editable select {
                position: absolute;
                top: 0px;
                left: 0px;
                font-size: 14px;
                border: 1px solid #ccc;
                width: 120px;
                margin: 0;
                line-height: 33px;
                padding: 6px 5px;
            }

            .select-editable input {
                position: absolute;
                top: 1px;
                left: 9px;
                width: 90px;
                padding: 1px;
                font-size: 14px;
                border: none;
                height: 30px;
            }

                .select-editable select:focus, .select-editable input:focus {
                    outline: none;
                }

        #homeVisitDivAttenissue #StartTime {
            position: absolute;
        }


        #att-issue-modal .addn-content-desc {
            padding-right: 10px;
        }

        #att-issue-modal .modal-dialog-ch {
            width: 80%;
        }




        /*Read more read less*/
        .readmore, .readless {
            font-weight: 600;
            color: #000;
            text-decoration: none;
        }

        .title-div-casenote {
            background: none;
            border: none;
            font-weight: 600;
        }

        #div-append-casenote .enroll-sec p {
            border: none !important;
            background: none !important;
        }

        #div-append-casenote .div-sec-right p {
            color: #555 !important;
            padding-left: 0;
        }

        #div-append-casenote {
            display: none;
        }


        #att-issue-modal .tag-text {
            border: 1px solid #fff;
            -moz-border-radius: 2px;
            -webkit-border-radius: 2px;
            display: block;
            float: left;
            padding: 10px;
            text-decoration: none;
            background: #295b8f;
            color: #fff;
            margin-right: 5px;
            margin-bottom: 5px;
            font-family: helvetica;
            font-size: 13px;
            line-height: 0;
        }

        #div-append-casenote .tag-text-block label {
            width: auto;
            display: inline-block;
            float: left;
            font-size: 16px;
            font-weight: normal;
        }


        #div-append-casenote .addn-poup-div1 label {
            margin-top: 5px;
            font-weight: normal;
        }

        /*Style end for Append Case Note Popup*/



        /*styles for Attendance issue popup*/


        #att-issue-modal .ride_deta li a {
            cursor: pointer;
        }

        #caseNoteDivAttIssue .btn-show-cnotes {
            float: right;
            margin: 18px 18px 5px;
        }


        #refmathcprovidersattenissuediv #referralLetterPdf {
            float: none !important;
            padding: 9px 12px !important;
        }



        /*pop-up window for attendance issue*/

        #refcatagoryattenissuediv {
            display: none;
        }


        .app_ada_main .nav-tabs li a, .app_ada_main .nav-tabs li a:hover, .app_ada_main .nav-tabs li a:focus {
            border-image: none;
            border: 3px solid #ffffff;
            border-radius: 3px;
            color: #ffffff;
            font-size: 14px;
            text-align: center;
            background: transparent;
        }

        .app_ada_main .nav-tabs li.app_drag a, .app_ada_main .nav-tabs li.app_drag:hover a, .app_ada_main .nav-tabs li.app_drag:focus a {
            background: #2ecc71 none repeat scroll 0 0 !important;
            color: #fff !important;
        }

        .app_ada_main .nav-tabs li.ada a, .app_ada_main .nav-tabs li.ada:hover a, .app_ada_main .nav-tabs li.ada:focus a {
            background: #9b59b6 !important;
            color: #fff !important;
        }


        .app_ada_main .nav-tabs li.adaref a {
            background: #0c84de !important;
            color: #fff !important;
        }


        .app_ada_main .nav-tabs li {
            float: left;
            margin-right: 1%;
            color: #fff;
        }

        .app_ada_main .nav-tabs {
            border-bottom: 0px !important;
        }


        .app_ada_main .ride_deta {
            margin-left: 0;
            text-align: center;
            float: none;
            display: flex;
            justify-content: center;
        }


        .tab_tlt {
            background: #34495e none repeat scroll 0 0;
            color: #ffffff;
            float: left;
            font-size: 16px;
            margin-bottom: 8px;
            padding: 10px 0;
            text-align: center;
            line-height: 25px;
            width: 100%;
        }

            .tab_tlt span {
                font-weight: 700;
                padding-left: 12px;
            }



        .app_ada_main .nav-tabs.ride_deta .active {
            border-bottom: 1px solid #f9c751;
            padding-bottom: 10px;
        }

        .app_ada_main .nav-tabs.ride_deta > li.active > a::after {
            border-left: 8px solid rgba(0, 0, 0, 0);
            border-right: 8px solid rgba(0, 0, 0, 0);
            border-top: 8px solid #f9c751;
            bottom: -13px;
            content: "";
            height: 0;
            left: 0;
            margin: auto;
            position: absolute;
            right: 0;
            width: 0;
            transform: rotate(179deg);
            -webkit-transform: rotate(179deg);
        }

        .app_ada_main .nav-tabs.ride_deta li {
            position: relative;
        }


        .ht-scroll {
            height: 330px;
            overflow: auto;
        }


        /*pop-up window for attendance issue*/



        #caseNoteDivAttIssue {
            display: none;
            border: 3px solid #f9c751;
        }

        #homeVisitDivAttenissue {
            display: none;
            border: 3px solid #f9c751;
        }

        #refAttendanceIssueDiv {
            display: none;
            border: 3px solid #f9c751;
        }


        #att-issue-modal #tbl_attendanceissue_parent thead tr, #att-issue-modal #tbl_attendanceissue_casenotes thead tr {
            background: #9B58B4 !important;
            color: #fff;
        }

        #att-issue-modal div#referralserviceSectionDiv:nth-child(1) h2 {
            font-size: 20px;
        }

        #att-issue-modal #div_referral_category_partial h2.addapplicant {
            font-size: 20px !important;
        }

        #refAttendanceIssueDiv {
            padding: 0;
        }

        #att-issue-modal .bdr-btm {
            padding-bottom: 15px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
            background: #fff;
            border-radius: 5px;
            padding: 15px;
        }

        #att-issue-modal .text-heading {
            font-size: 20px;
            margin-bottom: 10px;
            color: #295b8f;
            font-weight: bold;
            font-family: arial,sans-serif;
        }

        #att-issue-modal .servies_lst ul {
            list-style-type: none;
            padding-left: 0px;
        }

        #att-issue-modal .servies_lst h3 {
            margin: 20px 2px;
            text-align: left;
            font-size: 15px;
            float: left;
            color: #295b8f;
            width: 100%;
            font-weight: bold;
            font-family: arial,sans-serif;
        }

        #att-issue-modal .name_lst span {
            float: left;
            width: 100%;
            line-height: 26px;
        }

        #att-issue-modal .name_lst input[type="checkbox"] {
            margin: 0 8px;
        }

        #att-issue-modal .servies_lst ul li {
            padding-bottom: 10px;
            color: #000;
            padding-left: 20px;
            font-family: arial,sans-serif;
        }

        #att-issue-modal .check_btn a {
            background: #295b8f;
            padding: 6px;
            margin: 5px;
            color: #fff;
            border-radius: 0;
            float: left;
            padding: 15px 12px;
            text-align: center;
            font-family: arial,sans-serif;
        }

        #att-issue-modal .modal-body {
            background: #34495e none repeat scroll 0 0;
            border: 6px solid #ffffff;
            border-radius: 3px;
            /* color: #ffffff; */
            float: left;
            padding: 15px 3%;
            position: relative;
            width: 100%;
        }

            #att-issue-modal .modal-body > h2 {
                margin-top: 10px;
                float: left;
                font-size: 24px;
                font-weight: 600;
                text-align: center;
                width: 100%;
                margin-bottom: 20px;
                color: #fff;
            }

        .att-case-note-div, .att-hv-div, .att-ref-div {
            width: 100%;
            float: left;
        }


        #att-issue-modal .close {
            opacity: 1;
            position: absolute;
            right: -14px;
            top: -15px;
        }

        #tbl_attendanceissue_casenotes tbody#table_body td p {
            background: none;
            border: none;
        }









        .button-pink {
            text-shadow: 0 1px #0d4d09;
            background-color: #9b59b6;
            border-color: #9b59b6 #9b59b6 #9b59b6;
        }

        .button-violet {
            text-shadow: 0 1px #7e50b7;
            background-color: #5f477d;
            border-color: #7e50b7 #684494 #5d3e84;
        }

        .button-blue {
            text-shadow: 0 1px #0c84de;
            background-color: #19F;
            border-color: #1588de #2485ce #15598c;
        }




        #att-issue-modal .btn-primary {
            color: #fff;
            background-color: #295b8f;
            border-color: #295b8f;
            border-radius: 0;
        }



        /*Styles for Attendance issue popup*/



        .line-hgt {
            line-height: 32px;
        }

        .bootstrap-dialog-title {
            margin-top: 15px;
        }

        .no-padding {
            padding: 0;
        }

        .right-side-container-ch {
            width: 100%;
            float: left;
            background: url('../../Images/body-bg.jpg') center no-repeat;
            background-size: cover;
            min-height: 689px;
        }

        .error-notify {
            position: relative;
            display: inline-block;
            vertical-align: top;
            color: red;
            font-size: 13px;
            margin-left: 2px;
            font-weight: bold;
        }

        .transition-inner .form-control {
            background: #fff;
            border: 1px solid #e7e7e7;
            padding: 10px 10px;
            color: #163b69;
            text-align: left;
            font-size: 15px;
            margin: 0;
            text-transform: none;
            width: 100%;
            float: left;
            height: 43px;
            box-shadow: none;
            border-radius: 0;
        }

        .err-container, irr-error {
            width: 100%;
            float: left;
            margin: 6px 0;
        }

        .err-message {
            display: none;
            color: red;
            font-size: 12px;
            margin: 6px;
            height: 10px;
        }


        .scroll-thead {
            display: table;
            width: 100%;
            table-layout: fixed;
            /*width: calc( 100% - 17px );*/
        }

        .scroll-tbody tr td, .scroll-tbody1 tr td {
            word-break: break-word;
        }

        .scroll-tbody {
            display: block;
            height: 300px;
            overflow: auto;
            overflow-x: hidden;
        }

            .scroll-tbody tr {
                display: table;
                width: 100%;
                table-layout: fixed;
            }

        .add-useragform input[type="checkbox"] {
            width: 13%;
            position: relative;
            top: -10px;
        }

        .import_ft_files {
            width: 73%;
            float: right;
        }

        div#section_attachment label {
            width: 26%;
            float: left;
        }

        div#section_attachment input {
            width: 35.8% !important;
            float: left;
        }

        div#section_attachment .adddivspace {
            width: auto;
            float: left !important;
            margin-left: 13px;
        }

        div#ClientDiv div {
            padding: 0;
        }

        div#section_attachment {
            padding: 0 15px;
        }



        .import_ft_files input {
            width: 47% !important;
            margin-right: 10px;
        }

        .some_attach {
            padding: 10px;
        }

        /*div#Houselessmodal label {

                    color: #333;
                }*/
    </style>

    <style>
        .roster-dropdown {
            float: left;
            width: 75%;
        }

        .col-sm-12.col-lg-3.ic-mqr {
            margin-top: 8px;
        }

        @@media only screen and (max-width: 1024px) {
            .div-roster-option {
                display: flex;
                flex-direction: column;
                width: 50%;
            }

            .roster-dropdown {
                width: 50%;
            }

            .roster-dropdown-inner {
            }

            .ic-mqr {
                text-align: center;
                margin-top: 17px !important;
                float: left;
                width: 100%;
            }

            .div-roster-option-lbl {
                margin-top: 22px;
            }

            .roster-dropdown-inner div {
                margin-top: 10px;
            }
        }
        /* modal-transition */
        .bootstrap-dialog-footer.edu-transition b {
            width: 100%;
            display: inline-block;
            margin-bottom: 15px;
        }

        .bootstrap-dialog-footer-buttons .btn-default {
            padding: 7px 12px !important;
        }

        .bootstrap-dialog-footer-buttons button {
            width: 15%;
        }

        .bootstrap-dialog-footer-buttons {
            text-align: center;
        }

            .bootstrap-dialog-footer-buttons .btn-default {
                margin-right: 14px;
            }

        .edu-testnewborn {
            display: inline-block;
        }

        div#mytransition .modal-header {
            background: #337ab7;
            color: #fff;
            margin-bottom: 0px;
        }

        div#mytransition .modal-content {
            border-radius: 0;
        }

        div#mytransition .modal-header button {
            color: #fff;
            opacity: 1;
        }

        .eduicc-trans span {
            width: 16%;
            float: left;
            margin-left: 20px;
        }

        .form-group.eduicc-trans.radio.radio-info p {
            color: #163b69;
            text-align: left;
            font-size: 15px;
            margin: 0;
            width: 100%;
            float: left;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .form-group.eduicc-trans.radio.radio-info .transition-content-desc p {
            padding-left: 0;
        }

        #att-issue-modal transition-content-desc p {
            padding-left: 0;
        }

        .form-group.eduicc-trans.radio.radio-info {
            width: 100%;
            float: left;
            margin-right: 0;
            padding-left: 0;
        }

        .eduicc-trans span input {
            margin-right: 7px;
            margin-top: 0;
            outline: none !important;
        }
        /* modal-transition */

        #MyModalLateArrival .close {
            opacity: 1;
            position: absolute;
            right: -14px;
            top: -15px;
        }

        body {
            font-family: Arial,sans-serif !important;
        }

        #MyModalLateArrival .modal-body > h2 {
            margin-top: 10px;
            float: left;
            font-size: 24px;
            font-weight: 600;
            text-align: center;
            width: 100%;
            margin-bottom: 20px;
            color: #fff;
        }

        #MyModalLateArrival .tagsinput {
            min-height: 50px !important;
        }

        #MyModalLateArrival .modal-body {
            background: #34495e none repeat scroll 0 0;
            border: 6px solid #ffffff;
            border-radius: 3px;
            /* color: #ffffff; */
            float: left;
            padding: 15px 3%;
            position: relative;
            width: 100%;
        }

        .addn-poup-div label {
            color: #163b69;
            font-size: 18px;
            text-align: right;
            font-weight: 400;
            margin-top: 5px;
            margin-bottom: 3px;
            width: 100%;
        }

        .addn-poup-div1 input, .addn-poup-div1 textarea {
            position: relative;
            color: #333;
            background: #fff;
            border: 1px solid #fff;
            border-radius: 0;
            font-style: italic;
            box-shadow: none;
        }







        .xs-strong span {
            padding-right: 2px;
        }

            .xs-strong span i {
                font-size: 16px;
            }

        .xs-strong strong {
            padding-right: 5px;
            font-weight: 300;
        }

        .dlf-outer {
            width: 89%;
            border: 1px solid #9B58B4;
            float: none;
            margin: auto;
        }

        /*Style for Closed alert*/
        .education-content-desc1 p {
            background: #e74c3c;
            border: 1px solid #c0392b;
            padding: 12px 15px;
            color: #fff;
            text-align: center;
            font-size: 18px;
            margin: 0;
        }

        .modal-content-ic #divAbsenceTypeList {
            width: 100%;
            float: left;
            border-top: 1px solid #f4f4f4;
        }

        .center-sel {
            height: 38px !important;
        }

        .chk-box-ch .fa-radio,
        .chk-box-ch .fa-checkbox {
            position: relative;
        }

            .chk-box-ch .fa-radio input[type=radio],
            .chk-box-ch .fa-checkbox input[type='checkbox'] {
                display: none !important;
            }

                .chk-box-ch .fa-checkbox input[type='checkbox'] + label:before,
                .chk-box-ch .fa-radio input[type='radio'] + label:before {
                    display: inline-block;
                    font-family: FontAwesome;
                    font-size: 21px;
                    font-style: normal;
                    font-weight: normal;
                    line-height: 32px;
                    -webkit-font-smoothing: antialiased;
                    -moz-osx-font-smoothing: grayscale;
                    padding-right: 8px;
                    width: 20px;
                }

                .chk-box-ch .fa-checkbox input[type="checkbox"] + label:before {
                    content: "\f096";
                    position: relative;
                    top: 0px;
                    color: #fff;
                    margin-right: 10px;
                }

                .chk-box-ch .fa-checkbox input[type="checkbox"]:focus + label:before {
                    color: #666;
                }

                .chk-box-ch .fa-checkbox input[type="checkbox"]:checked + label:before {
                    color: #3FC593;
                    content: "\f14a";
                    position: relative;
                    top: 0px;
                }




        .m-tp {
            margin-top: 10px;
        }


        #FamilyHousehold_City {
            margin-right: 0;
        }

        .addapplicant {
            margin-bottom: 20px !important;
        }

        #Houselessmodal div#section_attachment label {
            width: 23%;
        }

        #Houselessmodal .import_ft_files input {
            width: 45% !important;
            margin-right: 10px;
        }

        #Houselessmodal .import_ft_files {
            width: 76%;
            float: right;
        }


        /*responsive Section*/


        @@media (min-device-width: 243px) and (max-device-width: 767px) {
            #filterSelect {
                margin-top: 0.6em;
            }

            .ic-mqr {
                margin-top: 0.6em;
                text-align: center;
            }
        }


        @@media only screen and (max-width: 760px), (min-device-width: 761px) and (max-device-width: 1200px) {
            /* Force table to not be like tables anymore */
            #GridRoster, #GridRoster thead, #GridRoster tbody, #GridRoster th, #GridRoster td, #GridRoster tr,
            #tbl_attendanceissue_casenotes, #tbl_attendanceissue_casenotes thead, #tbl_attendanceissue_casenotes tbody,
            #tbl_attendanceissue_casenotes th, #tbl_attendanceissue_casenotes td, #tbl_attendanceissue_casenotes tr {
                display: block;
                border: none;
            }

                #GridRoster tbody tr td:first-child a,
                #tbl_attendanceissue_casenotes tbody tr td:first-child a {
                    width: initial !important;
                    text-overflow: initial !important;
                }
                /* Hide table headers (but not display: none;, for accessibility) */
                #GridRoster thead tr,
                #tbl_attendanceissue_casenotes thead tr {
                    position: absolute;
                    top: -9999px;
                    left: -9999px;
                }

                #GridRoster tr,
                #tbl_attendanceissue_casenotes tr {
                    margin: 0 7px 2em 0;
                    box-shadow: 8px 8px 8px rgba(0,0,0,0.2);
                }

                    #GridRoster tr:nth-child(odd),
                    #tbl_attendanceissue_casenotes tr:nth-child(odd) {
                        background: #ffffff;
                        border: 1px solid #ccc;
                        border-radius: 8px;
                    }


                    #GridRoster tr:nth-child(even),
                    #tbl_attendanceissue_casenotes tr:nth-child(even) {
                        background: #f1f5f8;
                        border: 1px solid #ccc;
                        border-radius: 8px;
                    }

                #GridRoster td, #tbl_attendanceissue_casenotes td {
                    /* Behave  like a "row" */
                    border: none;
                    border-bottom: 1px solid #eee;
                    position: relative;
                    /*padding-left: 50%;*/
                }

                    #GridRoster td:before, #tbl_attendanceissue_casenotes td:before {
                        /* Now like a table header */
                        position: absolute;
                        /* Top/left values mimic padding */
                        top: 0;
                        left: 6px;
                        width: 45%;
                        padding-right: 10px;
                        white-space: nowrap;
                    }

            .table-div {
                border: none !important;
            }


            #GridRoster td:before, #tbl_attendanceissue_casenotes td:before {
                content: attr(data-title);
                text-align: left;
                padding-top: 1.6em;
                margin-left: 1em;
            }

            #GridRoster td a, #GridRoster td i, #tbl_attendanceissue_casenotes td a, #tbl_attendanceissue_casenotes td i {
                margin-top: 1em;
            }



            #GridRoster > tbody > tr > td, #tbl_attendanceissue_casenotes > tbody > tr > td, #tbl_attendanceissue_casenotes > tbody > tr > td > p {
                text-align: right !important;
                padding-right: 2em;
            }

            .table-responsive {
                border: none !important;
            }
        }

        #organization-list .container-radio {
            max-width: 194px !important;
            width: 194px !important;
        }

        #org-list {
            padding-left: 31px;
        }

        .org-list-left-width {
            width: 40%;
            display: inline-block;
            vertical-align: top;
        }

        .org-list-right-width {
            width: 58%;
            display: inline-block;
            vertical-align: top;
        }

        #organization-list {
            margin-top: 10px;
            max-height: 100% !important;
        }


        @@media (min-width: 992px) and (max-width: 1199px) {
            #att-issue-modal .modal-dialog-ch {
                width: 95%;
            }

            #tbl_attendanceissue_casenotes tbody#table_body td p {
                text-align: right;
            }

            .transition-content-desc p {
                padding: 10px 0;
            }

            .duration-margin {
                margin-top: 20px !important;
            }

            .duration-padding {
                padding: 0 !important;
            }

            .select-editable input, .select-editable {
                width: 100% !important;
            }
        }

        @@media (min-width: 768px) and (max-width: 991px) {
            #att-issue-modal .modal-dialog-ch {
                width: 95%;
            }

            #tbl_attendanceissue_casenotes tbody#table_body td p {
                text-align: right;
            }

            .transition-content-desc p {
                padding: 10px 0;
            }

            .duration-margin {
                margin-top: 20px !important;
            }

            .duration-padding {
                padding: 0 !important;
            }

            .select-editable input, .select-editable {
                width: 99% !important;
            }

            .org-list-left-width {
                width: 43%;
                display: inline-block;
                vertical-align: top;
            }

            .org-list-right-width {
                width: 55%;
                display: inline-block;
                vertical-align: top;
            }
        }


        #att-issue-pagination-div #ulPaging li {
            display: inherit;
        }

        #att-issue-pagination-div .pagination_wrp .pagination > li > a, .pagination > li > span {
            line-height: 1.3 !important;
        }
        /*responsive section*/
    </style>


    <link href="~/Content/CaseNote/css/style.css" rel="stylesheet" />


}

@section MainContentHolder{




    <div class="row Zoom">



        <div class="col-xs-12" style="padding:0;">


            <div class="page-wrapper-change">
                <div class="container-fluid">
                    <div class="row">
                        <div class="glossy-right-side-container" style="padding-top:30px;">
                            @Html.Partial("~/Views/Partialviews/CenterClosureAlert.cshtml")


                            <div class="col-xs-12">
                                <div class="col-lg-12">
                                    <h2 class="page-header page-header-change" style="border-bottom:5px solid #f9c751!important;color:#fff;">
                                        <i class="fa fa-clipboard"></i>&nbsp;Roster
                                    </h2>
                                </div>


                            </div>

                            <div class="col-xs-12">



                                <div class="col-xs-12">

                                    <div class="col-xs-12 glossy-panel-div" id="div-filter-section">


                                        <input type="hidden" id="isManager" value="@ViewBag.IsManager.ToString()" />




                                        <!---Center drop-down section-->
                                        <div class="form-group col-lg-5 col-sm-6 col-xs-12" id="div-center-dropdown">
                                            <label for="selectCenter" class="lbl-text">Center &nbsp;<sup>*</sup></label>


                                            @{

                                                var centerList = Fingerprints.Utilities.Helper.GetCentersByUserId(Session["UserId"].ToString(), Session["AgencyID"].ToString(), Session["RoleID"].ToString());
                                                if (centerList.Count == 2)
                                                {
                                                    centerList = centerList.Where(x => x.Value != "0").ToList();
                                                }
                                            }



                                            @Html.DropDownList("Centers", centerList, new { @class = "form-control glossy-select" })

                                        </div>




                                        <!---------Classroom drop down section----------->

                                        <div class="form-group col-lg-3 col-sm-6 col-xs-12">
                                            <label for="selectClassroom" class="lbl-text">Classroom </label>


                                            <select id="Classroom" class="form-control glossy-select"></select>

                                        </div>






                                        @if ((!ViewBag.IsManager && Session["RoleID"].ToString().ToLower() != "e4c80fc2-8b64-447a-99b4-95d1510b01e9") || Session["RoleID"].ToString().ToLower() == "a31b1716-b042-46b7-acc0-95794e378b26")
                                        {
                                            <div class="form-group col-lg-3 col-sm-6 col-xs-12">
                                                <label for="filterSelect" class="lbl-text">Filter By</label>

                                                @if (!ViewBag.IsManager && Session["RoleID"].ToString().ToLower() != "e4c80fc2-8b64-447a-99b4-95d1510b01e9")
                                                {

                                                    <select id="filterSelect" class="form-control glossy-select">
                                                        <option value="0">--Select--</option>
                                                        <option value="1">ABT</option>
                                                        <option value="2">TRN</option>
                                                        <option value="3">HOM</option>
                                                        <option value="4">ALL SFU</option>
                                                        <option value="5">SFU (Need Follow-up) </option>
                                                        <option value="6">SFU (Follow-up Completed) </option>
                                                    </select>

                                                }

                                                else if (Session["RoleID"].ToString().ToLower() == "a31b1716-b042-46b7-acc0-95794e378b26")
                                                {

                                                    <select id="filterSelect" class="form-control glossy-select">
                                                        <option value="0">--Select--</option>
                                                        <option value="4">ALL SFU</option>
                                                        <option value="5">SFU (Need Follow-up) </option>
                                                        <option value="6">SFU (Follow-up Completed) </option>
                                                    </select>

                                                }

                                            </div>
                                        }





                                        <div class="form-check col-lg-2 col-xs-12 glossy_btn" style="width: 127px;">
                                            <label for="btnLoadFamilyActivity" style="visibility:hidden;">Action</label>
                                            <button type="button" class="glossy-button-button button-green" id="btnsearch">
                                                <span class="glossy-button-after"></span>
                                                <span class="glossy-button-before"></span>
                                                Search
                                            </button>
                                        </div>

                                        <div class="form-check col-lg-2 col-xs-12 glossy_btn" style="width: 127px;">
                                            <label for="btnLoadFamilyActivity" style="visibility:hidden;">Action</label>
                                            <button type="button" class="glossy-button-button button-red" onclick="cleargrid();" id="btnclear">
                                                <span class="glossy-button-after"></span>
                                                <span class="glossy-button-before"></span>
                                                Clear
                                            </button>
                                        </div>

                                        @if (_isAccessLW)
                                        {


                                            <div class="form-check col-lg-2 col-xs-12 glossy_btn" style="width: 127px;">
                                                <label for="btnLoadFamilyActivity" style="visibility:hidden;">Action</label>
                                                <button type="button" class="glossy-button-button button-blue" style="display:none;" id="lwbtn">
                                                    <span class="glossy-button-after"></span>
                                                    <span class="glossy-button-before"></span>
                                                    LW
                                                </button>
                                            </div>
                                        }


                                    </div>
                                </div>

                                <div class="col-xs-12">

                                    <div class="glossy-panel-div col-xs-12" id="divGridRoster">
                                        <div class="col-xs-12 search-block-main" style="padding-bottom:5px;display:block; ">

                                            @if (ViewBag.IsManager)
                                            {
                                                <div class="glossy-search-block col-md-12" style="display:none;" id="searchByNameDiv">
                                                    <input type="text" onfocus="this.removeAttribute('readonly');" onblur="this.setAttribute('readonly','readonly');" placeholder="Search by Name" id="searchTextName" class="form-control" readonly="readonly">
                                                    <div class="glossy-search-btn-div">
                                                        <button id="searchbyNamebtn" data-search-item="">Search</button>
                                                    </div>
                                                </div>
                                            }



                                            <div class="col-lg-3 col-sm-12 col-xs-12" style="float:right;text-align:right;">


                                                <table class="col-md-12 table-striped total-details-table table-back-shadow">
                                                    <tbody>
                                                        <tr style="background-color: #f1f5f8;">
                                                            <td><label>Total Record(s)</label></td>
                                                            <td id="rosterCountLabel">18</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>



                                        <table class="col-md-12 glossy-table table-striped table-condensed" id="GridRoster">
                                            <thead>
                                                <tr>

                                                    <th style="cursor: pointer;">

                                                        <i class="fa fa-sort-alpha-asc i-asc" aria-hidden="true" style="color: #f9c751;display:inline-block;"></i>
                                                        <i class="fa fa-sort-alpha-desc i-desc" aria-hidden="true" style="color: #f9c751;display:none;"></i>


                                                        <span col-name="th1">Client</span>
                                                    </th>

                                                    <th style="width:1%;"></th>

                                                    <th style="cursor: pointer;width:6%;">
                                                        <span>Profile Picture</span>
                                                    </th>

                                                    @if (Session["Roleid"] != null && ((Session["Roleid"].ToString().Contains("94cdf8a2-8d81-4b80-a2c6-cdbdc5894b6d")) || (Session["Roleid"].ToString().Contains("a65bb7c2-e320-42a2-aed4-409a321c08a5"))))
                                                    {
                                                        <th style="width:8%;">


                                                            <span>Attendance Issue</span>
                                                        </th>
                                                    }

                                                    <th style="cursor: pointer;width:8%;">

                                                        <i class="fa fa-sort-alpha-asc i-asc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                        <i class="fa fa-sort-alpha-desc i-desc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                        <span col-name="th2">Classroom</span>
                                                    </th>





                                                    @if (ViewBag.IsManager)
                                                    {
                                                        <th style="width: 10%;cursor:pointer;">
                                                            <i class="fa fa-custom-sort-date-asc i-asc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                            <i class="fa fa-custom-sort-date-desc i-desc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                            <span col-name="th3" style="text-transform:none;">Date of Last Case Note</span>
                                                        </th>
                                                        <th style="width: 10%;cursor:pointer;">
                                                            <i class="fa fa-custom-sort-date-asc i-asc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                            <i class="fa fa-custom-sort-date-desc i-desc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                            <span col-name="th4" style="text-transform:none;"> Date of Last FPA</span>
                                                        </th>


                                                        <th style="width: 10%;cursor:pointer;">
                                                            <i class="fa fa-custom-sort-date-asc i-asc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                            <i class="fa fa-custom-sort-date-desc i-desc" aria-hidden="true" style="color: #f9c751;display:none;"></i>
                                                            <span col-name="th5" style="text-transform:none;"> Date of Last Referral</span>
                                                        </th>

                                                       
                                                        <th id="thSN" style="width: 24%;" role="columnheader">Services</th>
                                                    }

                                                    @if (Session["Roleid"] != null && ((Session["Roleid"].ToString().Contains("94cdf8a2-8d81-4b80-a2c6-cdbdc5894b6d")) || (Session["Roleid"].ToString().Contains("e4c80fc2-8b64-447a-99b4-95d1510b01e9"))))
                                                    {
                                                        <th style="cursor: pointer;">
                                                            <span>Services</span>
                                                        </th>
                                                    }


                                                </tr>
                                            </thead>
                                            <tbody class="glossy-table-body" id="table_body"></tbody>

                                        </table>
                                        <div id="div1" style="text-align:center;display:none;">
                                            <label>No result found.</label>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-xs-12" id="roster-pagination-div">



                                </div>


                            </div>

                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>




    @Html.Partial("~/Views/Partialviews/EnrollmentStatusChangePartial.cshtml")


    @*Modal Popup*@






    @* Attendance Issue Popup *@




    <div class="modal fade scroll-modal custom-modal" id="att-issue-modal" role="dialog" style="z-index:9999;">
        <div class="modal-dialog modal-dialog-ch">
            <div class="modal-content">

                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal"><img src="~/Content/CaseNote/images/close.png" /></button>
                    <h2 id="CaseNoteHeading" class="extra-title muted">Excessive Absences</h2>


                    <form id="formAttendanceIssue" enctype="multipart/form-data">

                        <div class="max_items_addn popup-addn-scroll">

                            <div class="col-xs-12 col-sm-12 adddivspace">
                                <div class="col-lg-2 col-xs-5" style="padding-left: 0;">
                                    <div class="enroll-sec" style="padding-left: 0;">
                                        <div class="transition-content-desc" style="position: relative;">
                                            <p style="background: none;border: none;font-weight:bold;">Client</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-7 col-sm-7">


                                    <div class="enroll-sec" style="padding-left: 0;">
                                        <div class="transition-content-desc" style="position: relative;">
                                            <p style="background: none;border: none;" id="lblatt-issue-client"></p>
                                            <input type="hidden" id="hiddenatt-issue-clientid" />
                                            <input type="hidden" id="hiddenatt-issue-programid" />
                                            <input type="hidden" id="hiddenatt-issue-householdid" />
                                            <input type="hidden" id="hiddenatt-issue-centerid" />
                                            <input type="hidden" id="hiddenatt-issue-classroomid" />
                                            <input type="hidden" id="hiddenatt-issue-yakkrid" />
                                        </div>
                                    </div>


                                </div>
                            </div>

                            <div class="col-xs-12 col-sm-12 adddivspace">
                                <div class="col-lg-2 col-xs-5" style="padding-left: 0;">
                                    <div class="enroll-sec" style="padding-left: 0;">
                                        <div class="transition-content-desc" style="position: relative;">
                                            <p style="background: none;border: none;font-weight:bold;">Parent(s)</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-6 col-sm-7">


                                    <div class="enroll-sec" style="padding-left: 0;">
                                        <div class="transition-content-desc table-responsive" style="position: relative;" id="div-atten-issue-parent">
                                            <table class="table table_size table-striped" id="tbl_attendanceissue_parent" role="table">
                                                <thead style="cursor:pointer;" role="rowgroup">
                                                    <tr role="row">
                                                        <th id="thIN" role="columnheader">Name<img id="imgthIN" style="visibility:hidden"> <input type="hidden" id="directionNA" value="Desc"></th>
                                                        <th id="thCust" role="columnheader">Phone<img id="imgthCust" style="visibility:hidden"> <input type="hidden" id="directionUN" value="Desc"></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="parent_table_body" role="rowgroup"></tbody>
                                            </table>
                                        </div>
                                    </div>


                                </div>

                                <div class="col-xs-12 col-lg-2 text-right">
                                    <button type="button" class="btn btn-danger" id="btnResetabsence">Reset Excessive Absences</button>
                                </div>
                            </div>




                            <div class="col-md-12 app_ada_main">
                                <h3 style="text-decoration:underline;text-align:center;">Services</h3>


                                <ul class="nav nav-tabs ride_deta">
                                    <li class="app_drag" id="att-caseNoteli" title="Add Case Note" data-toggle="tooltip"><a data-toggle="tab" href="#caseNoteDivAttIssue">CN</a></li>
                                    <li class="ada" id="att-homeVisitli" title="Schedule Home Visit" data-toggle="tooltip"><a data-toggle="tab" href="#ada" id="adaAnchor">HV</a></li>
                                    <li class="adaref" id="att-refli" title="Create Referral" data-toggle="tooltip"><a data-toggle="tab" href="#ada" id="adaAnchor">REF</a></li>
                                </ul>


                                <div class="tab-content">

                                    <div class="col-xs-12 col-lg-12 no-padding att-case-note-div" id="caseNoteDivAttIssue">

                                        <div class="col-xs-12">
                                            <button type="button" class="btn btn-primary text-right btn-show-cnotes" title="Click to view the existing case notes of excessive absences" data-toggle="tooltip" id="btnShowAttendanceIssueCaseNote">Show Case Notes</button>

                                            <button type="button" class="btn btn-primary text-right btn-show-cnotes" title="Click to view the existing case notes of excessive absences" data-toggle="tooltip" id="btnHideAttendanceIssueCaseNote" style="display:none;">Hide Case Notes</button>

                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-main" id="div_attendance_issue_cn" style="display:none;">
                                                <div class="col-xs-12 pull-right" style="float: right;text-align: right;">

                                                    <label class="col-xs-4 pull-right">Total Record:&nbsp;<span id="totalCountSpan_casenote" class="col-xs-3" style="float:right;color:#295b8f;">0</span> </label>


                                                </div>




                                                <div class="table-responsive col-xs-12 no-padding">
                                                    <table class="table table_size table-striped" id="tbl_attendanceissue_casenotes" role="table" style="margin-bottom:20px;">
                                                        <thead style="cursor:pointer;" role="rowgroup">
                                                            <tr role="row">
                                                                <th id="thIN" role="columnheader">Date<img id="imgthIN" style="visibility:hidden"> <input type="hidden" id="directionNA" value="Desc"></th>
                                                                <th id="thCust" role="columnheader">Title<img id="imgthCust" style="visibility:hidden"> <input type="hidden" id="directionUN" value="Desc"></th>
                                                                <th id="thRN" role="columnheader">By<img id="imgthRN" style="visibility:hidden"> <input type="hidden" id="directionRN"></th>
                                                                <th id="thAN" role="columnheader">Attachments<img id="imgthCN" style="visibility:hidden"><input type="hidden" id="directionCN" value="Desc"></th>
                                                                <th id="thSN" role="columnheader">References</th>
                                                                <th id="thSN" role="columnheader">
                                                                    Action
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="table_body" role="rowgroup"></tbody>
                                                    </table>


                                                    <div id="att-issue-pagination-div">

                                                    </div>

                                                </div>





                                            </div>


                                        </div>

                                        <div id="div-edit-caseNote" class="col-xs-12">

                                            <div id="caseNotSection">


                                                <div class="col-xs-12 col-lg-12" id="divCaseNoteSection">

                                                </div>


                                            </div>

                                            <div style="margin-bottom: 20px;margin-top:20px;" class="text-center col-xs-12">

                                                <button type="button" class="my-btn1" id="btn_att_issue_casenote_save" title="Click to save the case note" data-toggle="tooltip">Save</button>
                                                <button type="button" class="my-btn1" id="bn_att_issue_casenote_clear" title="Click to reset the form with default settings" data-toggle="tooltip">Clear</button>

                                            </div>

                                        </div>

                                        <div id="div-append-casenote">





                                            <div id="div-att-issue-append-casenote" class="col-xs-12 col-lg-12  no-padding">

                                            </div>

                                            <div style="margin-bottom: 20px;margin-top:20px;" class="text-center col-xs-12">

                                                <button type="button" class="my-btn1" id="btn_append_casenote_save" data-toggle="tooltip" title="Click to save appended case note">Save</button>
                                                <button type="button" class="my-btn1" id="btn_append_casenote_clear" data-toggle="tooltip" title="Click to reset the form with default settings">Clear</button>

                                                <button type="button" class="my-btn1" id="btn_append_casenote_back" data-toggle="tooltip" title="Click to return case note section">Back</button>

                                            </div>
                                        </div>

                                    </div>




                                    <div class="col-xs-12 col-lg-12 no-padding att-hv-div" id="homeVisitDivAttenissue">
                                        <h3 class="addapplicant"><i class="fa fa-book" aria-hidden="true"></i>&nbsp;Add Appointment</h3>

                                        <div class="col-xs-12 adddivspace" style="margin-top:15px;">



                                            <div class="col-xs-12">
                                                <label for="RaceId">Description <sup style="color: red">*</sup></label>

                                                <input type="text" name="Description" class="form-control txt-clear" id="Description" placeholder="Description" maxlength="50">
                                            </div>







                                            <div class="form-group col-xs-12 col-md-4 col-lg-3 adddivspace" style="margin-top:15px;">
                                                <label for="exampleInputEmail1">Select Date <sup style="color: red">*</sup></label>
                                                <div class='input-group'>
                                                    <input type='text' class="form-control txtseatdate txt-date txt-mandatory txt-clear" maxlength="12" placeholder="MM/DD/YYYY" id='seatsDatetimePicker2' />
                                                    <span class="input-group-addon datepicker-icon seats-icon" id="2" style="cursor:pointer;">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                </div>
                                                <input type="hidden" id="Days" />
                                            </div>


                                            <div class="col-xs-12 col-md-4 col-lg-3 form-group adddivspace" style="margin-top:15px;">

                                                <label for="exampleInputEmail1">From <sup style="color: red">*</sup></label><br />

                                                <div class="input-group col-xs-12">
                                                    <select name="StartTime" id="StartTime" class="txt-clear form-control" placeholder="From" onmousedown="if(this.options.length>5){this.size=5;}" onchange='this.size=0;' onblur="this.size=0;"></select>
                                                </div>
                                            </div>



                                            <div class="col-xs-12 col-md-4 col-lg-6 wrapper adddivspace" style="margin-top:15px;">
                                                <label for="exampleInputEmail1">Duration<sup style="color: red">*</sup></label><br />
                                                <div class="select-editable select-editable-ch col-xs-3">

                                                    <input type="hidden" id="EndTimeDuration" />

                                                    <select onmousedown="if (this.options.length > 5) { this.size = 5; this.style.zIndex = 1;}" onchange='this.size = 0; this.style.zIndex = 0; this.nextElementSibling.value=this.value' onblur="this.size=0;" size="1">
                                                        <option value="-1"></option>

                                                        <option value="00:30">00:30</option>

                                                        <option value="01:00">01:00</option>
                                                        <option value="01:30">01:30</option>
                                                        <option value="02:00">02:00</option>
                                                        <option value="02:30">02:30</option>
                                                        <option value="03:00">03:00</option>
                                                        <option value="03:30">03:30</option>
                                                        <option value="04:00">04:00</option>
                                                    </select>
                                                    <input type="text" name="hvHoursTxt" class="timeTextBox" placeholder="HH:MM" value="" maxlength="5" onblur="testTime(this);" />


                                                </div>

                                                <div class="col-lg-7 col-xs-12 duration-padding"><label class="duration-margin" style="color:#295b8f;margin:7px 0px;"><i class="fa fa-info-circle" aria-hidden="true"></i> Duration is editable</label></div>
                                            </div>

                                            <div class="col-xs-12 adddivspace" style="margin-top:15px;">
                                                <label for="RaceId">Notes</label>

                                                <textarea name="Description" style="vertical-align: top" class="form-control txt-clear" id="Notes" placeholder="Notes"></textarea>
                                            </div>







                                            <div class="clearfix"></div>
                                            <div class="text-center" style="margin-bottom: 20px; margin-top: 20px;">

                                                <button type="button" class="my-btn1 addSchedular" title="click to add appointment" data-toggle="tooltip" onclick="AddSchedulerDetails(this);">Save</button>
                                                <button type="button" class="my-btn1" title="Click to reset the appointment form" data-toggle="tooltip" onclick="clearHVSchedule(this);">Clear</button>
                                            </div>

                                        </div>














                                    </div>


                                    <div class="col-xs-12 col-lg-12 att-ref-div" id="refAttendanceIssueDiv">

                                        <div class="col-xs-12" id="refservriceAttendanceIssueDiv">
                                            <div class="col-xs-12 adddivspace" id="referralserviceSectionDiv">
                                            </div>

                                        </div>

                                        <div class="col-xs-12 servies_lst" id="refcatagoryattenissuediv">
                                        </div>


                                        <div class="col-xs-12 " id="refmathcprovidersattenissuediv">
                                        </div>


                                        <div class="col-xs-12" id="refcatagorycompanyattenissuediv">

                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-xs-12 bdr-popup"></div>
                            <div class="col-xs-12" style="margin-top:10px;margin-bottom:15px;">
                                <div class="btnwrp_subcal" style="padding:0; margin:0;">
                                    <button type="button" class="my-btn pull-right" data-dismiss="modal" style="background:#db4437;">Exit</button>
                                </div>
                            </div>
                        </div>

                    </form>

                </div>
            </div>
        </div>
    </div>




    @* Attendance Issue Popup *@





    <div class="modal fade" id="InformedLateArrival" role="dialog">
        <div class="modal-dialog">
            @*Modal content*@
            <div class="modal-content">
                <div class="modal-header">
                    <h4><label id="InformedLateArrivalClient" text="" /> </h4>
                </div>

                <div class="form-group">
                    <label class="control-label" style="width:180px!important;margin-left:75px!important" for="current_password">Expected Arrival Time:</label>
                    <p class="control-label" style="width:180px!important;margin-left:75px!important" id="lblArrivalTime" for="current_password"></p>
                </div>
                <div class="form-group">
                    <label class="control-label" style="width:180px!important;margin-left:75px!important" for="current_password">Reason:</label>
                    <p class="control-label" style="width:180px!important;margin-left:75px!important" id="lblReasonForLate" for="current_password"> </p>
                </div>
                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="my-btn1">Close</button>
                </div>
            </div>
        </div>
    </div>



    <div class="modal fade" id="MyModalLateArrival" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body">

                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><img src="/Content/CaseNote/images/close.png"></button>
                        <h3 style="color: #fff;font-size:18px;margin:0;"><label id="childlbl" text="" style="width:auto;" /> </h3>
                    </div>

                    <div class="col-xs-12 chk-box-ch">
                        <div class="fa-checkbox">
                            <input type="checkbox" id="checkbox1" name="checkbox-type" value="Mark Late Arrival" style="display:none;" class="abtCheckbox">
                            <label for="checkbox1" style="color:#fff;font-size:18px;text-align:center;margin-bottom:12px;">Late arrival</label>
                        </div>
                    </div>
                    <div id="divForLateArrival" style="display:none;">
                        <div class="modal-content-ic">
                            @using (Html.BeginForm("SaveCaseNotes", "Roster", FormMethod.Post, new { enctype = "multipart/form-data" }))
                            {

                                <input type="hidden" name="CaseNoteClientId" id="CaseNoteClientId" />
                                <input type="hidden" name="CaseNoteHouseHoldId" id="CaseNoteHouseHoldId" />


                                <div class="max_items_addn popup-addn-scroll">

                                    <div class="col-xs-12 addn-al" style="padding: 0;">
                                        <div class="col-sm-4">
                                            <div class="addn-poup-div">
                                                <label>Date <sup style="color:red">*</sup></label>
                                            </div>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="addn-poup-div1">
                                                <input type="text" id="CaseNoteDate" name="CaseNoteDate" placeholder="MM/DD/YYYY" class="form-control ui-autocomplete-input" readonly />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 addn-al" style="padding: 0;">
                                        <div class="col-sm-4">
                                            <div class="addn-poup-div">
                                                <label>Title <sup style="color:red">*</sup></label>
                                            </div>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="addn-poup-div1">
                                                <input type="text" maxlength="100" id="CaseNoteTitle" name="CaseNoteTitle" class="form-control ui-autocomplete-input" readonly />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 addn-al" style="padding: 0;">
                                        <div class="col-sm-4">
                                            <div class="addn-poup-div">
                                                <label>Note <sup style="color:red">*</sup></label>
                                            </div>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="addn-poup-div1">
                                                <textarea id="Note" name="Note" class="form-control txt-clear"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 addn-al" style="padding: 0;">
                                        <div class="col-sm-4">
                                            <div class="addn-poup-div">
                                                <label>Tags <sup style="color:red">*</sup> </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="addn-poup-div1">
                                                <input type="text" id="CaseNotetags" name="CaseNotetags" style="height:80px!important" class="txt-clear form-control ui-autocomplete-input" />
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="modal-footer" style="width:100%;margin-top:  10px;padding: 7px 0;float: left;width: 100%;">
                                    <button class="btnPassword" id="submitCaseNote" style="background-color: #2ecc71;padding: 8px;" type="submit" value="Submit" onclick="return Validatecasenote();">Submit</button>
                                    <button class="btnPassword" id="btnCancelPassword1" style="background-color: #db4437;padding: 8px;" type="button" data-dismiss="modal">Exit</button>
                                </div>
                            }
                        </div>
                    </div>

                    <div id="divForAbsence" style="display:none;">
                        @using (Html.BeginForm("CheckIn", "Roster", FormMethod.Post))
                        {
                            <!-- Modal content-->
                            <div class="divabsense">
                                <input type="hidden" name="childid" id="childid" value="" />
                                <input type="hidden" name="childname" id="childname" value="" />

                            </div>


                            <div class="max_items_addn popup-addn-scroll">
                                <div class="modal-content-ic">
                                    <div id="divAbsenceTypeList">
                                        <div class="col-xs-12 addn-al" style="padding: 0;">
                                            <div class="col-sm-5">
                                                <div class="addn-poup-div">
                                                    <label>Attendance Type  <sup style="color:red">*</sup> </label>
                                                </div>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="addn-poup-div1">
                                                    @Html.DropDownList("AbsentType", new SelectList(Model.AbsenceTypeList, "Value", "Text"), new { @class = "form-control", @style = "width:70%;", @required = "required" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="divAbsenceNoShow" style="display:none;">
                                        <div class="col-xs-12 addn-al" style="padding: 0;">
                                            <div class="col-md-12 col-sm-12">
                                                <div class="addn-poup-div1">
                                                    <label style="width:44%;float:left;"></label>
                                                    <label style="text-align:  left;width: 56%;float:left;color: #163b69;font-weight: 400;font-size: 15px;">*&nbsp; No contact from parent</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="divAbsenceReasonList" style="display:none;">
                                        <div class="col-xs-12 addn-al" style="padding: 0;">
                                            <div class="col-sm-5">
                                                <div class="addn-poup-div">
                                                    <label>Absent Reason  <sup style="color:red">*</sup> </label>
                                                </div>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="addn-poup-div1">

                                                    @Html.DropDownList("ReasonList", new SelectList(Model.AbsenceReasonList, "ReasonId", "Reason"), new { @class = "form-control", style = "width:70%;" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="divNewReason" style="display:none;">
                                        <div class="col-xs-12 addn-al" style="padding: 0;">
                                            <div class="col-sm-5">
                                                <div class="addn-poup-div">
                                                    <label>Other Reason <sup style="color:red">*</sup> </label>
                                                </div>
                                            </div>
                                            <div class="col-sm-7">
                                                <div>
                                                    <input type="text" name="txtNewReason" id="txtNewReason" style="width: 70%;" class="txt-clear form-control" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="modal-footer" style="width:100%;display:  inline-block;margin-top:  10px;padding: 7px 0;float: left;width: 100%;">
                                        <button class="btnPassword" style="background-color: #2ecc71;padding: 8px;" id="Attendancesubmit" type="submit" value="Submit" onclick="return isValidInfo();">Submit</button>
                                        <button class="btnPassword" id="btnCancelPassword" style="background-color:#db4437;padding: 8px;" type="button" data-dismiss="modal">Exit</button>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!--no home modal-->





    <div class="modal fade in" id="screeningFollowupModal" role="dialog" style="display: none;background: rgba(0,0,0,0.7);overflow:auto;">
        <div class="modal-dialog income-popup width-auto">


            @using (Html.BeginForm("SaveScreeningAjax", "AgencyUser", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="text-center" style="margin:0;">Screening Follow-Up<span class="extra-title muted"></span></h3>
                    </div>
                    <div class="control-group">
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-main">
                                <div class="add-useragform">
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 add-useragform">
                                        <div class="col-lg-6 col-md-6 col-sm-12">
                                            <div class="form-group datepicker-days">
                                                <label>Child Name </label>
                                                <div class="date custom-time">
                                                    <input class="form-control" type="text" id="scrClientName" readonly="readonly" value="">
                                                    <input type="hidden" name="programId" id="programId" />
                                                    <input type="hidden" name="encClientID" id="encClientID" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-lg-6 col-md-6 col-sm-12">
                                            <div class="form-group">
                                                <label for="pwd">Screening Name <sup>*</sup></label>
                                                <input value="02/09/2014" id="clientdob" type="hidden">
                                                <select class="form-control" id="ScreeningSelect" name="Screeningid">
                                                    <option value="1">30 Day Physical</option>
                                                    <option value="3">45 Day Hearing</option>
                                                    <option value="2">45 Day Vision</option>
                                                    <option value="5">90 Day Dental</option>
                                                </select>

                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="form-group text-center">
                                                <button id="btnsearch" type="button" class="my-btn" onclick="Getscreeningtemplate();">Load</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div id="screeningfollowDiv" style="margin-top:20px;"></div>


                        <div class="row" id="saveScreening" style="display:none;">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding: 0 30px;">
                                <div class="btnwrp_subcal">
                                    <button id="btnSubmitScreeningFollow" tabindex="16" value="Householdbutton" onclick="" class="my-btn" type="submit">Save</button>
                                    <button id="btnCancelScreeningfollow" tabindex="17" class="my-btn" data-dismiss="modal" type="button">Exit</button>
                                    <input id="FamilyHousehold_HouseholdId" type="hidden" name="FamilyHousehold.HouseholdId" value="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>



    <div id="statusChangeDiv"></div>

    <!-- Modal popup -->
    <!-- Modal -->
    <div class="modal fade" id="mytransition" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">New Program year Transition</h4>
                </div>
                <div class="modal-body">

                    <div class="edu-testnewborn">
                        <p><strong>Note:</strong>  TestNewBorn will be transition to HS program, with next program year.</p>
                        <div class="form-group eduicc-trans radio radio-info">
                            <p>Parent indicated testnewborn will return next program year</p>
                            <span><input type="radio" name="tranpart-quest"><label>Yes</label></span>
                            <span><input type="radio" name="tranpart-quest"><label>No</label></span>
                            <span><input type="radio" name="tranpart-quest"><label>May be</label></span>
                            <span><input type="radio" name="tranpart-quest"><label>No Answer</label></span>

                        </div>

                        <div class="form-group eduicc-trans radio radio-info">
                            <p>Is the partent is ready for transition</p>
                            <span><input type="radio" name="tranpart"><label>Yes</label></span>
                            <span><input type="radio" name="tranpart"><label>No</label></span>
                        </div>

                        <div class="col-xs-12 col-sm-12 no-padding" style="margin-bottom: 10px;">
                            <div class="col-lg-5 col-xs-5" style="padding-left: 0;">
                                <div class="enroll-sec" style="padding-left: 0;">
                                    <div class="transition-content-desc" style="position: relative;">
                                        <p class="pir-q-p" style="font-weight: 600;padding-left:0;">Insurance Type</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-7 col-xs-7">

                                <div class="transition-radio-btn enroll-sec margin-enroll" id="InsuranceTypeID" style="margin-left:0px;">
                                    <div class="col-xs-12 no-padding">
                                        <div class="radio radio-info">
                                            <input type="radio" name="InsType" id="MedicareInsurance" class="InsuranceType" value="C1A2">
                                            <label>Medicare / Chip</label>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 no-padding">
                                        <div class="radio radio-info">
                                            <input type="radio" name="InsType" id="NoInsurance" class="InsuranceType" value="C2">
                                            <label>No Insurance</label>
                                        </div>
                                    </div>


                                    <div class="col-xs-12 no-padding">
                                        <div class="radio radio-info">
                                            <input type="radio" name="InsType" id="OtherInsurance" class="InsuranceType" value="C1D2">
                                            <label>Other Insurance</label>
                                        </div>
                                        <div class="col-lg-6" style="display:none;">
                                            <label style="color: #163b69;font-size: 14px;font-weight: normal;"><i>Please Specify</i></label>
                                            <input type="text" class="form-control" id="PregOtherInsuranceType" value="">
                                        </div>

                                    </div>

                                    <div class="col-xs-12 no-padding">
                                        <div class="radio radio-info">
                                            <input type="radio" name="InsType" id="PrivateInsurance" class="InsuranceType" value="C1C2">
                                            <label>Private Health Insurance</label>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 no-padding">
                                        <div class="radio radio-info">
                                            <input type="radio" name="InsType" id="StateInsurance" class="InsuranceType" value="C1B2">
                                            <label>State Insurance</label>
                                        </div>

                                        <button type="button" class="btn btn-primary btn-accept" id="btnAcceptInsurance">Accept</button>
                                        <i class="fa fa-check" aria-hidden="true" style="padding-left:8px;font-size:15px;color:green;display:none;"></i>
                                    </div>



                                </div>

                                <div class="err-container col-xs-12  irr-error" style="padding:0;">
                                    <span class="err-message err-message-instype">Insurance type is required</span>
                                </div>

                            </div>
                        </div>
                        <div class="bootstrap-dialog-footer edu-transition">
                            <b>Click OK to start Transition</b>
                            <div class="bootstrap-dialog-footer-buttons"><button class="btn btn-default" id="5e98c754-3e54-48aa-8bea-7d6f81b08357">Cancel</button><button class="btn btn-primary" id="4269edf6-7900-43e5-ae31-3354fafb7612">OK</button></div>
                        </div>
                    </div>

                </div>

            </div>

        </div>
    </div>
    @Html.Partial("~/Views/Partialviews/InternalReferral.cshtml")
    <!-- Modal popup -->
    <!-----Reviews Modal-->
    <div class="modal fade" id="reviewlist-modal" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header" style="border-bottom:none;margin-bottom:0;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="">Review List</h4>
                </div>

                <div class="modal-body">


                </div>


            </div>

        </div>
    </div>



    <!-----Modal start-->
    <div id="myModalOrganization" class="modal fade" role="dialog">
        <div class="modal-dialog modal-dialog-width">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header modal-bdr">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"><strong>Referral Information</strong></h4>
                </div>
                <div class="modal-body col-xs-12">

                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Organization Name:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="refferedtomodal" class="refer-modal" style="font-weight:bold"></div>
                        </div>
                    </div>

                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Resource Name:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="resourceNamemodal" class="refer-modal"></div>
                        </div>
                    </div>
                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Address:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="streetModal" class="refer-modal" style="display: inline-block;"></div><div id="cityModal" class="refer-modal" style="display: inline-block;padding:0 5px;"></div><div id="stateModal" class="refer-modal" style="display: inline-block;"></div>
                        </div>
                        <div class="col-xs-5"></div>
                        <div class="col-xs-7">

                        </div>
                        <div class="col-xs-5"></div>
                        <div class="col-xs-7">

                        </div>

                    </div>

                    <div class="col-xs-12" style="padding-top:20px;">
                        <div class="col-xs-5"><div class="h5"><strong>Phone Number:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="phonenoModal" class="refer-modal"></div>
                        </div>
                    </div>
                    <div class="col-xs-12" style="padding-top:7px;">
                        <div class="col-xs-5"><div class="h5"><strong>Email:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="emailModal" class="refer-modal"></div>
                        </div>
                    </div>

                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5" style="padding-top:0px;"><div class="h5"><strong>Service Resources:</strong></div></div>
                        <div class="col-xs-7" style="padding-top:0px;">
                            <div id="serviceModal" class="refer-modal"></div>
                        </div>
                    </div>

                    <div class="col-xs-12" style="padding-top:20px;">
                        <div class="col-xs-5" style="padding-top: 7px;">
                            <strong>Business Hours:</strong>
                        </div>
                        <div class="col-xs-7">

                            <div class="center-block">
                                <table style="margin:0;width:100%;">
                                    <tr>
                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>HOURS</td>

                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>MON</td>

                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>TUE</td>

                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>WED</td>

                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>THU</td>

                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>FRI</td>

                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>SAT</td>

                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>SUN</td>

                                    </tr>
                                    <tr>
                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>FROM</td>
                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="monFrmHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="tueFrmHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="wedFrmHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="thuFrmHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="friFrmHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="satFrmHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="sunFrmHours"></td>
                                    </tr>
                                    <tr>
                                        <td style='border: 1px solid #ddd;color: #f4f8fa;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#337ab7;'>TO</td>
                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="monToHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="tueToHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="wedToHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="thuToHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="friToHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="satToHours"></td>

                                        <td style='border: 1px solid #ddd;color: #333;text-transform: none;font-size: 14px;text-decoration: none;font-family: Arial, Helvetica, sans-serif;font-weight: 400;text-align: center;padding: 5px;height:24px;background:#fff;' id="sunToHours"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>



                    </div>

                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Gender Served:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="genderservedModal" class="refer-modal"></div>
                        </div>
                    </div>

                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Ages Served:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="ageservedModal" class="refer-modal"></div>
                        </div>
                    </div>
                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Fees:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="feesModal" class="refer-modal"></div>
                        </div>
                    </div>
                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Payment Options:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="paymentsModal" class="refer-modal"></div>
                        </div>
                    </div>
                    <div class="col-xs-12" style="padding-top:10px;">
                        <div class="col-xs-5"><div class="h5"><strong>Do you need an appointment?:</strong></div></div>
                        <div class="col-xs-7">
                            <div id="appointmentModal" class="refer-modal"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-top: 15px;">Close</button>
                </div>
            </div>

        </div>
    </div>
    <!---Modal end-->

    <div class="modal fade" id="updateChangeModalAlert" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header" style="border-bottom:none;margin-bottom:0;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="updatealert"></h4>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" id="updatealertConfirm">Confirm</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" id="updatealertCancel">Cancel</button>
                </div>
            </div>

        </div>
    </div>

    @{
        Html.RenderPartial(Url.Content("~/Views/Partialviews/_FileInput_CameraUploadPartial.cshtml"));
    }



    @{
        Html.RenderPartial(Url.Content("~/Views/Partialviews/_MultipleCameraUploadPartial.cshtml"));
    }


    @*  Child Attendance info pop-up Start   *@


    <div class="modal fade scroll-modal custom-modal in" id="modal-attendance-details" role="dialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-dialog-ch">
            <div class="modal-content">
                <div class="modal-body">
                    <h2 id="CaseNoteHeading" class="extra-title muted">Attendance Details </h2>
                    <button type="button" class="close" data-dismiss="modal"><img src="/Content/CaseNote/images/close.png"></button>


                    <div class="max_items_addn popup-addn-scroll">

                        <div class="form-group col-xs-12">

                            <h3 id="lbl-popup-client" class="addapplicant" style="padding-top:25px;color:#333;text-shadow: 2px 5px 6px #999393;"></h3>
                        </div>

                        <div class="col-xs-12">

                            <div class="form-group col-lg-3 col-sm-6 col-xs-12">
                                <label for="fromAttendanceDate" style="color:#295b8f;text-transform:none;">Date <sup style="color:red;">*</sup></label>

                                <div class='input-group date'>
                                    <input type='text' class="form-control glossy-date-input txtseatdate txt-date txt-mandatory " maxlength="12" placeholder="MM/DD/YYYY" id='seatsDatetimePicker1' />
                                    <span class="input-group-addon datepicker-icon seats-icon" id="1" style="cursor:pointer;">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>

                            </div>


                            <div class="form-check col-lg-2 col-xs-12 glossy_btn" style="width: 127px;">
                                <label for="exampleInputPassword1" style="visibility:hidden;">Action</label>
                                <button type="button" class="glossy-button-button button-green" id="btnLoadAttendance">
                                    <span class="glossy-button-after"></span>
                                    <span class="glossy-button-before"></span>
                                    Load
                                </button>
                            </div>
                        </div>

                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding-top:20px;">
                            <div class="col-xs-12" id="div-attendance-section">
                                <div class="attendance-details-section col-xs-12" id="attendance-details-section">

                                    <div class="col-xs-12 glossy-panel-div table-back-shadow text-center" style="padding:25px;">
                                        <span class="col-xs-12">Search by Filter <sup style="color:red;">*</sup></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    @* Child Attendance info pop-up End *@


}







