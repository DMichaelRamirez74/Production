<script type="text/javascript">

    // for nREF internal referral
    var cid;
    function SetDataForNREF(ele) {
    
        cleanValidation();
      
        var $modal = $(ele).closest('.modal');

        var currentId = $modal.find('#nREF_caseNote_div').find('#divCaseNoteSection').attr('data-current-id');

        $('#RolesDiv').css("background-color", "");


        //Case Note Section//
        if ($modal.find('.roletype:checked').length == 0) {
            plainValidation($modal.find('#RolesDiv'));
            customAlert('Please select developmental team role');
            return false;

        }
        if ($modal.find('#txtNotes').val() == "") {
       
            plainValidation($modal.find('#txtNotes'));
            customAlert('Please enter notes');
            return false;
        }

        var result = $('#ModalInternalReferral').find('#nREF_caseNote_div').ApplinkCaseNote("caseNoteValidation");

        if (!result)
        {
            return false
        }

        if ($('#yakkrcode').val() == "700") {
            saveTransportation();
        }
        var clientArray = [];

        $.each($modal.find('#divCaseNoteClients_'+currentId+'').find('input[type=checkbox]:checked'), function () {

            clientArray.push($(this).val());

        });


        /

        var cameraDocumentsArray = [];

        $modal.find('#divCaseNoteSection').find('#caseNoteAttachmentsDiv_' + currentId + '').find('input:file').each(function (a, b) {
            var fileInput = $(this);

            if (fileInput.val() != undefined && fileInput.val() != null && fileInput.val() != '') {
                var fileUpload = fileInput.get(0);
                var files = fileUpload.files;

                for (var i = 0; i < files.length; i++) {


                    var convImage = fileInput.attr('conv-img');

                    if (convImage != null && convImage != "")
                        cameraDocumentsArray.push({ AttachmentFileName: files[i].name, AttachmentFileExtension: '.' + files[i].name.split('.')[files[i].name.split('.').length - 1], AttachmentJson: convImage });


                }
            }
        });



        var $cameraDocuments = $modal.find('#divCaseNoteSection').find(".div-edit-gallery_"+currentId+"").find('.setup_viewscreen');



        if ($cameraDocuments.length > 0) {

            $.each($cameraDocuments, function (j, doc) {

                var $doc = $(doc).find('img');
                cameraDocumentsArray.push({ AttachmentFileName: 'CaseNoteDocument', AttachmentFileExtension: '.png', AttachmentJson: getBase64Image($doc) });

            });
        }


        $modal.find('input:hidden[name="cameraUploads"]').val(JSON.stringify(cameraDocumentsArray));



        var internalReferral={
            ClientId:$modal.find('input:hidden[name="ClientId"]').val(),
            CenterId:$modal.find('input:hidden[name="CenterId"]').val(),
            ClassroomId: $modal.find('input:hidden[name="ClassroomId"]').val(),
            HouseholdId:$modal.find('input:hidden[name="HouseholdId"]').val(),
            CaseNoteId:'0',
            YakkrCode:$modal.find('#yakkrcode').val() ,
            RoleId:$modal.find('.roletype:checked').val(),
            ProgramId:$modal.find('input:hidden[name="ProgramId"]').val()
        }

        var caseNote={

            ClientId:$modal.find('input:hidden[name="ClientId"]').val(),
            CenterId: $modal.find('input:hidden[name="CenterId"]').val(),
            Classroomid:$modal.find('input:hidden[name="ClassroomId"]').val(),
            CaseNoteid:'0',
            ProgramId:$modal.find('input:hidden[name="ProgramId"]').val(),
            HouseHoldId:$modal.find('input:hidden[name="HouseholdId"]').val(),
            Note:$modal.find('#txtareaCaseNote_'+currentId+'').val(),
            CaseNoteDate:$modal.find('#txtCaseNoteDate_'+currentId+'').val(),
            CaseNoteSecurity:$modal.find('#checkboxSecureNote_'+currentId+'').is(':checked'),
            CaseNotetags:$modal.find('#txtCaseNoteTags_'+currentId+'').val().trim(','),
            CaseNoteTitle:$modal.find('#txtCaseNoteTitle_'+currentId+'').val(),
            ClientIds:clientArray.join(','),
            StaffIds:'',
            IsLateArrival:false,
            CaseNoteAttachmentList:cameraDocumentsArray
            
        }


        $.ajax({

            url: '/Home/SaveInternalReferral',
            dataType: 'JSON',
            type: 'POST',
            contentType: 'application/json',
            beforeSend:function(){
                $('#spinner').show();
            
            },
            data: JSON.stringify({ internalReferral: internalReferral, caseNote: caseNote }),
            success:function(data)
            {

                if(data)
                {
                    customAlert('Record saved successfully');
                    $modal.modal('hide');
                }
                else {
                    customAlert('Error occurred. Please, try again later.')
                }

            },
            error:function(data)
            {
                customAlert('Error occurred. Please, try again later.')

            },
            complete:function(data)
            {
                $('#spinner').hide();
            }


        });

    }

    function OnSelectRoles(arg) {

        var $modal = $(arg).closest('.modal');

        $('#transportation').modal('hide');
        $('.check1').prop('checked', false);

        var $guid = $modal.find('#divCaseNoteSection').attr('data-current-id');

        $modal.find('#txtCaseNoteTags_'+$guid+'_tagsinput').find('.tag').remove();
        $modal.find('#txtCaseNoteTags_'+$guid+'').importTags("nREF,,;");
        $modal.find("#txtCaseNoteTitle_"+$guid+"").val("Internal Referral");
        $modal.find('#chkYakkrDiv').show();
        Closetransportaion();
        if ($modal.find('.roletype:checked').val() == '699168ac-ad2d-48ac-b9de-9855d5dc9af8') {
            $modal.find('#yakkrcode').prop('checked', true);
            $modal.find('#yakkrcode').val("310");
            $modal.find('#lblyakkrcode').text("Yakkr - 310 (Child has suspected mental health issue)");
            $modal.find('#txtCaseNoteTags_'+$guid+'').addTag('Y310');
            $modal.find("#txtCaseNoteTitle_"+$guid+"").val("Mental Health Referral")
        }

        else if ($modal.find('.roletype:checked').val() == '6ed25f82-57cb-4c04-ac8f-a97c44bdb5ba') {
            $modal.find('#yakkrcode').prop('checked', true);
            $modal.find('#yakkrcode').val("700");
            $modal.find('#lblyakkrcode').text("Yakkr - 700 (Child request transportation)");
            $modal.find('#txtCaseNoteTags_'+$guid+'').addTag('Y700');
            $('#transportation').modal('show');
            TransportationNeeded();
        }
        else if ($modal.find('.roletype:checked').val() == '047c02fe-b8f1-4a9b-b01f-539d6a238d80') {
            $modal.find('#yakkrcode').val("304");
            $modal.find('#lblyakkrcode').text("Yakkr - 304 (Child has an indicated disability after Enrollment)");
            $modal.find('#txtCaseNoteTags_'+$guid+'').addTag('Y304');
            $modal.find('#yakkrcode').prop('checked', true);
        }
        else {
            $modal.find('#yakkrcode').prop('checked', true);
            $modal.find('#yakkrcode').val("292");
            $modal.find('#lblyakkrcode').text("Yakkr - 292 (Internal Referral)");
            $modal.find('#txtCaseNoteTags_'+$guid+'').addTag('Y292');
        }
    }


    function AddTags(arg) {

        var $modal = $(arg).closest('.modal');

        if ($(arg).prop('checked') == true) {
            $modal.find('#txtCaseNoteTags').addTag($(arg).val());
        }
        else {
            $modal.find('#txtCaseNoteTags').removeTag($(arg).val());
        }

    }

    function AddCaseNote(arg) {
        $('.divReferTo').hide();
        $('#Modalclientenrolled').modal('hide');
        $('.internal_reference').css("overflow", 'auto');
        cid = $(arg).attr('EClientId');

        var $modal = $('#ModalInternalReferral');
        $modal.find('#lblClientName').text($(arg).attr('data-CName'));
        $modal.find('#lblCenterName').text($(arg).attr('data-centername'));
        $modal.find('#lblClassroom').text($(arg).attr('data-classroom'));
        $modal.find('input:hidden[name="ClassroomId"]').val($(arg).attr('data-classroomid'));
        $modal.find('input:hidden[name="CenterId"]').val($(arg).attr('data-centerid'));
        $modal.find('input:hidden[name="ClientId"]').val($(arg).attr('eclientid'));
        $modal.find('input:hidden[name="HouseholdId"]').val($(arg).attr('data-householdid'));
        $modal.find('input:hidden[name="ProgramId"]').val($(arg).attr('data-programid'));
        $.ajax({
            url: HostedDir + "/Home/GetInternalRefDetails",
            type: "POST",
            dataType: "json",
            data: {
                ClientId: $(arg).attr('eclientid')
            },
            secureuri: false,
            async: false,
            success: function (data) {
                if (data != null) {
                    $modal.find('#DivAppendRoles').empty();

                    var divContent = '  <div class=" col-lg-6 col-xs-12 internal_reference_radiobtn no-padding">\
                                                            <div class="radio radio-info">\
                                                                <input type="radio" id=idinput name="RoleId"  onchange="OnSelectRoles(this);" class="roletype" value="NewValue">\
                                                                <label for=forlabel>LabelContent</label>\
                                                            </div>\
                                                        </div>';
                    for (var i = 0; i < data.RoleList.length; i++) {
                        var result = "";
                        result = result + divContent;
                        result = result.replace("LabelContent", data.RoleList[i].RoleName);
                        result = result.replace("idinput", 'input_' + i.toString());
                        result = result.replace("forlabel", 'input_' + i.toString());
                        result = result.replace("NewValue", data.RoleList[i].RoleId);
                        $modal.find('#DivAppendRoles').append(result);
                    }
                    if (data.AssignedRoles != null && data.AssignedRoles != "") {
                        $modal.find('.divReferTo').show();
                        $modal.find('#spnReferTo').text('This client already referred to ' + data.AssignedRoles)
                    }


                    getCaseNoteSectionPartial($modal, $(arg).attr('eclientid'));

                }
            }
   , error: function (data) {
       customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
   }
        });


        $modal.find('#yakkrcode').find('input:checkbox').prop('checked', false);
        $modal.find('#chkYakkrDiv').hide();
        $modal.find('#FirstFile').val('');
        $modal.find('#txtNotes').val('');

        $modal.modal({
            backdrop: 'static',
            keyboard: false
        });
    }

    function getCaseNoteSectionPartial($modal, clientId) {


        var $caseNoteDiv = $modal.find('#nREF_caseNote_div');
       

     
        $caseNoteDiv.ApplinkCaseNote({
            isPopup: false,
            isSection: true,
            caseNoteType: 1,   //1- New 2- Edit / 3- Append //
            getCaseNoteUrl: HostedDir + "/Roster/GetCaseNoteSectionPartial",
            caseNoteId: 0,
            householdId: 0,
            clientId: clientId,
            isEditable: true,
            isShowSubmitButton: false,
            isShowExportIcon: false,
            forceLoad: true,

            modalOnShown: function (element) {

            },
            ajaxComplete: function (element) {
               
                var $guid = element.find('#divCaseNoteSection').attr('data-current-id');

                element.css({ 'margin-left': '-25px', 'padding': '0px' });

                element.find('#txtCaseNoteTags_'+$guid+'').importTags('nREF');

                CKEDITOR.instances['txtareaCaseNote_'+$guid+''].setData('');

                element.find('#txtCaseNoteTitle_' + $guid + '').val('Internal Referral');

                element.find('#txtCaseNoteDate_' +$guid+ '').mask("99/99/9999", { placeholder: 'MM/DD/YYYY' });

                element.find('#txtCaseNoteDate_' + $guid + '').val(getFormattedDateNumber(new Date()));

                element.find('#txtCaseNoteDate_' + $guid + '').prop('disabled', false);

                element.find('.img-camera').attr('target-id', 'nREF_caseNote_div');

                element.css('border', 'unset!important');

                element.find('#divCaseNoteStaffs_'+$guid+'').parent('div').hide();
            

                element.find('#divCaseNoteClients_' + $guid + '').find('input:checkbox').each(function () {


                
                    if ($(this).next('label').html().indexOf($('#ModalInternalReferral').find('#lblClientName').html()) > -1 || $(this).next('label').html().indexOf('Parent') > -1) {
                        $(this).prop('checked', true);
                    }
                    else {
                        $(this).parent('div').hide();
                    }
                });

                showCameraOption(element);

                element.find('#uploadImageCamera').hide();

                setIntervalUserMedia(element);
            }

        });

       


      
    }

  

    function UpdateCaseNoteContent(arg) {

      var $guid=  $(arg).closest('.modal').find('#divCaseNoteSection').attr('data-current-id');
      CKEDITOR.instances['txtareaCaseNote_'+$guid+''].setData($(arg).val());
    }

    // nREF End

    //transpotation

    function TransportationNeeded() {
       
        $.ajax({
            dataType: 'json',
            type: "POST",
            async: false,
            url: "/AgencyUser/GetTransportationDetails",
            data: { 'ClientId': cid },
            success: function (data) {
               
                var result = JSON.parse(data);
                if (result.length > 0) {
                    $('.transportation-id').val(result[0].Id);
                    if (result[0].PickupStatus == true) {
                        $('.pickup-details').hide();
                        $('#rdEmailYes').prop('checked', true);
                        $('#txtPickupAddress').val("");
                        $('#txtPickupZipcode').val("");
                    }
                    else {
                        $('.pickup-details').show();
                        $('#rdEmailNo').prop('checked', true);
                        $('#txtPickupAddress').val(result[0].PickupAddress);
                        $('#txtPickupZipcode').val(result[0].PickupZipcode);
                    }
                    if (result[0].DropStatus == true) {
                        $('.drop-details').hide();
                        $('#rdPrintYes').prop('checked', true);
                        $('#txtDropAddress').val("");
                        $('#txtDropZipcode').val("");
                    }
                    else {
                        $('.drop-details').show();
                        $('#rdPrintNo').prop('checked', true);
                        $('#txtDropAddress').val(result[0].DropAddress);
                        $('#txtDropZipcode').val(result[0].DropZipcode);
                    }
                }
                $('#transportation').modal('show');
            },
            error: function (data) {
            }
        });
    }

    function Pickup(arg) {
        if (arg.value == "0")
            $('.pickup-details').show();
        else
            $('.pickup-details').hide();
        $('#txtPickupAddress').val("");
        $('#txtPickupZipcode').val("");
    }

    function Drop(arg) {
        if (arg.value == "0")
            $('.drop-details').show();
        else
            $('.drop-details').hide();
        $('#txtDropAddress').val("");
        $('#txtDropZipcode').val("");
    }
    function Closetransportaion() {

        $('#transportation').modal('hide');
        $('#txtPickupAddress').val("");
        $('#txtPickupZipcode').val("");
        $('#txtDropAddress').val("");
        $('#txtDropZipcode').val("");
        $('#rdEmailYes').prop('checked', true);
        $('#rdPrintYes').prop('checked', true);
        $('#divTransportation').hide();
    }

    function SetAddress() {
        var isAllow = true;
        if ($('.Pickup:checked').val() == undefined) {
            isAllow = false;
            customAlert("Select pickup option");

        }
        else if ($('.Pickup:checked').val() == "0") {
            if ($('#txtPickupAddress').val() == "") {
                isAllow = false;
                customAlert("Enter pickup address");
            }
            else if ($('#txtPickupZipcode').val() == "") {
                isAllow = false;
                customAlert("Enter pickup zipcode");
            }
        }
        if ($('.Drop:checked').val() == undefined && isAllow) {
            isAllow = false;
            customAlert("Select drop off option");
        }
        else if ($('input[type=radio][name=Drop]:checked').val() == "0") {
            if ($('#txtDropAddress').val() == "") {
                isAllow = false;
                customAlert("Enter drop off address");
            }
            else if ($('#txtDropZipcode').val() == "") {
                isAllow = false;
                customAlert("Enter drop off zip code");
            }
        }
        else if ($('.Drop:checked').val() == "2" && $('.Pickup:checked').val() == "2") {
            isAllow = false;
            customAlert("Both should not be Not Needed");
        }
        if (isAllow) {
            $('#divTransportation').show();
            $('#txtPickup').val($('.Pickup:checked').val() == "1" ? "Pick child up from home" : $('#txtPickupAddress').val() + ' , ' + $('#txtPickupZipcode').val())
            $('#txtDrop').val($('.Drop:checked').val() == "1" ? "Drop off child to home" : $('#txtDropAddress').val() + ' , ' + $('#txtDropZipcode').val())

            $('.internal_reference').css("overflow", 'auto');
            $('#transportation').modal('hide');
           

        }

    }
    function saveTransportation() {


        var Trasportation = {};
        if ($('.transportation-id').val().trim() != "")
            Trasportation.Id = $('.transportation-id').val().trim();
        Trasportation.ClientId = cid;
        Trasportation.PickupStatus = $('.Pickup:checked').val() == "1" ? true : false;
        Trasportation.PickupAddress = $('#txtPickupAddress').val();
        Trasportation.PickupZipcode = $('#txtPickupZipcode').val();
        Trasportation.DropStatus = $('.Drop:checked').val() == "1" ? true : false;
        Trasportation.DropAddress = $('#txtDropAddress').val();
        Trasportation.DropZipcode = $('#txtDropZipcode').val();
        Trasportation = JSON.stringify({ 'objTransportation': Trasportation });
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: "POST",
            async: false,
            url: "/AgencyUser/SaveTransportation",
            data: Trasportation,
            success: function (data) {
                if (data) {
                   


                }
                else
                    customAlertSuccess("Sorry,Unable to save details");
            },
            error: function (data) {
            }
        });

    }
    //end
</script>
<style type="text/css">

    #divCaseNoteSection{
        border:unset!important;
    }

    #divCaseNoteSection .lbl-text{
        font-weight:bold!important;
    }


        .billing-inner-label label, .billing-inner-label span {
            color: #333;
            font-weight: normal !important;
            font-size: 15px;
            margin-bottom: 0;
            margin-top: 10px;
        }

        .bill-radio {
            margin: 0.5rem;
            display: inline-block;
        }

            .bill-radio input[type="radio"] {
                position: absolute;
                opacity: 0;
            }

        .billing-inner input {
            background: transparent;
            color: #333;
            border: 1px solid #333;
            border-radius: 8px !important;
            height: 40px;
        }

        .bill-radio label {
            padding-left: 0;
            color: #333;
        }

        .bill-radio input[type="radio"]:checked + .radio-label:before {
            background-color: #295b8f;
            box-shadow: inset 0 0 0 4px #fff;
        }

        .bill-radio input[type="radio"] + .radio-label:before {
            content: '';
            background: none;
            border-radius: 100%;
            border: 1px solid #333;
            display: inline-block;
            width: 1.4em;
            height: 1.4em;
            position: relative;
            top: -0.2em;
            margin-right: 1em;
            vertical-align: top;
            cursor: pointer;
            text-align: center;
            -webkit-transition: all 250ms ease;
            transition: all 250ms ease;
        }

        @@media only screen and (min-width:768px) and (max-width:1200px) {
            strong.pir-Q-lbl {
                min-height: 0 !important;
                float: left;
            }

            .title-fixed {
                position: static;
                padding-left: 0;
            }

            .protype-solid span textarea {
                height: 50px;
                width: 100% !important;
            }

            .protype-solid span {
                width: 55% !important;
                float: left;
            }

            .protype-solid label {
                width: 45% !important;
                float: left;
            }

                .protype-solid label input {
                    width: 30px !important;
                    float: left;
                }
        }

        .alert-info {
            color: #31708f;
            background-color: #d9edf7;
            border-color: #bce8f1;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;
        }

        .edu-protextarea textarea {
            width: 65%;
            float: left;
            height: 60px;
            margin-bottom: 15px;
            max-width: 65%;
        }

        .error-notify {
            color: red;
        }

        .protype-solid span textarea {
            height: 50px;
            width: 60%;
        }

        .parent-solid .protype-solid label input {
            margin-right: 8px;
        }

        .protype-solid {
            width: 100%;
            float: left;
            margin-bottom: 15px;
        }

        .edu-protextarea.edu_new_child textarea {
            width: 54%;
            margin-right: 15px;
        }

        .edu_new_child span {
            margin-top: 13px;
            float: left;
        }

        .edu-boxmade label {
            color: #163b69 !important;
        }

        .protype-solid label {
            width: 30%;
            float: left;
        }

        .protype-solid span {
            width: 70%;
            float: left;
        }

        strong.pir-Q-lbl {
            min-height: 60px;
            float: left;
        }







        @@media only screen and (min-width: 767px) and (max-width: 991px) {
            .response-addicspace {
                margin-top: 12px;
            }
        }

        .err-bg {
            background-color: pink !important;
        }

        .pir-q-p {
            background: none !important;
            border: none !important;
            display: inline-block;
        }

        .pir-Q-lbl {
            display: inline-block;
        }

        .m-tp {
            margin-bottom: 5px;
        }

        .btn-accept {
            border-radius: 4px;
        }

        .addapplicant {
            font-size: 20px;
            font-weight: bold;
            border-bottom: 2px solid #295b8f;
            color: #295b8f;
            padding: 15px 0;
            margin: 0 15px;
        }

        .new-casenote {
            width: 100%;
            float: left;
        }

        .edu_header .addInnerChildContent {
            border: 1px solid #ccc;
            background-color: #f7f7f7;
            box-shadow: 0 0 10px 1px #ccc;
            margin-bottom: 15px;
        }

        .edu_header h3 {
            font-size: 20px;
            font-weight: bold;
            border-bottom: 2px solid #295b8f;
            color: #295b8f;
            padding: 15px 0;
            text-transform: capitalize;
        }

        .transition-inner21 .form-control {
            background: #fff;
            border: 1px solid #e7e7e7;
            padding: 10px 10px;
            color: #163b69;
            text-align: left;
            font-size: 15px;
            margin: 0;
            text-transform: none;
            width: 100%;
            float: left;
            height: 43px;
            box-shadow: none;
            border-radius: 0;
        }

       

        @@media only screen and (min-width: 1024px) and (max-width: 1290px) {
            .response-mtop {
                margin-top: 10px !important;
            }
        }

        @@media only screen and (min-width: 768px) and (max-width: 991px) {
            .response-mtop {
                margin-top: 10px !important;
            }
        }


        .internal_reference .modal-content {
            background: url(../../Images/body-bg.jpg) center no-repeat #000 !important;
            background-size: cover !important;
            background-position: 100% 100% !important;
         
            color: #fff;
        }
       

        .internal_reference .enroll-sec p {
            float: left;
            font-weight: 600;
            color: #1b5c96;
        }

        .internal_reference .addapplicant {
            border-bottom: 2px solid #f9c751 !important;
            margin: 8px 0 12px !important;
            color: #1b5c96;
            padding-bottom: 5px;
        }

        .internal_reference .my-btn, .internal_reference .my-btn:hover {
            background-color: #4CAF50;
        }

        .internal_reference .my-btn-exit, .internal_reference .my-btn-exit:hover {
            background: #db4437 !important;
        }

        .enroll-sec {
            width: auto;
            display: inline-block;
            float: left;
        }

        .internal_reference_radiobtn .radio.radio-info {
           
            margin-top: 0px;
            width: auto;
            margin-right: 30px;
            display: inline-block;
            margin-bottom: 10px;
        }

        .internal_reference_radiobtn .radio {
            padding-left: 20px;
            
        }

        .internal_reference_radiobtn .radio-info input[type="radio"]:checked + label {
            color: #163b69;
        }

        .internal_reference_radiobtn .radio label {
            display: inline-block;
            vertical-align: middle;
            position: relative;
            padding-left: 5px;
            color: #163b69;
            font-size: 15px;
        }

        .internal_reference_radiobtn .radio-info input[type="radio"]:checked + label::before {
            border-color: #163b69;
            color: #163b69;
        }

        .internal_reference_radiobtn .radio label::before {
            content: "";
            display: inline-block;
            position: absolute;
            width: 16px;
            height: 16px;
            left: 0;
            margin-left: -20px;
            border: 1px solid #163b69;
            border-radius: 50%;
            background-color: transparent;
            -webkit-transition: border 0.15s ease-in-out;
            -o-transition: border 0.15s ease-in-out;
            transition: border 0.15s ease-in-out;
            top: 2px;
        }

        .internal_reference_radiobtn .radio-info input[type="radio"]:checked + label::after {
            background-color: #163b69;
            color: #163b69;
        }

        .internal_reference_radiobtn .radio input[type="radio"]:checked + label::after {
            -webkit-transform: scale(1, 1);
            -ms-transform: scale(1, 1);
            -o-transform: scale(1, 1);
            transform: scale(1, 1);
        }

        .internal_reference_radiobtn .radio-info input[type="radio"] + label::after {
            background-color: #163b69;
            color: #163b69;
        }

        .internal_reference_radiobtn .radio label::after {
            display: inline-block;
            position: absolute;
            content: " ";
            width: 8px;
            height: 8px;
            left: 4px;
            top: 6px;
            margin-left: -20px;
            border-radius: 50%;
            background-color: transparent;
            -webkit-transform: scale(0, 0);
            -ms-transform: scale(0, 0);
            -o-transform: scale(0, 0);
            transform: scale(0, 0);
            -webkit-transition: -webkit-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
            -moz-transition: -moz-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
            -o-transition: -o-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
            transition: transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
        }

        .internal_reference_radiobtn .radio input[type="radio"] {
            opacity: 0;
            z-index: 1;
            cursor: pointer;
        }

        .chk-box-ch .fa-checkbox input[type='checkbox'] {
            display: none !important;
        }

        .fa-checkbox input[type="checkbox"] + label:before {
            color: #163a68;
        }

        .fa-checkbox input[type='checkbox'] + label:before, .chk-box-ch .fa-radio input[type='radio'] + label:before {
            display: inline-block;
            font-family: FontAwesome;
            font-size: 21px;
            font-style: normal;
            font-weight: normal;
            line-height: 32px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            padding-right: 8px;
            width: 20px;
            position: relative;
            top: 3px;
        }

        .fa-checkbox input[type="checkbox"] + label:before {
            content: "\f096";
            position: relative;
            top: 0px;
            margin-right: 10px;
        }

        .fa-checkbox input[type="checkbox"]:checked + label:before {
            top: 3px;
        }

        .fa-checkbox input[type="checkbox"]:checked + label:before {
            color: #3FC593;
            content: "\f14a";
            position: relative;
            top: 0px;
        }

        .fa-checkbox input[type="checkbox"] + label:before {
            color: #163a68;
        }

        .fa-checkbox input[type='checkbox'] + label:before, .chk-box-ch .fa-radio input[type='radio'] + label:before {
            display: inline-block;
            font-family: FontAwesome;
            font-size: 21px;
            font-style: normal;
            font-weight: normal;
            line-height: 32px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            padding-right: 8px;
            width: 20px;
            position: relative;
            top: 3px;
        }

        .fa-checkbox input[type="checkbox"] + label:before {
            content: "\f096";
            position: relative;
            top: 0px;
            color: #163a68;
            margin-right: 10px;
        }

        .ersea-detl-title h3 {
            font-weight: bold;
        }


        #ModalInternalReferral .close {
            opacity: 1;
            position: absolute;
            right: -14px;
            top: -12px;
        }
</style>





    <div class="modal fade scroll-modal custom-modal internal_reference scr" id="ModalInternalReferral" role="dialog">
        <div class="modal-dialog modal-dialog-ch income-popup width-auto">
            <div class="modal-content">

                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal"><img src="/Content/CaseNote/images/close.png"></button>
                    <h2 id="modalHeading" class="extra-title muted">Internal Referral</h2>

                    <div class="max_items_addn popup-addn-scroll">
                        <div class="col-xs-12">
                            <div class="row divReferTo" style="display:none!important;">
                                <div class="alert alert-info col-xs-12" role="alert" style="border-radius:unset;line-height:25px;width:50%;margin-left:25%">
                                    <div class="col-lg-1 col-xs-2" style="font-weight:bold;margin-top:0px;">Note!&nbsp;</div>
                                    <div class="col-lg-11 col-xs-10">
                                        <span id="spnReferTo"> No internal referral found   </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-main">
                                    <div class="add-useragform1">
                                        <div class="col-xs-12">

                                            <div class="form-group col-xs-12">
                                                <label for="lblClientName" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Client</label>
                                                <label class="col-md-5 col-lg-9 col-xs-12" style="text-transform:none;font-weight:normal;padding:2.5px;width:68.5%;" id="lblClientName"></label>
                                            </div>


                                            <div class="form-group col-xs-12">
                                                <label for="lblCenterName" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Center</label>
                                                <label class="col-md-5 col-lg-9 col-xs-12" style="text-transform:none;font-weight:normal;padding:2.5px;width:68.5%;" id="lblCenterName"></label>
                                            </div>



                                            <div class="form-group col-xs-12">
                                                <label for="lblClassroom" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Classroom</label>
                                                <label class="col-md-5 col-lg-9 col-xs-12" style="text-transform:none;font-weight:normal;padding:2.5px;width:68.5%;" id="lblClassroom"></label>
                                            </div>

                                            <div class="form-group col-xs-12">
                                                <label for="" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Developmental Team&nbsp;<sup style="color:red;">*</sup></label>

                                                <div class="col-md-5 col-lg-9 col-xs-12" id="RolesDiv" style="padding:2.5px;width:68.5%;">
                                                        <input type="hidden" name="ClientId" id="nREF_CaseNoteClientId" />
                                                        <input type="hidden" name="CenterId" id="CaseNoteCenterId" />
                                                        <input type="hidden" name="ClassroomId" id="ClassroomId" />
                                                        <input type="hidden" name="HouseholdId" id="HouseholdId" />
                                                        <input type="hidden" name="ProgramId" id="CaseNoteProgramId" />
                                                            <div id="DivAppendRoles"></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-12"  id="chkYakkrDiv">
                                                <label for="" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Send Yakkr</label>
                                                <div class="col-md-5 col-lg-9 col-xs-12" style="padding:2.5px;width:68.5%;">
                                                    <div class="fa-checkbox">
                                                        <input type="checkbox" id="yakkrcode" name="YakkrCode" value="" style="display:none;" class="check1">
                                                        <label for="yakkrcode" id="lblyakkrcode" style="color:black;font-size:14px;text-align:left;margin-bottom:12px;margin-bottom: 0;width: 100%;padding-top: 0;"></label>
                                                    </div>

                                                    </div>

                                                </div>



                                            <div class="form-group col-xs-12">
                                                <label for="" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Note&nbsp;<sup style="color:red;">*</sup></label>
                                                <div class="col-md-5 col-lg-9 col-xs-12" style="padding:2.5px;width:68.5%;">
                                                    <textarea type="text" onblur="UpdateCaseNoteContent(this)" class="form-control" id="txtNotes" name="Note" value="" placeholder="Note" style="resize: none;"></textarea>
                                                </div>

                                            </div>


                                            <div id="divTransportation" style="display:none;">

                                                <div class="form-group col-xs-12">
                                                    <label for="txtPickup" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Pickup Details</label>
                                                    <div class="col-md-5 col-lg-9 col-xs-12">
                                                        <textarea type="text" readonly class="form-control" id="txtPickup" name="Note" value="" placeholder="Pickup Details" style="resize: none;"></textarea>
                                                        
                                                    </div>

                                                </div>

                                                <div class="form-group col-xs-12">
                                                    <label for="txtDrop" class="col-md-4 col-lg-3 col-xs-12 lbl-text" >Pickup Details</label>
                                                    <div class="col-md-5 col-lg-9 col-xs-12">
                                                        <textarea type="text" readonly class="form-control" id="txtDrop" name="Note" value="" placeholder="Drop Details" style="resize: none;"></textarea>
                                                    </div>

                                                </div>

                                               


                                            </div>


                                            <div class="col-xs-12 col-lg-12 no-padding new-casenote" id="nREF_caseNote_div">
                                               

                                            </div>



                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <div class="btnwrp_subcal">
                                        <button type="button" onclick="SetDataForNREF(this);" class="glossy-button-button button-green">
                                            Submit
                                            <span class="glossy-button-before"></span>
                                            <span class="glossy-button-after"></span>
                                        </button>
                                        &nbsp;&nbsp;
                                        <button tabindex="17" class="glossy-button-button button-red" data-dismiss="modal" type="button">
                                            Exit
                                            <span class="glossy-button-before"></span>
                                            <span class="glossy-button-after"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>


              



            </div>
        </div>
    </div>



<div class="modal fade in" id="transportation" role="dialog" style="display: none;background: rgba(0,0,0,0.4);" aria-hidden="false">
    <div class="modal-dialog">
        <div class="modal-content col-xs-12">
            <div class="modal-header col-xs-12">
                <input type="hidden" name="childid" id="childid" value="">
                <input type="hidden" name="childname" id="childname" value="">
                <label class="alert-dismissible" for="current_password" style="font-size: 20px;color: #295b8f;">Transportation</label>
                <input type="hidden" class="transportation-id" />
            </div>
            <div class="col-xs-12">
                <div class="form-group input-container">
                    <label class="control-label" style="margin-left: 0;display:inline-block;">Pick child up from home?</label>
                    <div class="col-xs-12 billing-form-div no-padding" style="padding:0;width:auto;display:inline-block;">
                        <div class="col-xs-12" style="padding:0;">
                            <div class="billing-inner">
                                <div class="bill-radio">
                                    <input id="rdEmailYes" name="Pickup" onchange="Pickup(this);" class="rd-email Pickup" value="1" type="radio">
                                    <label for="rdEmailYes" class="radio-label">Yes</label>
                                </div>

                                <div class="bill-radio">
                                    <input id="rdEmailNo" name="Pickup" onchange="Pickup(this);" value="0" class="rd-email Pickup" type="radio">
                                    <label for="rdEmailNo" class="radio-label">No</label>
                                </div>
                                <div class="bill-radio">
                                    <input id="rdEmailNA" name="Pickup" onchange="Pickup(this);" value="2" class="rd-email Pickup" type="radio">
                                    <label for="rdEmailNA" class="radio-label">Not Needed</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pickup-details" style="display:none;">
                    <div class="form-group input-container">
                        <label class="control-label" for="current_password" style="margin-left: 0;">Address</label>
                        <input name="CNotes" class="form-control txt-mandatory txt-org-input" style="width:50%" id="txtPickupAddress" type="text" maxlength="50" value="">
                    </div>
                    <div class="form-group input-container">
                        <label class="control-label lbl-required" for="current_password" style="margin-left: 0;">ZIP Code</label>
                        <input name="CNotes" class="form-control txt-mandatory txt-org-input" style="width:50%" id="txtPickupZipcode" type="text" maxlength="50" value="">
                    </div>
                </div>

            </div>
            <div class="col-xs-12" style="margin-top:20px;">
                <div class="form-group input-container">
                    <label class="control-label" style="margin-left:0;display:inline-block;">Drop off child to home?</label>
                    <div class="col-xs-12 billing-form-div no-padding" style="padding:0;width:auto;display:inline-block;">
                        <div class="col-xs-12" style="padding:0;">
                            <div class="billing-inner">

                                <div class="bill-radio">
                                    <input id="rdPrintYes" name="Drop" onchange="Drop(this);" class="rd-print Drop" value="1" type="radio">
                                    <label for="rdPrintYes" class="radio-label">Yes</label>
                                </div>

                                <div class="bill-radio">
                                    <input id="rdPrintNo" name="Drop" onchange="Drop(this);" class="rd-print Drop" value="0" type="radio">
                                    <label for="rdPrintNo" class="radio-label">No</label>
                                </div>
                                <div class="bill-radio">
                                    <input id="rdPrintNA" name="Drop" onchange="Drop(this);" class="rd-print Drop" value="2" type="radio">
                                    <label for="rdPrintNA" class="radio-label">Not Needed</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="drop-details" style="display:none;">
                    <div class="form-group input-container">
                        <label class="control-label" for="current_password" style="margin-left: 0;">Address</label>
                        <input name="CNotes" class="form-control txt-mandatory txt-org-input" style="width:50%" id="txtDropAddress" type="text" maxlength="50" value="">
                    </div>
                    <div class="form-group input-container">
                        <label class="control-label lbl-required" for="current_password" style="margin-left: 0;">ZIP Code</label>
                        <input name="CNotes" class="form-control txt-mandatory txt-org-input" style="width:50%;" id="txtDropZipcode" type="text" maxlength="50" value="">
                    </div>
                </div>

            </div>
            <div class="col-xs-12" style="text-align:center;padding: 15px;border-top: 1px solid #e5e5e5;">
                <button class="btn-save-transportation btn-primary btn" onclick="SetAddress();">Save</button>
                <button class="btn-primary btn btn-close-transportaion" onclick="Closetransportaion();">Back</button>
            </div>
        </div>

    </div>
</div>
