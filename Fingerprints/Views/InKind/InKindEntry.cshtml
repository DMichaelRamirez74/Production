@model FingerprintsModel.Inkind

@{
    ViewBag.Title = "In-Kind Entry";
    Layout = (Session["RoleID"].ToString() == "a65bb7c2-e320-42a2-aed4-409a321c08a5" || Session["RoleID"].ToString() == "3b49b025-68eb-4059-8931-68a0577e5fa2") ? "~/Views/Shared/AgencyAdminLayout.cshtml" : "~/Views/Shared/AgencyStaffLayout.cshtml";
}


@section Title{
    In-kind Entry

}

@section Script{

    <script type="text/javascript">

        var _maxHrMinEntry = '12:00';
        var _warningHrsEntry = '08:00';
        var activityHrs = null;
        var activityMins = null;
        var inkindAmount = null;
        var _allowExceedingWarninghrs = false;
        var _inkindBudgetPeriods = @Html.Raw(Json.Encode(Model.InkindPeriodsList));
        var _sessionUserid='@(FingerprintsModel.StaffDetails.GetInstance().RoleId.ToString()+"_"+FingerprintsModel.StaffDetails.GetInstance().UserId.ToString())';
        var $cookieName='InkinEntry'+_sessionUserid;
        var _requestedPageInkindentry=1;
        var _pageSizeInkindentry=10;
        var _lastIndexInkindentry=0;
        var _pageLoadedFirst=false;
        var _startIndexInkindEntry=0;
        var _totalRecordsInkindentry=0;
        var _numOfPagesInkindEntry=0;
        var ajaxParameters={
            'searchName':null,
            'requestedPage':null,
            'pageSize':null
        }

        var InkindDonarType={
            'PastParent':0,
            'PresentParent':1,
            'Individual':2,
            'Corporate':3
        }

        $(function () {
            var searchBtn = $('#searchByNamebtn');
            var searchText = $('#searchText');
            var activityDate = $('#activity-date');
            var activityType = $('#inkind-type-select');
            var activityDesc = $('#descriptionTextArea');
                activityHrs = $('#inkindHoursText');
                activityMins = $('#inkindMinutesText');
            var acitivityMiles = $('#inkindMilesText');
                inkindAmount = $('#inkindAmountTxt');
            var centerSelect = $('#ddlCenterDetails');
            var classroomSelect = $('#classroomSelect');
            var parentSig = $('#imageSig1');
            var staffSig = $('#imageSig2');

            $('#sig1').signature({ distance: 50 });
            $('#sig2').signature({ distance: 50 });



            activityHrs.popover({

                html: true,
                content: function () {
                 //  return $($(this).data('target-selector')).html();
                    return '<p class="text-center">Are you sure, you want to continue?</p>\
         <p class="text-center"><button type="button" class="btn btn-success allow-yes">Yes</button>&nbsp;&nbsp;<button type="button" class="btn btn-danger allow-no">No</button></p>';

                },
                title: function () {
                  //  return $(this).data('title') + '<span class="close">&times;</span';
                    return $(this).data('title');

                },
                trigger: 'manual',
                delay: { "show": 500, "hide": 100 }
            }).on('shown.bs.popover', function (e) {

                var _popover = $(this);
                //_popover.parent().find('div.popover .close').on('click', function () {

                //    _popover.popover('hide');
                //});

                _popover.parent().find('div.popover .allow-yes').on('click', function () {
                    _allowExceedingWarninghrs = true;
                    _popover.popover('hide');
                });

                _popover.parent().find('div.popover .allow-no').on('click', function () {
                    _allowExceedingWarninghrs = false;
                    activityHrs.val(0);
                    activityMins.val(0);
                    inkindAmount.val(0);
                    
                    _popover.popover('hide');
                });




            });


            if(_inkindBudgetPeriods!=null && _inkindBudgetPeriods.length>0)
            {


                $('#imageinfoInkindDates').popover({
                    html:true,
                    content:function(){
                        var $appendtext='';
                        if(_inkindBudgetPeriods!=null && _inkindBudgetPeriods.length>0)
                        {
                            $.each(_inkindBudgetPeriods,function(i,period){
                                $appendtext+='<p>Dates allowed from '+period.StartDate+' '+'to '+period.EndDate+'</p>';
                            });

                            return $appendtext;
                        }
                    },
                    container:'body',
                    //title: function () {
                    //    //  return $(this).data('title') + '<span class="close">&times;</span';
                    //    return 'In-Kind Entry Dates'

                    //},
                    title:'In-Kind Entry Dates'+ '<a class="close" href="javascript:void(0);">&times;</a>',
                    delay: { "show": 500, "hide": 100 }
                }).on('shown.bs.popover', function(e) {
                    //console.log('shown triggered');
                    // 'aria-describedby' is the id of the current popover
                    var current_popover = '#' + $(e.target).attr('aria-describedby');
                    var $cur_pop = $(current_popover);
          
                    $cur_pop.find('.close').click(function(){
                        //console.log('close triggered');
                        $('#imageinfoInkindDates').popover('hide');
                    });
          
                });

            }

            //$('#imageinfoInkindDates').on('click',function(){

            //    $('#imageinfoInkindDates').popover('show');


            //});




            $("#text-select-phoneNo").mask("(999) 999-9999");

            $('input[name=radiocompany]').on('click', function () {

                if ($(this).val() === '1') {

                    showParentEntry();
                }
                else {
                    showCompanyEntry();
                }
            });




            //$('#inkind-info-form').find('input:checkbox[name=parenttype]').on('click', function () {

            //    if ($(this).is(':checked')) {
            //        $('#activitytyperadiodiv').find('input[name=activityTypeRadio][value=2]').prop('checked', false)
            //            .parent('span').parent('div').hide();

            //        //  $('#activitytyperadiodiv').find('input[name=activityTypeRadio][value=1]').trigger('click');


            //    }
            //    else {
            //        $('#activitytyperadiodiv').find('input[name=activityTypeRadio][value=2]').prop('checked', false)
            //            .parent('span').parent('div').show();
            //    }

            //});


            //on click of Search Button//
            searchBtn.on('click', function () {


                cleanValidation();
                if (searchText.val() == '') {
                    customAlert('Please enter name to search');
                    plainValidation('#searchText');
                    return false;
                }
                else {
                    // $('.not-exists-div').show();
                    // $('#contact-legend').html('Add Contact Information');
                    //// $('#contact-info-form').trigger('reset');
                    getInkindDonorsFromDb(searchText.val(),'');

                    return false;
                }

            });

            //Initialize datetimepicker//

            var $minDate=null;
            if(_inkindBudgetPeriods!=null && _inkindBudgetPeriods.length>0)
            {
                $minDate=new Date( _inkindBudgetPeriods[0].StartDate).setHours(0,0,0,0);
            }


            $('#activity-date').datetimepicker({
                timepicker: false,
                format: 'm/d/Y',
                validateOnBlur: false,
                value: getFormattedDate(new Date()),
                autoClose: true,
                minDate:$minDate,
                maxDate: new Date(),
                onSelectDate:function(e, ele){


                    $('#activity-date').css('background-color','');
                    if(!isValidAllowedDates(e)){

                        customAlert('Entered date is not allowed');
                        plainValidation('#activity-date');
                        return false;
                    }
                    else if(getDifferenceDays(e, new Date())>30){

                        $('#datetimepicker1').parent('div').popover('destroy');
                        
                        if(!checkCookie($cookieName))
                        {
                            
                            $('#datetimepicker1').parent('div').popover({

                                html: true,
                                content: function () {
                                    //  return $($(this).data('target-selector')).html();
                                    return '<p>Entered date is greater than 30 days before from today.</p>\
                                        <input type="checkbox" name="checkboxNoShow"/>&nbsp;<span>Don\'t show this message again</span>';
                                    

                                },
                                title: function () {
                                    //  return $(this).data('title') + '<span class="close">&times;</span';
                                    return 'Information <a href="javascript:void(0);" class="close">&times;</a>';

                                },
                                trigger: 'manual',
                                delay: { "show": 500, "hide": 100 }
                            }).on('shown.bs.popover', function (e) {

                                //console.log('shown triggered');
                                // 'aria-describedby' is the id of the current popover
                                var current_popover = '#' + $(e.target).attr('aria-describedby');
                                var $cur_pop = $(current_popover);
          
                                $cur_pop.find('.close').click(function(){
                                    //console.log('close triggered');
                                    $('#datetimepicker1').parent('div').popover('hide');

                                });

                                $cur_pop.find('input:checkbox[name="checkboxNoShow"]').on('click',function(){

                                    if($(this).is(':checked'))
                                    {
                                        setCookie($cookieName,'1',1);
                                    }
                                    else{
                                        deleteCookie($cookieName);
                                    }


                                });
                            });

                        
                            $('#datetimepicker1').parent('div').popover('show');
                        }

                    }
                    else
                    {
                        $('#datetimepicker1').parent('div').popover('destroy');
                    }

                },
                onChangeDateTime:function(e, ele){
                    debugger;

                    $('#activity-date').css('background-color','');
               
                        
                        
                        if(!isValidAllowedDates( e))
                        {
                            plainValidation('#activity-date');

                  


                            //$('#datetimepicker1').parent('div').popover('destroy');

                            //$('#datetimepicker1').parent('div').popover({

                            //    html: true,
                            //    content: function () {
                            //        //  return $($(this).data('target-selector')).html();
                            //        return '<p>Kindly, check the <i class="fa fa-fa-info-o"></i> to know more about In-Kind entry dates</p>';

                            //    },
                            //    title: function () {
                            //        //  return $(this).data('title') + '<span class="close">&times;</span';
                            //        return "<p><strong class='text-center'>Invalid Date</strong></p>";

                            //    },
                            //    trigger: 'manual',
                            //    delay: { "show": 500, "hide": 100 }
                            //}).on('shown.bs.popover', function (e) {





                            //});

                            //$('#datetimepicker1').parent('div').popover('show');

                            customAlert('Entered date is not allowed');
                            return false;
                        }
                        
                 

                    //else if(getDifferenceDays(e, new Date())>30){

                    //    $('#datetimepicker1').popover('destroy');
                    //    $('#datetimepicker1').popover({

                    //        html: true,
                    //        content: function () {
                    //            //  return $($(this).data('target-selector')).html();
                    //            return '<p>Entered date is greater than 30 days before from today.</p>\
                    //                    <input type="checkbox" name="checkboxNoShow"/>&nbsp;<span>Don\'t show this message again</span>\
                    //                    <div><button type="button" class="btn btn-primary">Close</button></div>';

                    //        },
                    //        title: function () {
                    //            //  return $(this).data('title') + '<span class="close">&times;</span';
                    //            return 'Information <a href="javascript:void(0);" class="close">&times;</a>';

                    //        },
                    //        trigger: 'manual',
                    //        delay: { "show": 500, "hide": 100 }
                    //    }).on('shown.bs.popover', function (e) {

                    //        //console.log('shown triggered');
                    //        // 'aria-describedby' is the id of the current popover
                    //        var current_popover = '#' + $(e.target).attr('aria-describedby');
                    //        var $cur_pop = $(current_popover);
          
                    //        $cur_pop.find('.close').click(function(){
                    //            //console.log('close triggered');
                    //            $('#datetimepicker1').popover('hide');

                    //        });


                    //    });

                        
                    //    $('#datetimepicker1').popover('show');
                    //}
                },
            });


            $('#activity-date').on('blur', function () {

                $('#activity-date').css('background-color','');
                if ($(this).val() != null && $(this).val() != '') {



                    
                    if(!isValidAllowedDates( $(this).val()))
                    {
                       // plainValidation('#activity-date');

                  


                        $('#datetimepicker1').parent('div').popover('destroy');

                        $('#datetimepicker1').parent('div').popover({

                            html: true,
                            content: function () {
                                //  return $($(this).data('target-selector')).html();
                                return '<p>Kindly, check the <i class="fa fa-info-circle" style="color:#25b7d3;font-size:17px;font-weight:bold;"></i> to know more about In-Kind entry dates</p>';

                            },
                            title: function () {
                                //  return $(this).data('title') + '<span class="close">&times;</span';
                                return "<p><strong class='text-center'>Invalid Date</strong></p>";

                            },
                            trigger: 'manual',
                            delay: { "show": 500, "hide": 100 }
                        }).on('shown.bs.popover', function (e) {





                        });

                        $('#datetimepicker1').parent('div').popover('show');

                        customAlert('Entered date is not allowed');
                        return false;
                    }

                    $('#datetimepicker1').parent('div').popover('destroy');
                    //if (!isValidAllowedDates($(this).val())) {
                    //    plainValidation($(this));
                    //    $(this).val('');
                    //    customAlert('Please enter valid date');
                    //    return false;
                    //}

                    if (new Date($(this).val()).setHours(0, 0, 0, 0) > new Date().setHours(0, 0, 0, 0)) {
                        plainValidation($(this));
                        $(this).val('');
                        customAlert('Future dates are not allowed');
                        return false;
                    }
                }

            });



            //show Datetimepicker on click of date group icon//
            $('#datetimepicker1').on('click', function () {

                $('#activity-date').datetimepicker('show');
            });


            //Validaton for allowing only date formate in text box on Key up//
            $("body").on('keyup', '#activity-date', function (e) {

                flags = 0;
                if (e.keyCode != 193 && e.keyCode != 111) {
                    if (e.keyCode != 8) {
                        if ($(this).val().length == 2) {
                            $(this).val($(this).val() + "/");
                        } else if ($(this).val().length == 5) {
                            $(this).val($(this).val() + "/");
                        }
                    } else {
                        var temp = $(this).val();
                        if ($(this).val().length == 5) {
                            $(this).val(temp.substring(0, 4));
                        } else if ($(this).val().length == 2) {
                            $(this).val(temp.substring(0, 1));
                        }
                    }
                } else {
                    var temp = $(this).val();
                    var tam = $(this).val().length;
                    $(this).val(temp.substring(0, tam - 1));
                }


            });

            var flags = 0;

            //Validaton for allowing only date formate in text box on Key down//

            $('body').on("keydown", "#activity-date", function (e) {
                flags++;
                if (flags > 1) {
                    e.preventDefault();
                }

                //var regex = /^[0-9]*(?:\.\d{1,2})?$/;


                //if( !regex.test(e.value) ) {
                //    return false;
                //}

                var key = e.charCode || e.keyCode || 0;

                // allow backspace, tab, delete, enter, arrows, numbers and keypad numbers ONLY
                // home, end, period, and numpad decimal
                return (key == 8 || key == 9 || key == 13 || key == 46 || key == 37 || key == 39 ||
                    key == 35 || key == 36 || key == 110 || key == 190 || key == 191 ||
                   (key >= 96 && key <= 111 || key >= 48 && key <= 57 && !e.shiftKey));
                //(e.which == keyCode.ENTER)


                var owner = this,
              pps = owner.properties,
              charCode = e.which || e.keyCode || e.charCode || 0;

                // hit backspace when last character is delimiter

                if (Util.isAndroid() &&
                    e.target.value.length &&
                    e.target.value.length === this._lastEventValue.length - 1 &&
                    Util.isDelimiter(pps.result.slice(-1), pps.delimiter, pps.delimiters)
                ) {
                    e.charCode = 8;
                }
                if (e.charCode === 8 &&
                    Util.isDelimiter(pps.result.slice(-1), pps.delimiter, pps.delimiters)) {
                    pps.backspace = true;
                }
                else {
                    pps.backspace = false;
                }
                this._lastEventValue = e.target.value;

            });



            //Validation for the Valid Entered Format date//
            $('body').on('blur', '#activity-date', function () {


                validatedates(this);
            });

            //On Change Center Select Option, Gets the Classrooms//

            $('#ddlCenterDetails').on('change', function () {
                if ($(this).val() == '0') {
                    $('#classroomSelect').find('option').remove();
                    return false;
                }

                GetClassrooms(this);
            });


            //On clikc of Add Contact Button loads the contact form//
            $('#addContactBtn').on('click', function () {

                if(_inkindBudgetPeriods==null ||(_inkindBudgetPeriods!=null && _inkindBudgetPeriods.length==0))
                {

           
                    showNoActiveInkinds();
               
                    return false;
                }

                $('#searchText').val('');
                $('#no-more-tables8').find('#totalCountSpan').text(0);
                $('#no-more-tables8').find('.bind_body').html('');
                $('#no-more-tables8').hide();
                $('#inkindPersonName').html('');
                $('#contact-info-form').trigger('reset')
                $('.contact-info-div').hide();
                $('.contact-entry-div').show();
                $('#inkind-info-form').trigger('reset');
                $('.inkind-entry-div').hide();

            });

            //Triggers the Search Button Click option on click of Enter key on focus of Search Text//
            //$('#searchText').on('focus', function (event) {



            //    document.getElementById("searchText").addEventListener("keydown", function (event) {
            //        if (event.which == 13 || event.keyCode == 13) {
            //           // $('#searchByNamebtn').trigger('click');
            //            getInkindDonorsFromDb(searchText.val());
            //            return true;
            //        }

            //    });
            //});



            document.getElementById("searchText").addEventListener("keydown", function (event) {

                if (event.which == 13 || event.keyCode == 13) {


                    if($('#searchText').is(':focus') && $('#searchText').val())
                    {
                        // $('#searchByNamebtn').trigger('click');

                        _requestedPageInkindentry=1;
                        _pageSizeInkindentry=10
                        _lastIndexInkindentry=0;
                        _pageLoadedFirst=false;

                        getInkindDonorsFromDb(searchText.val(),'');
                        return true;
                    }

                }

            });



            //On Click of Activity Type Radio loads the Activity from based on its type//
            $('#activitytype-div').find('input[name=activityTypeRadio]').on('click', function () {

                var activityType = parseInt($(this).val());
                $('#spinner').show();

                $('.amount-div,.inkind-hours-div,.inkind-miles-div').hide();
                $('.inkind-hours-div').find('input[type=text]').val('');
                $('#inkindAmountTxt').val('');
                $('.inkind-miles-div').find('input[type=text]').val('');
                $('#descriptionTextArea').val('');
                $('#parent-sig-div,#staff-sig-div').hide();

                $.ajax({
                    url: HostedDir + '/InKind/GetActivityByActivityType',
                    datatype: 'json',
                    type: 'post',
                    data: { activitytype: activityType },
                    success: function (data) {
                        $('#spinner').hide();
                        var dataAppend = '';

                        if (activityType === 1) {
                            dataAppend += '<select class="form-control" id="activity-type-select"  onchange="onActivitySelectChange(this);" ><option value="0">--Select Activity--</option>';
                        }

                        if (data != null) {
                            if (data.InkindActivityList.length > 0) {
                                $.each(data.InkindActivityList, function (i, inkindactivity) {


                                    if (activityType == parseInt(inkindactivity.ActivityType)) {
                                        var isSig = (inkindactivity.IsSignatureRequired) ? 1 : 0;
                                        if (activityType === 2) {
                                            if (inkindactivity.SubActivityList.length > 0) {
                                                $.each(inkindactivity.SubActivityList, function (j, subactivity) {

                                                    dataAppend += '<div class="col-xs-12" style="padding: 0;">\
                                                    <span class="check-space"> <input type="checkbox" name="activityCheck" onclick="return getInkindActivityAmountType(this);" amt-type=' + inkindactivity.ActivityAmountType + '  is-sig=' + isSig + ' value=' + subactivity.ActivityCode + '></span>\
                                                    <label style="color:#333;width: auto;display: inline-block;">'+ subactivity.ActivityDescription + '</label>\
                                                </div>';

                                                });
                                            }
                                        }
                                        else {

                                            //dataAppend += '<div class="col-xs-12" style="padding: 0;">\
                                            //        <span class="check-space"> <input type="checkbox" name="activityCheck" onclick="return getInkindActivityAmountType(this);" amt-type=' + inkindactivity.ActivityAmountType + '  is-sig=' + isSig + ' value=' + inkindactivity.ActivityCode + '></span>\
                                            //        <label style="color:#333;width: auto;display: inline-block;">' + inkindactivity.ActivityDescription + '</label>\
                                            //    </div>';

                                            dataAppend += '<option amt-type=' + inkindactivity.ActivityAmountType + '  is-sig=' + isSig + ' value=' + inkindactivity.ActivityCode + '>' + inkindactivity.ActivityDescription + '</option>';



                                        }
                                    }

                                });

                                if (activityType === 1) {
                                    dataAppend += '</select>';
                                }

                                $('#activity-des-listdiv').html(dataAppend);
                                $('#activity-description').show();
                            }
                            else {
                                $('#activity-description').hide();
                            }
                        }
                        else {
                            $('#activity-description').hide();
                        }

                    },
                    error: function (data) {
                        $('#spinner').hide();
                        customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                    }

                });


            });

            //Validates the Input. allows only numericals//
            // $('#inkindHoursText,#inkindMinutesText,#inkindAmountTxt').on('keypress', function () {
            $('#inkindHoursText,#inkindMinutesText').on('keypress', function () {

                return isNumber(this.event);
            });
            //currency- allow numberic with two decimal 
            $(document).on('keydown', '#inkindAmountTxt', function (e) {
                var input = $(this);
                var oldVal = input.val();
                var regex = new RegExp(input.attr('pattern'), 'g');
               // var regex = new RegExp('^\d*(\.\d{0,2})?$', 'g');
                setTimeout(function () {
                    var newVal = input.val();
                    if (!regex.test(newVal)) {
                        input.val(oldVal);
                    }
                }, 0);
            });


            $('#inkindAmountTxt').prop('disabled', true);

            //$('#inkindHoursText,#inkindMinutesText').on('input', function () {

            //    if ($(this).attr('id') == 'inkindHoursText' && !validateHoursMinutes(this)) {
            //        return false;
            //    }

            //    if ($(this).attr('id') == 'inkindMinutesText' && !validateHoursMinutes(this)) {
            //        return false;
            //    }

            //});

            //On keypress of Hours, Minutes and Inkind Amount Text, Calculates the amount and displays to Amount Text box//
          //  $('#inkindHoursText,#inkindMinutesText,#inkindMilesText').on('blur', function () {

                $('#inkindHoursText,#inkindMinutesText,#inkindMilesText').on('input', function () {

                var hoursText = ($('#inkindHoursText').val() == null || $('#inkindHoursText').val() == '') ? '0' : $('#inkindHoursText').val();
                var minsTxt = ($('#inkindMinutesText').val() == null || $('#inkindMinutesText').val() == '') ? '0' : $('#inkindMinutesText').val();
                var actCode = [];

                if ($(this).attr('id') == 'inkindHoursText' && !validateHoursMinutes(this)) {
                    return false;
                }

                if ($(this).attr('id') == 'inkindMinutesText' && !validateHoursMinutes(this)) {
                    return false;
                }

                console.log(activityHrs.val());

                if ($('input[name=activityTypeRadio][value=2]').is(':checked')) {
                    if ($('input[name=activityCheck]').length > 0) {
                        $('input[name=activityCheck]:checked').filter(function (k, actv) { actCode.push($(actv).val()) });
                    }
                }
                else {
                    actCode.push($('#activity-type-select').val());
                }

                var milesTxt = ($('#inkindMilesText').val() == null || $('#inkindMilesText').val() == '') ? '0' : $('#inkindMilesText').val();
                $.ajax({

                    url: HostedDir + '/InKind/GetDetailsByActivityType',
                    datatype: 'json',
                    type: 'post',
                    data: { activityCode: JSON.stringify(actCode), reqDetails: 2, hours: hoursText, minutes: minsTxt, miles: milesTxt },
                    success: function (data) {
                        if (data != null) {

                            $('#inkindAmountTxt').val(data.ActivityAmount);
                        }
                        else {
                            $('#inkindAmountTxt').val('');

                        }
                        return false;
                    },
                    error: function (data) {
                        customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                        return false;
                    }
                });

                return false;
            });

            //Validates the Input. allows only numericals//

            $('#inkindMilesText').keypress(function (event) {
                if ((event.which != 46 || $(this).val().indexOf('.') != -1) && (event.which < 48 || event.which > 57)) {
                    event.preventDefault();
                }
            });


            $('#text-contact-nameF').on('blur', function () {
                var contactName = $(this).val() + ' ' + $('#text-contact-nameL').val();
                $('#inkindPersonName').html(contactName);
                $('#inkindCompanyName').attr('cl_id', '0');
            });

            $('#text-contact-nameL').on('blur', function () {
                var contactName = $('#text-contact-nameF').val() + ' ' + $(this).val();
                $('#inkindPersonName').html(contactName);
                $('#inkindCompanyName').attr('cl_id', '0');
            });

            $('#text-company-name').on('blur', function () {
                $('.inkind-company-div').show();
                $('.inkind-company-div').find('#inkindCompanyName').html($(this).val());
                $('.inkind-company-div').find('#inkindCompanyName').attr('is_comp', '1');
            });

            // Validation of Email-Id
            $('#text-select-email').on('blur', function () {
                cleanValidation();
                var email = $(this).val();
                var emailret = false;
                if (email !== '') {

                    var filter = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

                    if (!filter.test(email)) {
                        plainValidation('#text-select-email');
                        customAlert('Please Enter Valid Email Address');
                        emailret = false;
                    }
                    else {
                        emailret = true;
                    }


                }

                return emailret;
            });


            //on click of No Email Checkbox in the Contact information//
            $('.sumar_noemail').find('input:checkbox[name=no_email]').on('click', function () {

                if ($(this).is(':checked')) {
                    $('#text-select-email').val('').prop('disabled', true);
                }
                else {
                    $('#text-select-email').val('').prop('disabled', false);
                } 

            });


            //On click of Inkind Entry Form Submit, Validates the form and Saves the Record to Database//
            $('#inKindEntrySubmit').on('click', function () {
           
                cleanValidation();
                var filter2 = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

                $('input[name=PGender]').parent('div').parent('div').removeClass('checkbox-validation');

                $('#activitytyperadiodiv').removeClass('checkbox-validation');
                $('#activity-des-listdiv').removeClass('checkbox-validation');


                if ($('.contact-entry-div').is(':visible')) {
                    if (!$('input[name=radiocompany]').is(':checked')) {
                        customAlert('Please Select Contact Type');
                        // $('input[name=PGender]').parent('div').parent('div').removeClass('checkbox-validation');
                        return false;
                    }

                    if ($('#text-contact-nameF').val() === '') {
                        plainValidation('#text-contact-nameF');
                        customAlert('Please Enter First Name');
                        return false;
                    }

                    if ($('#text-contact-nameL').val() === '') {
                        plainValidation('#text-contact-nameL');
                        customAlert('Please Enter Last Name');
                        return false;
                    }

                    if ($('.company-name-div').is(':visible') && $('#text-company-name').val() === '') {
                        plainValidation('#text-company-name');
                        customAlert('Please Enter Company Name');
                        return false;
                    }

                    if ($('.individual-gender-div').is(':visible') && $('input[name=radiocompany][value=1]').is(':checked')) {
                        if ($('input[name=PGender]:checked').length === 0) {
                            // plainValidation('#text-company-name');
                            $('input[name=PGender]').parent('div').parent('div').addClass('checkbox-validation');
                            customAlert('Please Select Gender');
                            return false;
                        }
                    }

                    if ($('#text-addressline1').val() === '') {
                        plainValidation('#text-addressline1');
                        customAlert('Please Enter Address');
                        return false;
                    }

                    if ($('#text-zipcode').val() === '') {
                        plainValidation('#text-zipcode');
                        customAlert('Please Enter Zip Code');
                        return false;
                    }

                    if ($('#text-select-city').val() == null || $('#text-select-city').val() == '') {
                        plainValidation('#text-select-city');
                        customAlert('Please Select City');
                        return false;
                    }

                    if ($('.individual-gender-div').is(':visible') && $('input[name=radiocompany][value=1]').is(':checked')) {
                        if ($('#text-select-phonetype').val() == null || $('#text-select-phonetype').val() == '') {
                            plainValidation('#text-select-phonetype');
                            customAlert('Please Select Phone Type');
                            return false;
                        }
                    }

                    if ($('#text-select-phoneNo').val() === '') {
                        plainValidation('#text-select-phoneNo');
                        customAlert('Please Enter Phone No');
                        return false;
                    }
                    if ($('#text-select-email').val() === ''
                        && !$('#contact-info-form').find('#text-select-email').parent().find('input:checkbox[name=no_email]').is(':checked')) {
                        plainValidation('#text-select-email');
                        customAlert('Please Enter Email Address');
                        return false;
                    }
                    if ($('#text-select-email').val()!='' && !filter2.test($('#text-select-email').val())) {
                        plainValidation('#text-select-email');
                        customAlert('Please Enter Valid Email Address');
                        return false;
                    }
                }


                if (activityDate.val() === '') {
                    plainValidation('#' + activityDate.attr('id') + '');
                    customAlert('Please Enter Activity Date');
                    return false;
                }

                if (activityDate.val() != '' && !validatedates(activityDate)) {
                    return false;
                }

                if(!isValidAllowedDates(activityDate.val()))
                {
                  //  plainValidation(activityDate);

                  


                    $('#datetimepicker1').parent('div').popover('destroy');

                    $('#datetimepicker1').parent('div').popover({

                        html: true,
                        content: function () {
                            //  return $($(this).data('target-selector')).html();
                            return '<p>Kindly,check the <i class="fa fa-info-circle" style="color:#25b7d3;font-size:17px;font-weight:bold;"></i> to know more about In-Kind entry dates</p>';

                        },
                        title: function () {
                            //  return $(this).data('title') + '<span class="close">&times;</span';
                            return "<p><strong class='text-center'>Invalid Date</strong></p>";

                        },
                        trigger: 'manual',
                        delay: { "show": 500, "hide": 100 }
                    }).on('shown.bs.popover', function (e) {





                    });

                    $('#datetimepicker1').parent('div').popover('show');

                    customAlert('Entered date was not allowed');
                    return false;
                }




                if ($('input[name=activityTypeRadio]:checked').length <= 0) {
                    $('#activitytyperadiodiv').addClass('checkbox-validation');
                    customAlert('Please Select Activity Type');
                    return false;
                }

                if ($('input[name=activityTypeRadio][value=2]').is('checked')) {
                    if ($('input[name=activityCheck]:checked').length <= 0) {
                        $('#activity-des-listdiv').addClass('checkbox-validation');
                        customAlert('Please Select Activity');
                        return false;
                    }
                }

                else {
                    if ($('#activity-type-select').val() === '0') {
                        plainValidation('#activity-type-select');
                        customAlert('Please Select Activity');
                        return false;
                    }
                }

                if (activityDesc.val() === '') {
                    plainValidation('#' + activityDesc.attr('id') + '');
                    customAlert('Please Enter Activity Description');
                    return false;
                }


                if ($('.inkind-hours-div').is(':visible')) {
                    if (activityHrs.val() === '') {
                        plainValidation('#' + activityHrs.attr('id') + '');
                        customAlert('Please Enter Hours');
                        return false;
                    }

                    if (activityMins.val() === '') {
                        plainValidation('#' + activityMins.attr('id') + '');
                        customAlert('Please Enter Minutes');
                        return false;
                    }

                    if (getTotalhoursMinutes(activityHrs.val(), activityMins.val()) <= 0) {

                        plainValidation('#' + activityHrs.attr('id') + '');
                        plainValidation('#' + activityMins.attr('id') + '');
                        customAlert('Please enter valid hours and minutes');
                        return false;
                    }

                    if(!validateHoursMinutes(activityHrs) || !validateHoursMinutes(activityMins))
                    {
                        return false;
                    }

                    if(getTotalhoursMinutes(activityHrs.val(),activityMins.val())>parseFloat(_warningHrsEntry.split(':')[0]) && _allowExceedingWarninghrs==false)
                    {
                        return false;
                    }
                   

                    //if(getTotalhoursMinutes(activityHrs.val(),activityMins.val()) > parseFloat(_warningHrsEntry.split(':')[0]))
                    //{

                    //}

                }

                if ($('.inkind-miles-div').is(':visible') && acitivityMiles.val() === '') {

                    plainValidation('#' + acitivityMiles.attr('id') + '');
                    customAlert('Please Enter Miles Driven');
                    return false;

                }




                if (inkindAmount.val() === '') {
                    plainValidation('#' + inkindAmount.attr('id') + '');
                    customAlert('Please Enter Amount');
                    return false;
                }

                if (centerSelect.val() === '0') {
                    plainValidation('#' + centerSelect.attr('id') + '');
                    customAlert('Please Select Center');
                    return false;
                }

                if ($('#parent-sig-div').is(':visible') && parentSig.val() === '') {
                    plainValidation('#sig1');
                    customAlert('Please enter and accept signature');
                    return false;
                }

                if ($('#staff-sig-div').is(':visible') && staffSig.val() === '') {
                    plainValidation('#sig2');
                    customAlert('Please enter and accept signature');
                    return false;
                }

                var InKindTransactions = {};
                var InKindDonarsContact = {};

                var InKindTransactionsList = [];

                var activeCodeArray = [];

                var parentType = false;

                if ($('input[name=activityTypeRadio][value=2]').is(':checked')) {

                    $('input[name=activityCheck]:checked').each(function (l, actr) {
                        activeCodeArray.push($(actr).val());
                    });

                }

                else {
                    activeCodeArray.push($('#activity-type-select').val());
                }

                activeCodeArray = unique(activeCodeArray);

                InKindDonarsContact.IsInsert = false;
                InKindDonarsContact.InKindDonarId = 0;
                InKindDonarsContact.CorporateName = '';
                InKindDonarsContact.ContactName = '';
                InKindDonarsContact.FirstName = '';
                InKindDonarsContact.LastName = '';
                InKindDonarsContact.AddressLine1 = '';
                InKindDonarsContact.AddressLine2 = '';
                InKindDonarsContact.City = '';
                InKindDonarsContact.County = '';
                InKindDonarsContact.ApartmentNo = '';
                InKindDonarsContact.State = '';
                InKindDonarsContact.ZipCode = '';
                InKindDonarsContact.PhoneNo = '';
                InKindDonarsContact.EmailId = '';
                InKindDonarsContact.Gender = '';
                InKindDonarsContact.IsCompany = false;
                InKindDonarsContact.PhoneType = '';

                if (activeCodeArray.length > 0) {
                    $.each(activeCodeArray, function (m, activeCode) {
                        var amtType = ($('input[name=activityTypeRadio][value=2]').is(':checked')) ? $('input[name=activityCheck][value=' + activeCode + ']:checked').attr('amt-type') : $('option:selected', '#activity-type-select').attr('amt-type');
                        var minutes = '0';
                        var hrs = '0';
                        var miles = '0';

                        if (amtType === '1')//Miles
                        {
                            miles = ($('.inkind-miles-div').is(':visible')) ? acitivityMiles.val() : '0';
                            hrs = '0';
                            minutes = '0';
                        }
                        else if (amtType === '2')//Hours
                        {
                            miles = '0';
                            hrs = (activityHrs.val() == null || activityHrs.val() == '') ? 0 : parseInt(activityHrs.val());
                            minutes = (activityMins.val() == null || activityMins.val() == '') ? 0 : parseInt(activityMins.val());
                        }

                        else if (amtType === '3')//fixed
                        {
                            miles = '0';
                            hrs = '0';
                            minutes = '0';
                        }



                        if (!$('.inkind-company-div').is(':visible')) {

                            if ($('.contact-entry-div').is(':visible') && $('.contact-entry-div').find('input:radio[name=radiocompany][value=1]').is(':checked')) {
                                if ($('.contact-entry-div').find('.individual-parent-type-div').is(':visible')) {
                                    parentType = $('.contact-entry-div').find('.individual-parent-type-div').find('input:checkbox[name=parenttype]').is(':checked');
                                }
                            }
                            else if ($('#inkind-info-form').is(':visible')) {
                                if ($('#inkind-info-form').find('.individual-parent-type-div-act').is(':visible')) {
                                    parentType = $('#inkind-info-form').find('.individual-parent-type-div-act').find('input:checkbox[name=parenttype]').is(':checked');
                                }
                                else {
                                    parentType = true;
                                }
                            }

                        }



                        InKindTransactions = {};

                        InKindTransactions.ActivityNotes = activityDesc.val();
                        InKindTransactions.InKindAmount = parseFloat(inkindAmount.val());
                        InKindTransactions.ActivityID = parseInt(activeCode);
                        InKindTransactions.IsActive = true;
                        InKindTransactions.DonorSignature = parentSig.val();
                        InKindTransactions.StaffSignature = staffSig.val();
                        InKindTransactions.IsCompany = ($('.inkind-company-div').is(':visible')) ? true : false;
                        InKindTransactions.Hours = hrs;
                        InKindTransactions.Minutes = minutes;
                        InKindTransactions.CenterID = parseInt(centerSelect.val());
                        InKindTransactions.Enc_CenterID = "";
                        InKindTransactions.ClassroomID = parseInt(classroomSelect.val())==NaN || classroomSelect.val()==null || classroomSelect.val()==''?0:parseInt(classroomSelect.val());
                        InKindTransactions.Enc_ClassroomID = "";
                        InKindTransactions.FromNo = 0;
                        InKindTransactions.ActivityDate = activityDate.val();
                        InKindTransactions.ClientID = "0";
                        InKindTransactions.ParentID = $('#inkindPersonName').attr('cl_id');
                        InKindTransactions.IsEmergencyContact =parseInt($('#inkindPersonName').attr('is_ec'))==1;
                        InKindTransactions.MilesDriven = miles;
                        InKindTransactions.ParentType = parentType;
                        InKindTransactions.InkindTransactionID = 0;
                        InKindTransactionsList.push(InKindTransactions);
                    });
                }







                if ($('.contact-entry-div').is(':visible')) {

                    if ($('input[name=radiocompany]:checked').length > 0) {
                        InKindDonarsContact.FirstName = $('#text-contact-nameF').val();
                        InKindDonarsContact.LastName = $('#text-contact-nameL').val();
                        InKindDonarsContact.ContactName = $('#text-contact-nameF').val() + ' ' + $('#text-contact-nameL').val();
                        InKindDonarsContact.AddressLine1 = $('#text-addressline1').val();
                        InKindDonarsContact.AddressLine2 = $('#text-addressline2').val();
                        InKindDonarsContact.City = $('#text-select-city').val();
                        InKindDonarsContact.State = $('#text-state').val();
                        InKindDonarsContact.ZipCode = $('#text-zipcode').val();
                        InKindDonarsContact.PhoneNo = $('#text-select-phoneNo').val();
                        InKindDonarsContact.EmailId = $('#text-select-email').val();
                        InKindDonarsContact.NoEmail = $('#text-select-email').parent('div').find('input:checkbox[name=no_email]').is(':checked');
                    }
                    if ($('input[name=radiocompany][value=1]').is(':checked')) {
                        InKindDonarsContact.InKindDonarId = parseInt($('#inkindPersonName').attr('cl_id'));
                        InKindDonarsContact.Gender = $('input[name=PGender]:checked').val();
                        //InKindDonarsContact.ApartmentNo = $('#text-apartment-no').val();
                        InKindDonarsContact.ApartmentNo = '';
                        InKindDonarsContact.County = $('#text-county').val();
                        InKindDonarsContact.IsInsert = true;
                        InKindDonarsContact.IsCompany = false;
                        InKindDonarsContact.PhoneType = ($('#text-select-phonetype').val() == null || $('#text-select-phonetype').val() == '') ? '0' : $('#text-select-phonetype').val();
                    }

                    else if ($('input[name=radiocompany][value=2]').is(':checked')) {
                        InKindDonarsContact.InKindDonarId = parseInt($('#inkindCompanyName').attr('cl_id'));
                        InKindDonarsContact.CorporateName = $('#text-company-name').val();
                        InKindDonarsContact.IsInsert = true;
                        InKindDonarsContact.IsCompany = true;

                    }

                }

                var model1 = {
                    "InkindTransactionsList": InKindTransactionsList,
                    "InKindDonarsContact": InKindDonarsContact
                }



                var fileData = new FormData();
                $('#inkind-info-form').find('input:file').each(function (a, b) {
               
                    var fileInput = $(this);
                    if (fileInput.val() != undefined && fileInput.val() != null && fileInput.val() != '') {
                        var fileUpload = fileInput.get(0);
                        var files = fileUpload.files;

                        for (var i = 0; i < files.length; i++) {
                            fileData.append(files[i].name, files[i]);
                        }
                    }
                });

                //$('#inkind-info-form').find('input:file').each(function (a, b) {
                //    var fileInput = $(this);
                //    fileData.append($(fileInput).attr("name"), fileInput);
                //});

                fileData.append('modelString', JSON.stringify(model1));


                $.ajax({

                    url: HostedDir + '/InKind/InsertInkindTransactions',
                    datatype: 'json',
                    type: 'post',
                    beforeSend: function () { $('#spinner').show(); },
                    contentType: false,
                    processData: false,
                    data: fileData,
                    success: function (data) {
                        if (data === 2) {
                            location.href = '/login/Loginagency';
                        }
                        else if (data === 1) {
                            $('#inkind-info-form').trigger('reset');
                            $('#contact-info-form').trigger('reset');
                            $('#sig1').signature('clear');
                            $('#sig2').signature('clear');
                            parentSig.val('');
                            staffSig.val('');
                            $('#inkindPersonName').attr({ 'cl_id': '0', 'is_comp': '0' });
                            $('#inkindPersonName').html('');
                            $('#inkindCompanyName').html('');
                            $('.inkind-entry-div').hide();
                            $('.contact-entry-div').hide();

                            if ( $('#no-more-tables8').is(':visible') && searchText.val() != '') {

                                if (InKindTransactions.ParentID != null || InKindTransactions.ParentID != '') {
                                    $('#no-more-tables8').find('#centerTable').
                                        find('.bind_body').find('tr').
                                        children('td:eq(0)').children('p[accesskey=' + InKindTransactions.ParentID + ']').attr('data-ppp', (parentType == true?'1':'0'));
                                }

                                //  searchBtn.trigger('click');
                            }
                            $('#spinner').hide();
                            customAlert('Record saved successfully');

                        }

                        else {
                            $('#spinner').hide();
                            customAlert('Some Error Occured.Please,try again later.');
                        }

                        return false;
                    },
                    error: function (data) {
                        $('#spinner').hide();
                        customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                        return false;
                    }

                });

                _allowExceedingWarninghrs = false;

            });

            //On Click Clear Button, Resets the Inkind Entry Form//
            $('#inKindEntryExit').on('click', function () {

                $('input[name=activityTypeRadio]').prop('checked', false);

                $('#activity-des-listdiv').html('');
                $('#activity-description').hide();
                $('#descriptionTextArea').val('');
                $('#ddlCenterDetails').val(0);
                $('#classroomSelect').find('option').remove();
                $('#inkindHoursText').val('');
                $('#inkindMinutesText').val('');
                $('#inkindAmountTxt').val('');
                $('#inkindMilesText').val('');
                $('#parent-sig-div').find('#imageSig1').val('');
                $('#sig1').signature('clear');
                $('#parent-sig-div').hide();
                $('#staff-sig-div').find('#imageSig2').val('');
                $('#sig2').signature('clear');
                $('#staff-sig-div').hide();
                $('.inkind-hours-div,.inkind-miles-div,.amount-div').hide();
                _allowExceedingWarninghrs = false;
            });





            $('#contact-info-form').find('#ddlpagetodisplay').on('change', function () {
               

                _lastIndexInkindentry = 0;


                _requestedPageInkindentry = $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val() == null ? _requestedPageInkindentry : $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val();

                _pageSizeInkindentry =   $('#contact-info-form').find('#ddlpagetodisplay').val();

                getInkindDonorsFromDb(searchText.val(),'');

                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);
                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);
            });




            $('#contact-info-form').find('#ulPaging').find('#First').on('click', function () {

                var $thisValue = 'First';

                _requestedPageInkindentry = $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val() == null ? _requestedPageInkindentry : $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val();

                fnChangePage($thisValue);

            });


            $('#contact-info-form').find('#ulPaging').find('#Back').on('click', function () {

                var $thisValue = 'Back';

                _requestedPageInkindentry = $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val()== null ? _requestedPageInkindentry : $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val();

                fnChangePage($thisValue);

            });

            $('#contact-info-form').find('#ulPaging').find('#ddlpaging').on('change', function () {


                getListafterupdation();
            });

            $('#contact-info-form').find('#ulPaging').find('#Next').on('click', function () {

                var $thisValue = 'Next';

                _requestedPageInkindentry = $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val() == null ? _requestedPageInkindentry : $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val();

                fnChangePage($thisValue);

            });

            $('#contact-info-form').find('#ulPaging').find('#Last').on('click', function () {

                var $thisValue = 'Last';

                _requestedPageInkindentry =  $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val()== null ? _requestedPageInkindentry :  $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val();

                fnChangePage($thisValue);

            });

        });





        function  fnChangePage(val) {

            if ($('#centerTable').find('tbody').find('.child-row').length === 0) {

                return false;
            }





            window.setTimeout(function () {
             


                _pageLoadedFirst = false;

                _pageSizeInkindentry =  $('#contact-info-form').find('#ddlpagetodisplay').val();

                if (val == 'First') {
                    _startIndexInkindEntry = 0;

                    _lastIndexInkindentry = parseInt( _pageSizeInkindentry) + parseInt(_lastIndexInkindentry * _requestedPageInkindentry);

                    _requestedPageInkindentry = ((_startIndexInkindEntry / 10) + 1);

                    gotoNextPage(_requestedPageInkindentry, _pageSizeInkindentry,val);

                    //$('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);

                    //$('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);


                    //$('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                    //$('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);


                    // _lastIndexInkindentry = 0;
                }
                else if (val == 'Last') {

                    _startIndexInkindEntry = parseInt((_totalRecordsInkindentry - 1) / _pageSizeInkindentry) * _pageSizeInkindentry;

                    _lastIndexInkindentry = _totalRecordsInkindentry;

                    _requestedPageInkindentry = _numOfPagesInkindEntry;

                    gotoNextPage(_requestedPageInkindentry, _pageSizeInkindentry,val);

                    //$('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', false);

                    //$('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', false);


                    //$('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                    //$('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);









                }
                else if (val == 'Next') {


                    _lastIndexInkindentry = parseInt(_pageSizeInkindentry) + parseInt(_lastIndexInkindentry);

                    _requestedPageInkindentry = (parseInt(_lastIndexInkindentry / _pageSizeInkindentry) + 1);

                    gotoNextPage(_requestedPageInkindentry, _pageSizeInkindentry,val);


                    //$('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', false);

                    //$('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', false);



                    //if (parseInt(_lastIndexInkindentry) + parseInt(_pageSizeInkindentry) >= _totalRecordsInkindentry) {

                    //    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                    //    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);
                    //}
                    //else if (parseInt(_lastIndexInkindentry) - parseInt(_pageSizeInkindentry) < _totalRecordsInkindentry) {

                    //    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                    //    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);
                    //}
                }
                else if (val == 'Back') {


                    _requestedPageInkindentry = _requestedPageInkindentry - 1;

                    _lastIndexInkindentry = parseInt(_lastIndexInkindentry) - parseInt(_pageSizeInkindentry);

                    gotoNextPage(_requestedPageInkindentry, _pageSizeInkindentry,val);

                    //if (parseInt(_lastIndexInkindentry) + parseInt(_pageSizeInkindentry) > _totalRecordsInkindentry) {

                    //    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                    //    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);
                    //}
                    //else if (parseInt(_lastIndexInkindentry) - parseInt(_pageSizeInkindentry) < _totalRecordsInkindentry) {

                    //    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                    //    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);

                    //}
                    //if (_requestedPageInkindentry == 1) {

                    //    $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);

                    //    $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);
                    //}
                }
                else {
                }

            }, 10)
        }


        function  gotoNextPage(reqPage, pageSize,valElement) {


            getInkindDonorsFromDb($('#searchText').val(),valElement);

        }

        function getTotalRecord (data, val) {

            debugger;


            $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', false);

            $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', false);


            $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

            $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);


            _pageSizeInkindentry =    $('#contact-info-form').find('#ddlpagetodisplay').val();

            if (data > 0) {

                _totalRecordsInkindentry = parseInt(data);

                if (_totalRecordsInkindentry <= _pageSizeInkindentry) {

                    $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);

                    $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);


                    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);

                }

                _numOfPagesInkindEntry = parseInt(_totalRecordsInkindentry / _pageSizeInkindentry) + ((_totalRecordsInkindentry % _pageSizeInkindentry == 0) ? 0 : 1);

                $('#contact-info-form').find('#ulPaging').find('#ddlpaging').empty();

                for (i = 1; i <= _numOfPagesInkindEntry; i++) {

                    var newOption = "<option value='" + i + "'>" + i + "</option>";
                    $('#contact-info-form').find('#ulPaging').find('#ddlpaging').append(newOption);
                }

                $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val(_requestedPageInkindentry);
            }
            else {

                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);

                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);


                $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);

            }



            if (val == 'First') {


                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);

                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);


                $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);


                _lastIndexInkindentry = 0;
            }
            else if (val == 'Last') {


                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', false);

                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', false);


                $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);

            }
            else if (val == 'Next') {

                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', false);

                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', false);


                if (parseInt(_lastIndexInkindentry) + parseInt(_pageSizeInkindentry) >= _totalRecordsInkindentry) {

                    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);
                }
                else if (parseInt(_lastIndexInkindentry) - parseInt(_pageSizeInkindentry) < _totalRecordsInkindentry) {

                    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);
                }
            }
            else if (val == 'Back') {


                if (parseInt(_lastIndexInkindentry) + parseInt(_pageSizeInkindentry) > _totalRecordsInkindentry) {

                    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);
                }
                else if (parseInt(_lastIndexInkindentry) - parseInt(_pageSizeInkindentry) < _totalRecordsInkindentry) {

                    $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                    $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);

                }
                if (_requestedPageInkindentry == 1) {

                    $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);

                    $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);
                }
            }
            else {
            }


            if(data==1 || data==0)
            {
                $('#contact-info-form').find('.pagination-file').parent('div').hide();
            }
            else{
                $('#contact-info-form').find('.pagination-file').parent('div').show();

            }

            


        }

        function  getListafterupdation() {


            _pageSizeInkindentry = $('#contact-info-form').find('#ddlpagetodisplay').val();

            _requestedPageInkindentry =   $('#contact-info-form').find('#ulPaging').find('#ddlpaging').val();

            _startIndexInkindEntry = (_pageSizeInkindentry * (_requestedPageInkindentry - 1)) + 1;

            _lastIndexInkindentry = parseInt(_pageSizeInkindentry * _requestedPageInkindentry) - parseInt(_pageSizeInkindentry);






            getInkindDonorsFromDb($('#searchText').val());

            if (_requestedPageInkindentry == 1) {


                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', true);

                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', true);


                $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);
            }
            else if (_requestedPageInkindentry == _numOfPagesInkindEntry) {


                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', false);

                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', false);


                $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', true);

                $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', true);

            }
            else {

                $('#contact-info-form').find('#ulPaging').find('#First').attr('disabled', false);

                $('#contact-info-form').find('#ulPaging').find('#Back').attr('disabled', false);


                $('#contact-info-form').find('#ulPaging').find('#Next').attr('disabled', false);

                $('#contact-info-form').find('#ulPaging').find('#Last').attr('disabled', false);


            }




        }






        function getDifferenceDays(startDate,endDate)
        {
            startDate = new Date(startDate);
            endDate   = new Date(endDate);
            var diff  = new Date(endDate - startDate);
            var days  = diff/1000/60/60/24;
            return days;
        }


        function getTotalhoursMinutes(_hrs,_mins)
        {
            
            _hrs = (_hrs != '') ? parseFloat(_hrs) : 0;
              _mins = (_mins != '') ? parseFloat(_mins) : 0;
           return  (_hrs + (_mins / 60));
        }

        // validation check for In-kind hours and minutes, should not greater than 12 hours//
        function validateHoursMinutes(ele) {
            
            //   $(ele).css({ 'background-color': '' });

         //   activityHrs.popover('hide');
            cleanValidation();
            var _isValidhours = true;
            var _isHours = 0;

            if ($(ele)[0].id == activityHrs[0].id)
            {
                _isHours = 1;
            }
            if ($(ele)[0].id == activityMins[0].id)
            {
                _isHours = 0;
            }

            try {
                if (activityHrs.val() != '') {

                  
                    var _activtiyHrsMins = getTotalhoursMinutes(activityHrs.val(), activityMins.val());

                    if (_activtiyHrsMins > parseInt(_maxHrMinEntry.split(':')[0])) {
                        customAlert('Activity time should not greater than 12 hours');
                        plainValidation(activityHrs);
                        inkindAmount.val(0);
                        if (activityMins.val() != '')
                        {
                            plainValidation(activityMins);
                        }
                        _isValidhours = false;
                    }

                    else if (_activtiyHrsMins > parseFloat(_warningHrsEntry.split(':')[0]) && _allowExceedingWarninghrs==false) {

                        activityHrs.popover('show');
                    }
                    else {
                        activityHrs.popover('hide');
                    }
                  


                }

               
            }
            catch (error) {
                console.log(error);
                _isValidhours = false;
            }

            return _isValidhours;

        }

        function validatedates(inputTextObject) {
         
            if ($(inputTextObject).val().trim() != "MM/DD/YYYY" && $(inputTextObject).val().trim() != "") {
                var dateformat = /^(0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])[\/\-]\d{4}$/;
                var regex = new RegExp(dateformat);
                if (!regex.test($(inputTextObject).val())) {
                    customAlert("Invalid date.");
                    $(inputTextObject).val('');
                    return false;
                }
                else if (new Date($(inputTextObject).val()).setHours(0, 0, 0, 0) > new Date().setHours(0, 0, 0, 0)) {
                    customAlert("Entered Date should be less than or equal to today's date");
                    $(inputTextObject).val('');
                    return false;
                }
                else {
                    return true;
                }

            }

        }


        // validation for in-kind dates to check, whether entered date is allowed//
        function  isValidAllowedDates(enteredDate)
        {
            debugger;


            var $inkindPeriods= _inkindBudgetPeriods;
            var $isAllowed=false;
            if($inkindPeriods!=null && $inkindPeriods.length>0)
            {


                var $periodSearch=$.grep($inkindPeriods,function(period,index){

                    return   new Date(enteredDate).setHours(0,0,0,0) >= new Date(period.StartDate).setHours(0,0,0,0)
                        && new Date(enteredDate).setHours(0,0,0,0)<=new Date(period.EndDate).setHours(0,0,0,0)
                });
                //$.each($inkindPeriods,function(){

                //    if( new Date(enteredDate).setHours(0,0,0,0) >= new Date($(this).StartDate).setHours(0,0,0,0)
                //        && new Date(enteredDate).setHours(0,0,0,0)<=new Date($(this).EndDate).setHours(0,0,0,0)){
                //        $isAllowed=true;
                //        return $isAllowed;
                //    }
                //});

                if($periodSearch!=null && $periodSearch.length>0)
                {
                    $isAllowed=true;
                }

                return $isAllowed;

            }
            else
            {
                $isAllowed=false;
                return $isAllowed;
            }




        }


        //function to add more attachments for the in-kind entry//
        function addMoreInkindAtt(ele) {
            var divLength = $('#inkind-info-form').find('.attach-div').find('input:file').length;

            var appendDiv = '<div class="sum_attachparticic list_panic_info">\
                                   <input type="file" name="InkindAttachmentsList[' + divLength + '].InkindAttachmentFile" class="form-control" />\
                                   <a href="javascript:void(0)" title="Remove Attachment" onclick="removeInkindAtt(this);"><i class="fa fa-minus-circle"></i>&nbsp;Remove</a>\
                               </div>';
            $('#inkind-info-form').find('.attachparticic_myactive').append(appendDiv);

        }
        //function to remove the attachments for the in-kind entry//
        function removeInkindAtt(ele) {
            $(ele).parent('.sum_attachparticic').remove();

            $.each($('#inkind-info-form').find('.attach-div').find('input:file'), function (i, att) {
                $(att).attr('name', 'InkindAttachmentsList[' + i + '].InkindAttachmentFile');
            });
        }


        // function to return unique values in array//
        function unique(list) {
            var result = [];
            $.each(list, function (i, e) {
                if ($.inArray(e, result) == -1) result.push(e);
            });
            return result;
        }

        // function to get the inkind donors available in database based on the search text entered//
        function getInkindDonorsFromDb(searchtext, val) {

            $.ajax({
                url: HostedDir + '/InKind/GetParentCompanyDonorsBySearch',
                datatype: 'json',
                type: 'post',
                data: { searchName: $('#searchText').val(),requestedPage:_requestedPageInkindentry,pageSize:_pageSizeInkindentry },
                beforeSend: function () { $('#spinner').show() },
                success: function (data) {
                 
                    $('#spinner').hide();

                    if (data != null) {
                        getTotalRecord(parseInt(data.TotalRecord),val);



                        if (data.InkindDonorsList != null) {
                            if (data.InkindDonorsList.length > 0) {

                                var appendDiv = '';


                                $.each(data.InkindDonorsList, function (i, donors) {
                                    var phoneDiv = '';
                                    if (donors.PhoneNoList != null && donors.PhoneNoList.length > 0) {
                                        $.each(donors.PhoneNoList, function (j, phone) {
                                            phoneDiv += phone.PhoneNo + '<br>';
                                        });
                                    }

                                    appendDiv += '<tr class="child-row" style="line-height:25px;">\
                                                  <td data-title="Name" class="inset-width">\
                                                    <p class="client-name" onclick="showParentInfo(this);" style="cursor:pointer;text-decoration:underline;" data-ppp=' + donors.PastPresentParent + ' accesskey=' + donors.InkindDonorId + '  data-hme=' + donors.AllowHomeBasedActivity + '  data-ec='+donors.EmergencyContact+'>' + donors.Name + '</p>\
                                                    </td>\
                                                     <td data-title="Company Name" class="inset-width">\
                                                      <p class="parent-name">'+ donors.CompanyName + '</p>\
                                                       </td>\
                                                        <td data-title="Address" class="icc-center">'+ donors.Address + '\
                                                          </td>\
    <td data-title="Phone No" class="inset-width">' + phoneDiv + '\
    </td>';

                                    if (donors.EmailAddress != '') {
                                        appendDiv += '<td data-title="Email" class="phn-tabrate">' + donors.EmailAddress + '\
                                          </td>\
                                            </tr>';
                                    }
                                    else {
                                        appendDiv += '<td data-title="Email" class="phn-tabrate">No Email</td>\
                                                     </tr>';

                                    }



                                });

                                $('#totalCountSpan').text(data.TotalRecord);
                                $('.bind_body').html(appendDiv);
                                $('#no-more-tables8').show();
                                $('.contact-entry-div').hide();
                                $('.not-exists-div').hide();
                                $('.inkind-entry-div').hide();


                                if (  $('.bind_body').find('tr').length === 1) {
                                    $('.bind_body').css({ 'width': '100%' });
                                }
                                else if (  $('.bind_body').find('tr').length > 0) {

                                    $('.bind_body').css({ 'width': '100%' });
                                }

                            }

                            else {
                                $('.not-exists-div').show();
                                $('#contact-legend').html('Add Contact Information');
                                $('#contact-info-form').trigger('reset');
                                $('#no-more-tables8').hide();
                                $('.contact-entry-div').show();
                            }
                        }
                        else {
                            $('.not-exists-div').show();
                            $('#contact-legend').html('Add Contact Information');
                            $('#contact-info-form').trigger('reset');
                            $('#no-more-tables8').hide();
                            $('.contact-entry-div').show();
                        }
                    }
                    else {
                        $('.not-exists-div').show();
                        $('#contact-legend').html('Add Contact Information');
                        $('#contact-info-form').trigger('reset');
                        $('#no-more-tables8').hide();
                        $('.contact-entry-div').show();
                    }
                },
                failure: function (data) {
                    $('#spinner').hide();
                },
                error: function (data) {
                    $('#spinner').hide();
                    customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                }

            });
        }

        //function to get the inkind amount type on checking the inkind activity//
        function getInkindActivityAmountType(ele) {

            $('#spinner').show();

            var activityNotes = '';
            $('input[name=activityCheck]:checked').each(function (k, act) {

                activityNotes += $(act).parent('.check-space').siblings('label').html() + ',';
            });

            activityNotes = activityNotes[activityNotes.length - 1] == ',' ? activityNotes.slice(0, -1) : activityNotes;

            $('#descriptionTextArea').val(activityNotes);

            var thisVal = $(ele).val();
            var arry = [];
            arry.push(thisVal);

            if (thisVal === '0') {
                $('.amount-div,.inkind-hours-div,.inkind-miles-div').hide();
            }
            else {




                $.ajax({
                    url: HostedDir + '/InKind/GetDetailsByActivityType',
                    datatype: 'json',
                    type: 'post',
                    data: { activityCode: JSON.stringify(arry), reqDetails: 1, hours: '' },
                    success: function (data) {

                        $('#spinner').hide();
                        $('#inkindHoursText').val('');
                        $('#inkindMinutesText').val('');
                        $('#inkindAmountTxt').val('');
                        $('#inkindMilesText').val('');
                        $('#inkindAmountTxt').prop('disabled', true);

                        if (data.ActivityAmountType === '2')//Hours Type
                        {

                            if ($(ele).is(':checked')) {
                                $('.inkind-hours-div').show();
                                $('.amount-div').show();
                            }
                            else {
                                $('.inkind-hours-div').hide();
                            }
                            if ($('input[name=activityCheck][amt-type=1]').is(':checked')) {
                                $('.inkind-miles-div').show();
                            }
                            else {
                                $('.inkind-miles-div').hide();
                            }



                        }

                        else if (data.ActivityAmountType === '1') {//Miles Type

                            if ($(ele).is(':checked')) {
                                $('.inkind-miles-div').show();
                                $('.amount-div').show();
                            }
                            else {
                                $('.inkind-miles-div').hide();

                            }


                            if ($('input[name=activityCheck][amt-type=2]').is(':checked')) {
                                $('.inkind-hours-div').show();
                            }
                            else {
                                $('.inkind-hours-div').hide();
                                //$('.amount-div').hide();
                            }



                        }
                        else if (data.ActivityAmountType === '3') { //Fixed Type
                            //  $('.inkind-miles-div').hide();
                            //   $('.inkind-hours-div').hide();
                            $('.amount-div').show();

                            if ($(ele).is(':checked')) {
                                $('#inkindAmountTxt').prop('disabled', false);
                            }
                            else {
                                $('#inkindAmountTxt').prop('disabled', true);

                            }

                            if ($('input[name=activityCheck][amt-type=2]').is(':checked')) {
                                $('.inkind-hours-div').show();
                            }
                            else {
                                $('.inkind-hours-div').hide();
                            }

                            if ($('input[name=activityCheck][amt-type=1]').is(':checked')) {
                                $('.inkind-miles-div').show();
                            }
                            else {
                                $('.inkind-miles-div').hide();
                            }
                        }



                        if (data.IsSignatureRequired) {
                            $('#parent-sig-div,#staff-sig-div').show();
                        }
                        else {
                            $('#parent-sig-div,#staff-sig-div').hide();
                        }

                        if ($('input[name=activityCheck]:checked').length == 0) {
                            $('.amount-div').hide();
                            $('#parent-sig-div,#staff-sig-div').hide();
                        }
                    },
                    error: function (data) {
                        $('#spinner').hide();
                        customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                    }


                });
            }

            return true;

        }

        //function to get the inkind amount type on selecting the inkind activity//

        function onActivitySelectChange(ele) {
            cleanValidation();

            var activityValue = $(ele).val();

            var arry = [];
            arry.push(activityValue);
            if (activityValue === '0') {
                $('#imageSig1,#imageSig2').val('');
                $('#sig1').signature('clear');
                $('#sig2').signature('clear');
                $('#descriptionTextArea,.inkind-hours-div,.inkind-miles-div,.amount-div,#parent-sig-div,#staff-sig-div').hide();
            }
            else {
                $.ajax({
                    url: HostedDir + '/InKind/GetDetailsByActivityType',
                    datatype: 'json',
                    type: 'post',
                    data: { activityCode: JSON.stringify(arry), reqDetails: 1, hours: '' },
                    success: function (data) {

                        $('#spinner').hide();
                        $('#inkindHoursText').val('');
                        $('#inkindMinutesText').val('');
                        $('#inkindAmountTxt').val('');
                        $('#inkindMilesText').val('');
                        $('#inkindAmountTxt').prop('disabled', true);
                        $('#descriptionTextArea').val(data.ActivityDescription);

                        if (data.ActivityAmountType === '2')//Hours Type
                        {
                            $('.inkind-hours-div').show();
                            $('.inkind-miles-div').hide();
                            $('.amount-div').show();
                        }

                        else if (data.ActivityAmountType === '1') {//Miles Type
                            $('.inkind-hours-div').hide();
                            $('.inkind-hours-div').find('#inkindHoursText,#inkindMinutesText').val('');
                            $('.inkind-miles-div').show();
                            $('.amount-div').show();

                        }
                        else if (data.ActivityAmountType === '3') { //Fixed Type
                            $('.inkind-hours-div').hide();
                            $('.inkind-miles-div').hide();
                            $('.amount-div').show();
                            $('#inkindAmountTxt').prop('disabled', false);
                        }

                        if (data.IsSignatureRequired===true) {

                            $('#imageSig1,#imageSig2').val('');
                            $('#sig1').signature('clear');
                            $('#sig2').signature('clear');
                            $('#parent-sig-div,#staff-sig-div').show();
                        }
                        else {
                            $('#imageSig1,#imageSig2').val('');
                            $('#sig1').signature('clear');
                            $('#sig2').signature('clear');
                            $('#parent-sig-div,#staff-sig-div').hide();
                        }
                        if (data.IsAllowDocumentUpload === 1) {
                            $('#inkind-info-form').find('input:file').val('');
                            $('#inkind-info-form').find('.attachparticic_myactive').html('');
                            $('#inkind-info-form').find('.attach-div').show();

                        }
                        else {
                            $('#inkind-info-form').find('input:file').val('');
                            $('#inkind-info-form').find('.attachparticic_myactive').html('');
                            $('#inkind-info-form').find('.attach-div').hide();
                        }

                    },
                    error: function (data) {
                        $('#spinner').hide();
                        customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                    }


                });
            }

        }


        function showNoActiveInkinds()
        {
            BootstrapDialog.alert('In-Kind periods was not set-up yet or closed !');
        }

        //Resets the inkind entry form after click of name on the loaded available list.
        function showParentInfo(ele) {

            cleanValidation();


            if(_inkindBudgetPeriods==null ||(_inkindBudgetPeriods!=null && _inkindBudgetPeriods.length==0))
            {

           
                showNoActiveInkinds();
               
                return false;
            }


            //$('.contact-entry-div').find('input[name=radiocompany][value=1]').trigger('click');
            $('.contact-entry-div').hide();
            $('.inkind-entry-div').show();
            // $('#contact-legend').html('Contact Information');
            var iscompany = '0';
            var companyName = '';
            var isPastPresentParent = 0;
            var isShowHome = 0;
            var isEmergencyContact=0;
            companyName = $(ele).parent('td').parent('tr[class=child-row]').children('td').eq(1).children('p').html();
            iscompany = (companyName === '') ? '0' : '1';

            isPastPresentParent = parseInt($(ele).attr('data-ppp'));
            
            isShowHome = parseInt($(ele).attr('data-hme'));

            isEmergencyContact=parseInt($(ele).attr('data-ec'));

            var $homeCheck = $('#inkind-info-form').find('#activitytyperadiodiv').find('input:radio[name=activityTypeRadio][value=2]');

            $('#inkindPersonName').html($(ele).html()).attr({ 'cl_id': $(ele).attr('accesskey'), 'is_comp': iscompany ,'is_ec':isEmergencyContact });
            $('#inkindCompanyName').html('');
            $('.inkind-company-div').hide();
            $('.inkind-miles-div,.inkind-hours-div,.amount-div').hide();
            $('#parent-sig-div,#staff-sig-div').hide();
            $('#sig1').signature('clear');
            $('#sig2').signature('clear');
            $('#imageSig1,#imageSig2').val('');
            $('#classroomSelect').html('<option value="0">--Select Classroom--</option>');
            $('#activity-des-listdiv').html('');
            $('#activity-description').hide();
            $('#ddlCenterDetails').val(0);
            $('#classroomSelect').find('option').remove();
            $('#descriptionTextArea').val('');
            _allowExceedingWarninghrs = false;

            $('input[name=activityTypeRadio]').prop('checked', false);

            if (iscompany === '1') {
                $('#inkindCompanyName').html(companyName);
                $('#inkindCompanyName').attr({ 'cl_id': $(ele).attr('accesskey'), 'is_comp': iscompany });
                $('#inkind-info-form').find('.individual-parent-type-div-act').find('input:checkbox[name=parenttype]').prop('checked', false);
                $('#inkind-info-form').find('.individual-parent-type-div-act').hide();
                $homeCheck.prop('checked', false).parent('span').parent('div').show();


                $('.inkind-company-div').show();

            }
            else {
                $('#inkindCompanyName').html('');
                $('#inkindCompanyName').attr({ 'cl_id': '0', 'is_comp': '0' });
                $('.inkind-company-div').hide();

                //if (isPastPresentParent == 0) {
                //    $('#inkind-info-form').find('.individual-parent-type-div-act').find('input:checkbox[name=parenttype]').prop('checked', false);
                //    $('#inkind-info-form').find('.individual-parent-type-div-act').show();
                //    //home shown for all code0643
                //    $('#inkind-info-form').find('#activitytyperadiodiv').find('input:radio[name=activityTypeRadio][value=1]').trigger('click');
                //}
                //else {
                //    $('#inkind-info-form').find('.individual-parent-type-div-act').find('input:checkbox[name=parenttype]').prop('checked', false);
                //    $('#inkind-info-form').find('.individual-parent-type-div-act').hide();

                //    $homeCheck.prop('checked', false).parent('span').parent('div').show();
                //    //home shown for all code0643
                //    $('#inkind-info-form').find('#activitytyperadiodiv').find('input:radio[name=activityTypeRadio][value=2]').prop('checked', false).parent('span').parent('div').show();
                //}



                if(isShowHome==0)
                {
                    if(isPastPresentParent==InkindDonarType.PastParent)
                    {
                        $('#inkind-info-form').find('.individual-parent-type-div-act').find('input:checkbox[name=parenttype]').prop('checked', true);
                        $('#inkind-info-form').find('.individual-parent-type-div-act').show();
                    }
                    else 
                        {
                        $('#inkind-info-form').find('.individual-parent-type-div-act').find('input:checkbox[name=parenttype]').prop('checked', false);
                        $('#inkind-info-form').find('.individual-parent-type-div-act').hide();
                    }
                }

                if (isShowHome === 1) {
                    $homeCheck.prop('checked', false).parent('span').parent('div').show();
                }
                else {
                    $homeCheck.prop('checked', false).parent('span').parent('div').hide();

                    $homeCheck.closest('#activitytyperadiodiv').find('input:radio[name=activityTypeRadio][value=1]').trigger('click');

                }


            }

            //$('#scrolldiv').trigger('click');
            // $('#inkind-info-form').trigger('reset');



            $('html, body').animate({ scrollTop: $('#inkind_Entry_scroll').offset().top - 50 }, 1000);




            // scrollTo('#inkind_Entry_scroll');
            $('#activity-date').val(getFormattedDate(new Date()));

        }

        //Scroll the page to bottom if the name is clicked on the loaded list//
        function scrollTo(hash) {
            // Make sure this.hash has a value before overriding default behavior
            if (hash !== "") {
                // Prevent default anchor click behavior
                event.preventDefault();

                // Store hash
                var hash = hash;

                // Using jQuery's animate() method to add smooth page scroll
                // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
                $('html, body').animate({
                    scrollTop: $(hash).offset().top
                }, 800, function () {

                    // Add hash (#) to URL when done scrolling (default click behavior)
                    window.location.hash = hash;
                });
            } // End if
        }

        //function to show the Corporate based contact entry form and Inkind Entry form, If Corporate radio is checked//
        function showCompanyEntry() {

            cleanValidation();

            var $Inform = $('#inkind-info-form');

            $('.company-name-div,.contact-info-div').show();
            $('.individual-parent-type-div').find('input:checkbox[name=parenttype]').prop('checked', false);
            $('.individual-apart-div,.individual-gender-div,.individual-county-div,.individual-parent-type-div').hide();
            //  $('.inkind-hours-div').hide();
            $('.inkind-entry-div').show();
            $('#text-contact-name,#text-company-name,#text-addressline1,#text-addressline2,#text-zipcode,#text-select-phoneNo,#text-select-email,#text-apartment-no,#text-county,#text-state').val('');
            $('#inkindPersonName').attr({ 'cl_id': '0', 'is_comp': '0','is_ec':'0' });
            $('#inkindPersonName').html('');
            $('#inkindCompanyName').attr({ 'cl_id': '0', 'is_comp': '0' });
            $('#inkindCompanyName').html('');
            $('#text-select-city').find('option').remove();
            $('#text-select-city').html('<option value="0">--Select City--');
            $('input[name=PGender]').prop('checked', false);
            $('.individual-phonetype-div').hide();
            $('#text-select-phonetype').val('');
            $('#activity-des-listdiv').html('');
            $('#activity-description').hide();
            $('#classroomSelect').find('option').remove();


            $('input[name=activityTypeRadio]').prop('checked', false);
            $('#ddlCenterDetails').val(0);
            $('#descriptionTextArea').val('');
            $('#inkindAmountTxt').val('');
            $('.amount-div,.inkind-miles-div,.inkind-hours-div').hide();
            $('#inkindHoursText,#inkindMinutesText,#inkindMilesText').val('');
            $('#imageSig1,#imageSig2').val('');

            $('#sig1').signature('clear');
            $('#sig2').signature('clear');

            $('#parent-sig-div,#staff-sig-div').hide();

            //home shown for all code0643
            // $Inform.find('#activitytype-div').find('input:radio[name=activityTypeRadio][value=2]').
            //prop('checked', false).parent('span').parent('div').hide();

            $('#activitytyperadiodiv').find('input[name=activityTypeRadio][value=2]').prop('checked', false)
                 .parent('span').parent('div').hide();

            $Inform.find('#activitytype-div').find('input:radio[name=activityTypeRadio][value=1]').trigger('click');


            $Inform.find('.attach-div').find('input:file').val('');
            $Inform.find('.attachparticic_myactive').html('');
            $Inform.find('.attach-div').hide();

        }

        //function to show the individual contact entry form and Inkind Entry form, If inidivdual radio is checked//
        function showParentEntry() {

            cleanValidation();

            var $inkindForm = $('#inkind-info-form');

            $('.company-name-div').hide();
            $('.individual-apart-div,.individual-gender-div,.individual-county-div,.individual-parent-type-div').show();
            $('.individual-parent-type-div').find('input:checkbox[name=parenttype]').prop('checked', false);


            $inkindForm.find('.individual-parent-type-div-act').find('input:checkbox[name=parenttype]').prop('checked', false);
            $inkindForm.find('.individual-parent-type-div-act').hide();


            $('.contact-info-div').show();
            $('.inkind-entry-div').show();
            $('#text-contact-name,#text-company-name,#text-addressline1,#text-addressline2,#text-zipcode,#text-select-phoneNo,#text-select-email,#text-apartment-no,#text-county,#text-state').val('');
            $inkindForm.trigger('reset');


            $('#inkindPersonName').attr({ 'cl_id': '0', 'is_comp': '0','is_ec':'0' });
            $('#inkindPersonName').html('');
            $('#inkindCompanyName').html('');
            $('#inkindCompanyName').attr({ 'cl_id': '0', 'is_comp': '0' });
            $('#parent-sig-div').hide();
            $('#staff-sig-div').hide();
            $('#sig1').signature('clear');
            $('#sig2').signature('clear');
            $('#imageSig1,#imageSig2').val('');
            $('#activity-date').val(getFormattedDate(new Date()));
            $('#text-select-city').find('option').remove();
            $('#text-select-city').html('<option value="0">--Select City--');
            $('input[name=PGender]').prop('checked', false);
            $('.individual-phonetype-div').show();
            $('#text-select-phonetype').val('')
            $('#activity-des-listdiv').html('');
            $('#activity-description').hide();
            $('#classroomSelect').find('option').remove();


            $('input[name=activityTypeRadio]').prop('checked', false);
            $('#ddlCenterDetails').val(0);
            $('#descriptionTextArea').val('');
            $('#inkindAmountTxt').val('');
            $('.amount-div,.inkind-miles-div,.inkind-hours-div').hide();
            $('#inkindHoursText,#inkindMinutesText,#inkindMilesText').val('');
            //home shown for all code0643
          //  $inkindForm.find('#activitytype-div').find('input:radio[name=activityTypeRadio][value=2]').
            //    prop('checked', false).parent('span').parent('div').hide();

            $('#activitytyperadiodiv').find('input[name=activityTypeRadio][value=2]').prop('checked', false)
                      .parent('span').parent('div').hide();

            $inkindForm.find('#activitytype-div').find('input:radio[name=activityTypeRadio][value=1]').trigger('click');

            $inkindForm.find('.attach-div').find('input:file').val('');
            $inkindForm.find('.attachparticic_myactive').html('');
            $inkindForm.find('.attach-div').hide();
        }

        //function to save the signature of Parent/ Corporate Person//
        function SaveSignature() {
            $('#sig1').css('background-color', '');
            isValid = false;

            var sigToImage = $('#sig1').signature('toJSON');

            if (sigToImage == '{"lines":[]}' || sigToImage.length <= 12) {
                plainValidation('#sig1');
                customAlert('Please enter and accept signature');
                return isValid;
            }


            else if (sigToImage.length <= 200) {
                plainValidation('#sig1');
                customAlert('Please enter valid signature');
                return isValid;
            }
            else {

                $('#imageSig1').val(sigToImage);
                $('#ConvertedImage').val(1);
                $('#sigtype').val(1);
                return isValid;
            }

        }

        //function to save the signature of Staff//

        function SaveSignatureStaff() {
            $('#sig2').css('background-color', '');
            isValid = false;
            var sigToImage = $('#sig2').signature('toJSON');
            if (sigToImage == '{"lines":[]}' || sigToImage.length <= 12) {
                plainValidation('#sig2');
                customAlert('Please enter and accept signature');
                return isValid;
            }

            else if (sigToImage.length <= 200) {
                plainValidation('#sig2');
                customAlert('Please enter valid signature');
                return isValid;
            }
            else {

                $('#imageSig2').val(sigToImage);
                $('#ConvertedImage').val(1);
                $('#sigtype').val(1);
                return isValid;
            }

        }

        //function to clear the signature//
        function ClearSignature(val) {
            isValid = false;
            if (val === 1) {
                $('#sig1').css('background-color', '');
                $('#sig1').signature('clear');
                $('#imageSig1').val('');
            }
            else {
                $('#sig2').css('background-color', '');
                $('#sig2').signature('clear');
                $('#imageSig2').val('');
            }
            return isValid;
        }

        //function to get the formatted date on(MM/DD/YYYY) format//
        function getFormattedDate(date) {
            date = new Date(date);
            var year = date.getFullYear();

            var month = (1 + date.getMonth()).toString();
            month = month.length > 1 ? month : '0' + month;

            var day = date.getDate().toString();
            day = day.length > 1 ? day : '0' + day;

            return month + '/' + day + '/' + year;
        }

        //function to validate the Entered Zipcode//
        function checkZipCode(inputTextObject) {
            if ($(inputTextObject).val() != "") {
                var ret = true;
                var Zipcode = $(inputTextObject).val();
                var len = Zipcode.length;
                if ((isNaN(inputTextObject.value)) && (len < 2)) {
                    $(inputTextObject).val('');
                    customAlert("Zip code must be numeric. ");
                    var ret = false;
                }
                else if (len < 2) {
                    $(inputTextObject).val('');
                    customAlert("Zip code length must be 2 digit. ");
                    var ret = false;
                }
                else if (isNaN(inputTextObject.value)) {
                    $(inputTextObject).val('');
                    customAlert("Zip code must be numeric. ");
                    var ret = false;
                }
                if (ret)
                    CheckAddress();
                return ret;
            }
            else {
                $('#text-select-city').find('option').remove();
                $('#text-state').val('');
                $('#text-county').val('');


            }
        }

        //function to Checks the Zipcode is available in database,after entering the zipcode  and loads the City and State//
        function CheckAddress() {

            if ($('#text-zipcode').val().trim() != "") {

                $.ajax({
                    url: HostedDir + "/InKind/CheckaddressForInKind",
                    type: "POST",
                    data: {
                        Address: "",
                        HouseHoldId: "0",
                        Zipcode: $('#text-zipcode').val().trim()
                    },
                    dataType: "json",
                    secureuri: false,
                    async: false,
                    success: function (response) {
                        //if (value == 1) {
                        if (response.Zipcodelist != null && response.Zipcodelist.length > 0) {
                            var option = "";
                            for (var i = 0; i < response.Zipcodelist.length; i++) {
                                option = option + '<option value="' + response.Zipcodelist[i].City + '">' + response.Zipcodelist[i].City + '</option>';
                            }
                            $('#text-select-city').find('option').remove().end().append(option);
                            $('#text-select-city').val('');
                            $('#text-state').val(response.Zipcodelist[0].State);
                            $('#text-county').val(response.Zipcodelist[0].County);
                            $('#text-zipcode').val(response.Zipcodelist[0].Zipcode);
                        }
                        else {
                            $('#text-select-city').find('option').remove().end();
                            $('#text-select-city').val('');
                            $('#text-state').val('');
                            $('#text-zipcode').val('');
                            //$('#County').val('');
                            customAlert("Could not find zipcode details.");

                        }
                        //}
                        //if (response.Result == 1) {
                        //    BootstrapDialog.confirm('Address already exists. Do you want to continue?', function (result) {
                        //        if (!result) {
                        //            $('#Street').val("");
                        //            $('#StreetName').val("");
                        //            $('#ZipCode').val("");
                        //            $('#City').find('option').remove().end();
                        //            $('#City').val('');
                        //            $('#State').val('');
                        //            $('#County').val('');
                        //        }
                        //    });
                        //}
                    }
                        , error: function (response) {
                            customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                        }
                });
            }
        }

        //function to get the Classrooms based on the Center Selected//
        function GetClassrooms(Select) {

            $.ajax({
                url: HostedDir + "/InKind/GetClassRoomsForInkind",
                type: "POST",
                data: {
                    Centerid: $(Select).val()
                },
                dataType: "json",
                secureuri: false,
                async: false,
                success: function (response) {
                    if (response.length > 0) {
                        var option = (response.length > 1) ? '<option value="0">--Select Classroom--</option>' : '';
                        for (var i = 0; i < response.length; i++) {
                            option = option + '<option value="' + response[i].ClassroomID + '">' + response[i].ClassName + '</option>';
                        }
                        $('#classroomSelect').find('option').remove().end().append(option);
                        //$('#Classroom').val(response[0].ClassroomID);
                    }
                    else {
                        $('#classroomSelect').find('option').remove();
                    }
                }
                   , error: function (response) {
                       customAlert("Session Ended Log Onto The System Again."); setTimeout(function () { window.location.href = HostedDir + '/login/Loginagency'; }, 2000);
                   }
            });
        }

        //function to check, entered value is number or not//
        function isNumber(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
            return true;
        }

    </script>

}

@section maincontentholder
{

    <style type="text/css">
        .div-search-section {
            border-radius: 10px;
            background: #f1f5f8;
            padding: 15px;
            margin-bottom: 20px;
        }


        #ulPaging a[disabled="disabled"] {
            pointer-events: none;
        }

        #contact-info-form {
            margin-top: 20px;
        }

        #ulPaging li {
            display: inherit;
        }

        #ulPaging a {
            color: #333;
            width: 34px;
            padding: 0px 12px 3px;
        }

        #no-more-tables8 {
            bottom: 20px;
            display: none;
        }

        /*.table-container {
            border-radius: 10px;
            background: #f1f5f8;
            padding: 10px;
            width: 100%;
            margin: 20px 0%;
        }*/










        #searchText {
            height: 32px !important;
        }

        body {
            font-family: arial,sans-serif !important;
        }

        #imageinfoInkindDates {
            cursor: pointer;
        }

        .contact-entry-div {
            display: none;
        }

        .impart-rght {
            text-align: right;
        }



        .checkbox-validation {
            border: 1px solid #a94442;
            padding-bottom: 10px;
            padding-top: 5px;
            border-radius: 10px;
            background-color: pink;
        }

        table#centerTable thead th {
            font-size: 14px !important;
        }

        .check-space {
            margin-top: 0px;
            float: left;
            margin-right: 4px;
        }

        .inkind-i {
            font-size: 18px;
            color: #f9c751;
        }


        @@media only screen and (max-width: 3000px), (min-device-width: 2560) and (max-device-width: 3000px) {

            .inset-width {
                width: 26.47%;
            }
        }



        @@media only screen and (max-width: 760px), (min-device-width: 768px) and (max-device-width: 1200px) {


            #centerTable, #inkind-table thead, #inkind-table tbody, #inkind-table th, #inkind-table td, #inkind-table tr {
                display: block;
                border: none;
            }

            #centerTable {
                float: left;
                width: 100%;
            }

                #centerTable tbody tr td:first-child a {
                    width: initial !important;
                    text-overflow: initial !important;
                }

                #centerTable thead tr {
                    position: absolute;
                    top: -9999px;
                    left: -9999px;
                }

                #centerTable tr {
                    margin: 0 7px 2em 0;
                    box-shadow: 8px 8px 8px rgba(0,0,0,0.2);
                    float: left;
                    width: 100%;
                }

                    #centerTable tr:nth-child(odd) {
                        background: #ffffff;
                        border: 1px solid #ccc;
                        border-radius: 8px;
                    }

                    #centerTable tr:nth-child(even) {
                        background: #f1f5f8;
                        border: 1px solid #ccc;
                        border-radius: 8px;
                    }

                #centerTable td {
                    border: none;
                    border-bottom: 1px solid #eee;
                    position: relative;
                    float: left;
                    width: 100%;
                }

                    #centerTable td:before {
                        position: relative;
                        top: 10px;
                        left: 0;
                        width: 35%;
                        padding-right: 10px;
                        white-space: nowrap;
                        height: auto;
                        display: inline-block;
                        float: left;
                    }

            .table-div {
                border: none !important;
            }



            #centerTable td:before {
                content: attr(data-title);
                text-align: left;
                padding-top: 0.6em;
                margin-left: 1em;
            }

            #centerTable > tbody > tr > td {
                text-align: right !important;
                margin-right: 2em;
            }

            .bind_body tr td p {
                padding: 10px 10px 10px 10px;
                text-align: right;
                font-size: 14px;
                margin: 0;
                border-right: 0;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                width: 55%;
                margin-right: 0;
                display: inline-block;
            }

            .ersea-table-head {
                height: auto !important;
            }
        }
    </style>
    <link href="~/Content/css/Inkindprocessing.css" rel="stylesheet" />
    <link href="~/Content/css/parentcontact.css" rel="stylesheet" />
    <style>
        .ersea-table thead tr {
            color: #fff;
            text-align: left;
            background: rgba(203,96,179,1) !important;
            background: -moz-linear-gradient(top, rgb(218, 174, 208) 0%, rgb(167, 113, 149) 1%, rgb(234, 137, 209) 18%, rgb(167, 27, 126) 51%, rgb(146, 28, 112) 100%) !important;
            background: -webkit-gradient(left top, rgb(218, 174, 208) 0%, rgb(167, 113, 149) 1%, rgb(234, 137, 209) 18%, rgb(167, 27, 126) 51%, rgb(146, 28, 112) 100%) !important;
            background: -webkit-linear-gradient(top,rgb(218, 174, 208) 0%, rgb(167, 113, 149) 1%, rgb(234, 137, 209) 18%, rgb(167, 27, 126) 51%, rgb(146, 28, 112) 100%) !important;
            background: -o-linear-gradient(top, rgb(218, 174, 208) 0%, rgb(167, 113, 149) 1%, rgb(234, 137, 209) 18%, rgb(167, 27, 126) 51%, rgb(146, 28, 112) 100%) !important;
            background: -ms-linear-gradient(top, rgb(218, 174, 208) 0%, rgb(167, 113, 149) 1%, rgb(234, 137, 209) 18%, rgb(167, 27, 126) 51%, rgb(146, 28, 112) 100%) !important;
            background: linear-gradient(to bottom, rgb(218, 174, 208) 0%, rgb(167, 113, 149) 1%, rgb(234, 137, 209) 18%, rgb(167, 27, 126) 51%, rgb(146, 28, 112) 100%) !important;
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cb60b3', endColorstr='#a80077', GradientType=0 ) !important;
        }

            .ersea-table thead tr th {
                border-bottom: 0 !important;
                text-align: left;
                text-transform: capitalize;
                /* font-size: 18px; */
                font-size: 14px;
                font-weight: normal;
                line-height: 25px;
                border: 1px solid #e7e7e7;
                cursor: pointer;
            }

        tbody.ersea-table-head tr td, .ersea-table-head p {
            background: none !important;
        }

        tbody.ersea-table-head tr:nth-of-type(odd) {
            background-color: #fff !important;
        }

        tbody.ersea-table-head tr:nth-of-type(even) {
            background-color: #f9f9f9 !important;
        }
    </style>
    <div class="row Zoom">
        <div class="col-lg-12" style="padding:0;">
            <div class="page-wrapper-change">
                <div class="container-fluid">
                    <div class="row">


                        <div class="right-side-container-ch col-xs-12">

                            <div class="col-xs-12" style="padding:0px;margin-bottom:20px;">
                                <div class="col-lg-12">
                                    <h2 class="page-header page-header-change" style="border-bottom:5px solid #f9c751!important;color:#fff;">
                                        <i class="fa fa-file" aria-hidden="true"></i>&nbsp;In-Kind Entry

                                        <span class="view-btn backto_listspan">



                                        </span>
                                    </h2>
                                </div>
                            </div>
                            <div class="col-xs-12 text-right glossy_btn">
                                <button class="glossy-button-button button-green glossy-button-hover" id="addContactBtn">
                                    Add Contact

                                    <span class="glossy-button-after"></span>
                                    <span class="glossy-button-before"></span>

                                </button>
                            </div>

                            <div class="col-lg-12 col-xs-12">
                                <div class="col-xs-12 div-search-section">

                                    <div class="col-xs-12 search-block-main">

                                        <div class="col-lg-4 impart-rght">
                                            <label class="" style="margin-top:8px;">Search By Name</label>

                                        </div>

                                        <div class="search-block">
                                            <input type="text" placeholder="Search..." name="SearchByName" id="searchText" class="form-control">
                                            <div class="ersa-search-btn">
                                                <button id="searchByNamebtn" data-search-item="">Search</button>
                                            </div>
                                        </div>


                                    </div>

                                    <div class="row text-center not-exists-div co-xs-12">
                                        <small>Name does not exists in the system. Kindly, add the contact information.</small>
                                    </div>





















                                </div>


















                                <form id="contact-info-form">

                                    <!-------In-kind Entry Donars section------->
                                    <div id="no-more-tables8" class="col-xs-12 no-padding">
                                        <div class="col-xs-12 table-container">


                                            <div class="col-xs-12 text-right">
                                                <label style="color:#1d5381;">Total Count : <span id="totalCountSpan">0</span></label>

                                            </div>

                                            <table class="col-md-12 table-striped table-condensed cf table-change ersea-table" id="centerTable">
                                                <thead class="table-hd">
                                                    <tr>
                                                        <th style="width:24%;">
                                                            @*<i class="fa fa-sort-alpha-asc i-asc" aria-hidden="true" style="color: #f9c751;"></i>
                                                            <i class="fa fa-sort-alpha-desc i-desc" aria-hidden="true" style="color: #f9c751;display:none;"></i>*@
                                                            Name
                                                        </th>
                                                        <th style="width:15%;">Company Name</th>
                                                        <th>Address </th>
                                                        <th style="width:15%;">Phone No</th>
                                                        <th>Email</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="ersea-table-head bind_body">





                                                    <tr style="width:98.3%">
                                                        <td colspan="9" style="padding: 25px;text-align:center;font-weight:bold;">Search by Center and Classroom<sup style="color:red;">*</sup></td>
                                                    </tr>

                                                </tbody>



                                            </table>


                                        </div>




                                        <!---Pagination Section-->
                                        <div class="col-xs-12">
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pagination-file">
                                                <div class="pages_display">
                                                    <ul>
                                                        <li style="color:#ffffff;">Display</li>
                                                        <li>
                                                            <select id="ddlpagetodisplay">
                                                                <option value="10" selected="selected">10</option>
                                                                <option value="20">20</option>
                                                                <option value="30">30</option>
                                                                <option value="50">50</option>
                                                                <option value="100">100</option>
                                                            </select>
                                                        </li>
                                                        <li style="color:#ffffff;">Records Per Page</li>
                                                    </ul>
                                                    <div class="clear"></div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div id="divPaging" class="pagination_wrp">
                                                    <ul id="ulPaging" class="pagination">
                                                        <li title="First">
                                                            <a href="javascript:void(0);" id="First" disabled="disabled">
                                                                <i class="fa fa-angle-double-left" aria-hidden="true" style="margin:auto;padding:-7px;"></i>
                                                            </a>

                                                        </li>
                                                        <li title="Back">


                                                            <a href="javascript:void(0);" id="Back" disabled="disabled">
                                                                <i class="fa fa-angle-left" aria-hidden="true" style="margin:auto;padding:-7px;"></i>
                                                            </a>

                                                        </li>
                                                        <li title="Select">
                                                            <select class="select_cl" id="ddlpaging"></select>
                                                        </li>
                                                        <li title="Next">

                                                            <a href="javascript:void(0);" id="Next" disabled="disabled">
                                                                <i class="fa fa-angle-right" aria-hidden="true" style="margin:auto;padding:-7px;"></i>
                                                            </a>
                                                        </li>
                                                        <li title="Last">

                                                            <a href="javascript:void(0);" id="Last" disabled="disabled">
                                                                <i class="fa fa-angle-double-right" aria-hidden="true" style="margin:auto;padding:-7px;"></i>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                    </div>



                <div class="col-lg-12 col-xs-12 contact-entry-div" style="margin-top:20px;margin-bottom:20px;padding:0px;">

                    <fieldset>
                        <legend id="contact-legend">Add Contact Information</legend>

                        <div class="form-group row">

                            <label class="col-lg-4 col-form-label lbl-required">Contact Type</label>

                            <div class="col-lg-4 text-center">
                                <label class="radio-inline" style="display:initial;">
                                    <input type="radio" name="radiocompany" value="1">Individual
                                </label>
                                <label class="radio-inline" style="display:initial;">
                                    <input type="radio" name="radiocompany" value="2">Corporate
                                </label>
                            </div>
                        </div>

                        <div class="contact-info-div">
                            <div class="col-md-6 col-sm-12 col-lg-6 col-xs-12" style="padding: 0px;">
                                <div class="form-group row">

                                    <label class="col-lg-4 col-form-label lbl-required">Name</label>

                                    <div class="importhead_name_last">
                                        <input type="text" class="form-control" placeholder="First Name" id="text-contact-nameF" />
                                        <input type="text" class="form-control" placeholder="Last Name" id="text-contact-nameL" style="width:50%;" />
                                    </div>

                                    @*<div class="col-lg-4" style="padding-right:2px">
                                            <input type="text" class="form-control" placeholder="First Name" id="text-contact-nameF" />
                                        </div>

                                        <div class="col-lg-4" style="padding-left:2px;">
                                            <input type="text" class="form-control" placeholder="Last Name" id="text-contact-nameL" />
                                        </div>*@
                                </div>

                                <div class="form-group row individual-gender-div" style="display:none;">

                                    <label class="col-lg-4 col-form-label lbl-required">Gender</label>

                                    <div class="col-lg-8">

                                        <div class="col-xs-6 col-sm-4" style="padding: 0px;">
                                            <input class="Pfemale" id="PGenderfemale" name="PGender" type="radio" value="2">
                                            <span>Female </span>
                                        </div>
                                        <div class="col-xs-6 col-sm-4">
                                            <input class="Pmale" id="PGendermale" name="PGender" type="radio" value="1">
                                            <span>Male</span>
                                        </div>
                                        <div class="col-xs-6 col-sm-4">
                                            <input class="Pother" id="PGenderother" name="PGender" type="radio" value="3">
                                            <span>Other </span>
                                        </div>

                                    </div>
                                </div>

                                <div class="form-group row company-name-div" style="display:none;">
                                    <label class="col-lg-4 col-form-label lbl-required">Company Name</label>
                                    <div class="col-lg-8">
                                        <input type="text" class="form-control" id="text-company-name" />
                                    </div>
                                </div>
                                @*<div class="form-group row individual-apart-div" style="display:none;">
                                        <label class="col-lg-4 col-form-label">Apartment No., Lot No.</label>
                                        <div class="col-lg-8">
                                            <input type="text" class="form-control" id="text-apartment-no" />
                                        </div>
                                    </div>*@

                                <div class="form-group row">
                                    <label class="col-lg-4 col-form-label lbl-required">Address</label>
                                    <div class="col-lg-8">
                                        <input type="text" class="form-control" id="text-addressline1" />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-4 col-form-label">Apartment No., Lot No.</label>
                                    <div class="col-lg-8">
                                        <input type="text" class="form-control" id="text-addressline2" />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-4 col-form-label lbl-required">Zip Code</label>
                                    <div class="col-lg-8">
                                        <input class="form-control" type="text" id="text-zipcode" maxlength="6" onblur="checkZipCode(this);" />
                                    </div>
                                </div>


                            </div>
                            <!-- b/w -->
                            <div class="col-md-6 col-sm-12 col-lg-6 col-xs-12" style="padding: 0px;">



                                <div class="form-group row">
                                    <label class="col-lg-4 col-form-label lbl-required">City</label>
                                    <div class="col-lg-8">
                                        <select class="form-control" id="text-select-city">
                                            <option value="0">--Select City--</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row individual-county-div" style="display:none;">
                                    <label class="col-lg-4 col-form-label lbl-required">County</label>
                                    <div class="col-lg-8">
                                        <input type="text" class="form-control" id="text-county" placeholder="County" disabled />
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-lg-4 col-form-label lbl-required">State</label>
                                    <div class="col-lg-8">

                                        <input type="text" class="form-control" id="text-state" placeholder="State" disabled />
                                    </div>
                                </div>

                                <div class="form-group row individual-phonetype-div" style="display:none;">
                                    <label class="col-lg-4 col-form-label lbl-required">Phone Type</label>
                                    <div class="col-lg-8">
                                        <select class="form-control" id="text-select-phonetype">
                                            <option value="1">Home</option>
                                            <option value="2">Mobile</option>
                                            <option value="3">Work</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-lg-4 col-form-label lbl-required">Phone No</label>
                                    <div class="col-lg-8">
                                        <input class="form-control" type="text" id="text-select-phoneNo" />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-4 col-form-label lbl-required">Email Address</label>
                                    <div class="col-lg-8 mynoemial_comments">
                                        <input class="form-control" type="text" id="text-select-email" />
                                        <div class="sumar_noemail">
                                            <input type="checkbox" name="no_email">
                                            <label>No Email</label>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="col-lg-12 col-xs-12 col-md-12 col-sm-12 no-padding">
                                <div class="form-group row paratype_ indivi individual-parent-type-div">

                                    <label class="col-form-label">Past Early Head Start/Head Start Parent ?</label>
                                    <input class="parent-type" name="parenttype" type="checkbox" value="1">

                                </div>
                            </div>

                        </div>

                    </fieldset>
                </div>
            </form>
        </div>



        <div class="col-lg-12 col-xs-12 inkind-entry-div" style="margin-top:20px;" id="inkind_Entry_scroll">
            <form id="inkind-info-form">
                <fieldset>
                    <legend>Inkind Activity Entry</legend>

                    <div class="col-md-6 col-sm-12 col-lg-6 col-xs-12" style="padding: 0px;">

                        <div class="form-group row inkind-name-div">
                            <label class="col-lg-4 col-form-label">Name</label>
                            <div class="col-lg-8">
                                <label class="col-form-label" id="inkindPersonName" cl_id="0" is_comp="0" style="font-weight:bold;"></label>
                            </div>
                        </div>

                        <div class="form-group row inkind-company-div" style="display:none;">
                            <label class="col-lg-4 col-form-label">Company Name</label>
                            <div class="col-lg-8">
                                <label class="col-form-label" id="inkindCompanyName" cl_id="0" is_comp="0" style="font-weight:bold;"></label>
                            </div>
                        </div>

                                            <div class="form-group row">

                                                <label class="col-lg-4 col-form-label lbl-required">Date</label>
                                                <div class="col-lg-6" data-placement="top">
                                                    <div class="input-group date col-lg-12"  data-placement="top" id='datetimepicker1' style="padding-left:0;padding-right:0;">
                                                        <input type="text" class="form-control" data-placement="top" id="activity-date" placeholder="MM/DD/YYYY" maxlength="10" />
                                                        <span class="input-group-addon">
                                                            <span class="glyphicon glyphicon-calendar"></span>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-lg-2" style="margin-top: 8px;font-weight: bold;">
                                                    <img src="/Images/info.png" id="imageinfoInkindDates" data-placement="top" data-toggle="popover" style="height: 20px;width :20px;padding: 0;">
                                                </div>



                                            </div>
                                            <div class="form-group row" id="activitytype-div">
                                                <label class="col-lg-4 col-form-label lbl-required">Activity Type</label>
                                                <div class="col-lg-8" id="activitytyperadiodiv">

                                <div class="col-sm-6 col-xs-12" style="padding: 0;width:auto;display:inline-block;margin-right:20px;">
                                    <span class="check-space"> <input type="radio" name="activityTypeRadio" value="1"></span>
                                    <label style="color:#333;width: auto;display: inline-block;">Center</label>
                                </div>
                                <div class="col-sm-6 col-xs-12" style="padding: 0;width:auto;display:inline-block;">
                                    <span class="check-space"> <input type="radio" name="activityTypeRadio" value="2"></span>
                                    <label style="color:#333;width: auto;display: inline-block;">Home</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row" id="activity-description" style="display:none;">
                            <label class="col-lg-4 col-form-label lbl-required">Activity</label>
                            <div class="col-lg-8" id="activity-des-listdiv">

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-4 col-form-label lbl-required">Description of Activity</label>
                                                <div class="col-lg-8">
                                                    <textarea class="form-control" rows="5" style="margin-bottom:10px;" id="descriptionTextArea"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group row inkind-hours-div" style="display:none;">
                                                <label class="col-lg-4 col-form-label lbl-required">Hours : Minutes</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" data-toggle="popover" data-target-selector="#hrs-exceed-content" data-placement="top" data-title="Exceeding 8 hours" id="inkindHoursText" placeholder="HH" maxlength="2" style="display:initial;width:30%;" />
                                                    <span style="display:initial;">:</span>
                                                    <input type="text" class="form-control" id="inkindMinutesText" placeholder="MM" maxlength="2" style="display:initial;width:30%;" />
                                                </div>
                                            </div>

                        <div class="form-group row inkind-miles-div" style="display:none;">
                            <label class="col-lg-4 col-form-label lbl-required">Miles</label>
                            <div class="col-lg-8">
                                <input type="text" class="form-control" id="inkindMilesText" maxlength="6" />
                            </div>
                        </div>
                        <div class="form-group row amount-div" style="display:none;">
                            <label class="col-lg-4 col-form-label lbl-required">Amount ($)</label>
                            <div class="col-lg-8">
                                <input type="text" class="form-control" id="inkindAmountTxt" pattern="^\d*(\.\d{0,2})?$" />
                            </div>
                        </div>

                    </div>
                    <div class="col-md-6 col-sm-12 col-lg-6 col-xs-12" style="padding: 0px;">
                        <div class="form-group row">
                            <label class="col-lg-4 col-form-label lbl-required">Center Name</label>
                            <div class="col-lg-8">
                                @Html.DropDownList("ddlCenterDetails", Fingerprints.Utilities.Helper.GetCentersByUserId(Session["UserId"].ToString(), Session["AgencyID"].ToString(), Session["RoleID"].ToString(), false, false, false, false, true), new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-lg-4 col-form-label">Classroom</label>
                            <div class="col-lg-8">
                                <select class="form-control" id="classroomSelect">
                                    <option value="0">--Select Classroom--</option>
                                </select>
                            </div>
                        </div>


                        <div class="form-group row individual-parent-type-div-act">

                            <label class="col-lg-4 col-sm-6 col-md-6 col-form-label">Past Early Head Start/Head Start Parent ?</label>

                            <div class="col-lg-6">

                                <div class="col-xs-6 col-sm-4" style="padding: 0px;">
                                    <input class="parent-type" name="parenttype" type="checkbox" value="1">
                                </div>
                            </div>
                        </div>

                        <div class="form-group row attach-div" style="display:none;">
                            <label class="col-lg-4 col-form-label">Attachment(s)</label>
                            <div class="col-lg-8 sum_attachparticic">
                                <input type="file" class="form-control" name="InkindAttachmentsList[0].InkindAttachmentFile" />
                                <a href="javascript:void(0)" id="Attachmectstag" title="Add Attachment" onclick="addMoreInkindAtt(this);"><i class="fa fa-plus-circle"></i>&nbsp;Add</a>
                            </div>
                            <div class="attachparticic_myactive">

                            </div>
                        </div>



                    </div>

                    <div class="form-group row">
                        <div class="col-lg-6 text-left" id="parent-sig-div" style="display:none;">
                            <label for="sig1">Signature of Parent / Representative</label>
                            <div id="sig1" class="form-control"></div>
                            <input type="hidden" id="imageSig1" />
                            <div class="add-useragform student-scroll full-border full-border-margin text-center cent-section">
                                <button class="btnPassword" type="button" id="clear1" onclick="return ClearSignature(1);" style="border-radius:50px;">Clear</button>
                                <button class="btnPassword" type="button" id="accept1" onclick="return SaveSignature();" style="border-radius:50px;">Accept Signature</button>
                            </div>
                        </div>

                                            <div class="col-lg-6 text-right" id="staff-sig-div" style="display:none;">
                                                <label for="sig2" style="margin-left:0;" class="pad-left-signature">Signature of Staff</label>
                                                <div id="sig2" class="form-control" style="margin-left:0;"></div>
                                                <input type="hidden" id="imageSig2" />
                                                <div class="add-useragform student-scroll full-border full-border-margin impo-censect">
                                                    <button class="btnPassword" type="button" id="clear2" onclick="return ClearSignature(2);" style="border-radius:50px;">Clear</button>
                                                    <button class="btnPassword" type="button" id="accept2" onclick="return SaveSignatureStaff();" style="border-radius:50px;">Accept Signature</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group final-btn glossy_btn">
                                            <button class="glossy-button-button button-green glossy-button-hover" type="button" id="inKindEntrySubmit">
                                                <span class="glossy-button-before"></span>
                                                <span class="glossy-button-after"></span>
                                                Submit
                                            </button>
                                            <button class="glossy-button-button button-red glossy-button-hover" type="button" id="inKindEntryExit">
                                                <span class="glossy-button-before"></span>
                                                <span class="glossy-button-after"></span>
                                                Cancel
                                            </button>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>
                </div>
            </div>
        </div>



    <div id="hrs-exceed-content" class="hidden">
        <p>Are you sure want to continue?</p>
        <p><button type="button" class="btn btn-success">Yes</button>&nbsp;&nbsp;<button type="button" class="btn btn-danger">No</button></p>
    </div>

}





